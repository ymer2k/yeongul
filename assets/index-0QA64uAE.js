var t,i,e,s,o,n,h,r,a,d,l,c,u,g,p,f,w,x,y,m,k,S,T,b,O,C,B,P,R,W,D,A,v,G,M,E,F,I,N,_,L,z,j,H,V,Y,U,X,$,J,Z,K,q,Q,tt,it,et,st,ot,nt,ht,rt,at,dt,lt,ct,ut,gt,pt,ft,wt,xt,yt,mt,kt,St,Tt,bt,Ot,Ct,Bt,Pt,Rt,Wt,Dt,At,vt,Gt,Mt,Et,Ft,It,Nt,_t,Lt,zt,jt,Ht,Vt,Yt,Ut,Xt,$t,Jt,Zt,Kt,qt,Qt,ti,ii,ei,si,oi,ni,hi,ri,ai,di,li,ci,ui,gi=Object.defineProperty,pi=(t,i,e)=>(((t,i,e)=>{i in t?gi(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e})(t,"symbol"!=typeof i?i+"":i,e),e),fi=(t,i,e)=>{if(!i.has(t))throw TypeError("Cannot "+e)},wi=(t,i,e)=>(fi(t,i,"read from private field"),e?e.call(t):i.get(t)),xi=(t,i,e)=>{if(i.has(t))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(t):i.set(t,e)},yi=(t,i,e,s)=>(fi(t,i,"write to private field"),s?s.call(t,e):i.set(t,e),e),mi=(t,i,e,s)=>({set _(s){yi(t,i,s,e)},get _(){return wi(t,i,s)}}),ki=(t,i,e)=>(fi(t,i,"access private method"),e);import{p as Si}from"./phaser-C2_wa_Fb.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver((t=>{for(const e of t)if("childList"===e.type)for(const t of e.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&i(t)})).observe(document,{childList:!0,subtree:!0})}function i(t){if(t.ep)return;t.ep=!0;const i=function(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?i.credentials="include":"anonymous"===t.crossOrigin?i.credentials="omit":i.credentials="same-origin",i}(t);fetch(t.href,i)}}(),Phaser.Scene.prototype.setBackground=function(t){const i=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,t).setOrigin(.5,.5),e=this.cameras.main.width/i.width,s=this.cameras.main.height/i.height,o=Math.max(e,s);i.setScale(1.6*o),i.setPosition(this.cameras.main.width/2,this.cameras.main.height/2)};class Ti extends Si.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/background.png")}create(){this.scene.start("Preloader")}}const bi=new Set("ㅂㅃㅈㅉㄷㄸㄱㄲㅅㅆㅁㄴㅇㄹㅎㅋㅌㅊㅍ"),Oi=new Set("ㅛㅕㅑㅐㅒㅔㅖㅗㅓㅏㅣㅠㅜㅡ"),Ci="ㄱㄲㄴㄷㄸㄹㅁㅂㅃㅅㅆㅇㅈㅉㅊㅋㅌㅍㅎ",Bi="ㄱㄲㄳㄴㄵㄶㄷㄹㄺㄻㄼㄽㄾㄿㅀㅁㅂㅄㅅㅆㅇㅈㅊㅋㅌㅍㅎ",Pi=class t{constructor(t=null,i=null,e=null,s=null){this.choseong=t,this.jungseong=i,this.jongseong1=e,this.jongseong2=s}addChoseong(t){console.assert(bi.has(t)),console.assert(null===this.choseong),this.choseong=t}canCombineJungseong(i){return this.jungseong in t.COMBINE_JUNGSEONG&&i in t.COMBINE_JUNGSEONG[this.jungseong]}addJungseong(i){console.assert(Oi.has(i)),null===this.jungseong?this.jungseong=i:this.canCombineJungseong(i)?this.jungseong=t.COMBINE_JUNGSEONG[this.jungseong][i]:console.assert(!1)}canCombineJongseong(i){return this.jongseong1 in t.COMBINE_JONGSEONG&&i in t.COMBINE_JONGSEONG[this.jongseong1]}addJongseong(t){console.assert(bi.has(t)),null===this.jongseong1?this.jongseong1=t:this.canCombineJongseong(t)?this.jongseong2=t:console.assert(!1)}join(){let t=0;const i=["","ㄱ","ㅅ"],e=["","ㅈ","ㅎ"],s=["","ㄱ","ㅁ","ㅂ","ㅅ","ㅌ","ㅍ","ㅎ"],o=["","ㅅ"],n=["","ㅅ"];if(null===this.choseong&&null!==this.jungseong&&null===this.jongseong1&&null===this.jongseong2)return this.jungseong;if(null!==this.choseong&&null===this.jungseong&&null===this.jongseong1&&null===this.jongseong2)return this.choseong;if(null!==this.choseong&&null!==this.jungseong&&null===this.jongseong1&&null===this.jongseong2)t=44032+588*Ci.indexOf(this.choseong)+28*(this.jungseong.charCodeAt(0)-12623)+0;else if(null!==this.choseong&&null!==this.jungseong&&null!==this.jongseong1&&null===this.jongseong2){let i=Bi.indexOf(this.jongseong1)+1;t=44032+588*Ci.indexOf(this.choseong)+28*(this.jungseong.charCodeAt(0)-12623)+i}else{if(null===this.choseong||null===this.jungseong||null===this.jongseong1||null===this.jongseong2)return"";{let h=Bi.indexOf(this.jongseong1)+1,r=0;"ㄱ"===this.jongseong1?r=i.indexOf(this.jongseong2):"ㄴ"===this.jongseong1?r=e.indexOf(this.jongseong2):"ㄹ"===this.jongseong1?r=s.indexOf(this.jongseong2):"ㅂ"===this.jongseong1?r=o.indexOf(this.jongseong2):"ㅅ"===this.jongseong1?r=n.indexOf(this.jongseong2):console.assert(!1),t=44032+588*Ci.indexOf(this.choseong)+28*(this.jungseong.charCodeAt(0)-12623)+h+r}}return String.fromCharCode(t)}};pi(Pi,"COMBINE_JUNGSEONG",{"ㅗ":{"ㅏ":"ㅘ","ㅐ":"ㅙ","ㅣ":"ㅚ"},"ㅜ":{"ㅓ":"ㅝ","ㅔ":"ㅞ","ㅣ":"ㅟ"},"ㅡ":{"ㅣ":"ㅢ"}}),pi(Pi,"COMBINE_JONGSEONG",{"ㄱ":{"ㅅ":"ㄳ"},"ㄴ":{"ㅈ":"ㄵ","ㅎ":"ㄶ"},"ㄹ":{"ㄱ":"ㄺ","ㅁ":"ㄻ","ㅂ":"ㄼ","ㅅ":"ㄽ","ㅌ":"ㄾ","ㅍ":"ㄿ","ㅎ":"ㅀ"},"ㅂ":{"ㅅ":"ㅄ"}});let Ri=Pi;const Wi=t=>{let i="START",e=new Ri,s="";for(const o of t)if(bi.has(o)||Oi.has(o)||(s+=e.join(),e=new Ri,s+=o,i="START"),"START"===i)bi.has(o)?(e.addChoseong(o),i="CHOSEONG"):Oi.has(o)&&(e.addJungseong(o),i="JUNGSEONG1");else if("CHOSEONG"===i)bi.has(o)?(s+=e.join(),e=new Ri(o),i="CHOSEONG"):Oi.has(o)&&(e.addJungseong(o),i="JUNGSEONG1");else if("JUNGSEONG1"===i)bi.has(o)?null!==e.choseong&&Bi.includes(o)?(e.addJongseong(o),i="JONGSEONG1"):(s+=e.join(),e=new Ri(o),i="CHOSEONG"):Oi.has(o)&&(e.canCombineJungseong(o)?(e.addJungseong(o),i="JUNGSEONG2"):(s+=e.join(),e=new Ri(null,o),i="JUNGSEONG1"));else if("JUNGSEONG2"===i)bi.has(o)?null!==e.choseong&&Bi.includes(o)?(e.addJongseong(o),i="JONGSEONG1"):(s+=e.join(),e=new Ri(o),i="CHOSEONG"):Oi.has(o)&&(s+=e.join(),e=new Ri(null,o),i="JUNGSEONG1");else if("JONGSEONG1"===i){if(bi.has(o))e.canCombineJongseong(o)?(e.addJongseong(o),i="JONGSEONG2"):(s+=e.join(),e=new Ri(o),i="CHOSEONG");else if(Oi.has(o)){let t=e.jongseong1;e.jongseong1=null,s+=e.join(),e=new Ri(t,o),i="JUNGSEONG1"}}else if("JONGSEONG2"===i){if(bi.has(o))s+=e.join(),e=new Ri(o),i="CHOSEONG";else if(Oi.has(o)){let t=e.jongseong2;e.jongseong2=null,s+=e.join(),e=new Ri(t,o),i="JUNGSEONG1"}}else console.assert(!1);return s+=e.join(),s};var Di=Phaser.Renderer.WebGL.Utils,Ai=Phaser.Renderer.WebGL.Utils;const vi=Phaser.GameObjects.GetCalcMatrix,Gi=Phaser.Renderer.Canvas.SetTransform,Mi={renderWebGL:function(t,i,e,s){i.dirty&&(i.updateData(),i.dirty=!1),e.addToRenderList(i);var o=t.pipelines.set(i.pipeline),n=vi(i,e,s),h=o.calcMatrix.copyFrom(n.calc),r=i._displayOriginX,a=i._displayOriginY,d=e.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&function(t,i,e,s,o,n){for(var h=Di.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*s),r=e.pathData,a=e.pathIndexes,d=0;d<a.length;d+=3){var l=2*a[d],c=2*a[d+1],u=2*a[d+2],g=r[l+0]-o,p=r[l+1]-n,f=r[c+0]-o,w=r[c+1]-n,x=r[u+0]-o,y=r[u+1]-n,m=i.getX(g,p),k=i.getY(g,p),S=i.getX(f,w),T=i.getY(f,w),b=i.getX(x,y),O=i.getY(x,y);t.batchTri(e,m,k,S,T,b,O,0,0,1,1,h,h,h,2)}}(o,h,i,d,r,a),i.isStroked&&function(t,i,e,s,o){var n=t.strokeTint,h=Ai.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*e);n.TL=h,n.TR=h,n.BL=h,n.BR=h;var r=i.pathData,a=r.length-1,d=i.lineWidth,l=d/2,c=r[0]-s,u=r[1]-o;i.closePath||(a-=2);for(var g=2;g<a;g+=2){var p=r[g]-s,f=r[g+1]-o;t.batchLine(c,u,p,f,l,l,d,g-2,!!i.closePath&&g===a-1),c=p,u=f}}(o,i,d,r,a),t.pipelines.postBatch(i)},renderCanvas:function(t,i,e,s){i.dirty&&(i.updateData(),i.dirty=!1),e.addToRenderList(i);var o=t.currentContext;if(Gi(t,o,i,e,s)){var n=i._displayOriginX,h=i._displayOriginY,r=i.pathData,a=r.length-1,d=r[0]-n,l=r[1]-h;o.beginPath(),o.moveTo(d,l),i.closePath||(a-=2);for(var c=2;c<a;c+=2){var u=r[c]-n,g=r[c+1]-h;o.lineTo(u,g)}o.closePath(),i.isFilled&&(function(t,i,e,s){var o=i.fillColor,n=i.fillAlpha,h=(16711680&o)>>>16,r=(65280&o)>>>8,a=255&o;t.fillStyle="rgba("+h+","+r+","+a+","+n+")"}(o,i),o.fill()),i.isStroked&&(function(t,i,e,s){var o=i.strokeColor,n=i.strokeAlpha,h=(16711680&o)>>>16,r=(65280&o)>>>8,a=255&o;t.strokeStyle="rgba("+h+","+r+","+a+","+n+")",t.lineWidth=i.lineWidth}(o,i),o.stroke()),o.restore()}}},Ei=Phaser.GameObjects.Shape;class Fi extends Ei{get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.isFilled=null!=t&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this._fillAlpha=t,this.isFilled=t>0&&null!=this._fillColor}setFillStyle(t,i){return void 0===i&&(i=1),this.fillColor=t,this.fillAlpha=i,this}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.isStroked=null!=t&&this._strokeAlpha>0&&this._lineWidth>0}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this._strokeAlpha=t,this.isStroked=t>0&&null!=this._strokeColor&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.isStroked=t>0&&null!=this._strokeColor}setStrokeStyle(t,i,e){return void 0===e&&(e=1),this.lineWidth=t,this.strokeColor=i,this.strokeAlpha=e,this}updateData(){return this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,i){var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=t,e.hitArea.height=i),this}resize(t,i){return this.setSize(t,i),this}}Object.assign(Fi.prototype,Mi);const Ii=Phaser.Utils.Objects.GetValue;let Ni=class{constructor(t,i,e,s,o){void 0===t&&(t=0),void 0===i&&(i=t),void 0===e&&(e=0),void 0===s&&(s=0),void 0===o&&(o=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,i,e,s,o)}setTo(t,i,e,s,o){return this.setPosition(t,i),this.setRadius(o),this.setSize(e,s),this}setPosition(t,i){return this.x=t,this.y=i,this}setRadius(t){return void 0===t&&(t=0),this.radius=t,this}setSize(t,i){return this.width=t,this.height=i,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){null==t&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){null==t&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var i,e;"number"==typeof t?(i=t,e=t):(i=Ii(t,"x",0),e=Ii(t,"y",0));var s=this.cornerRadius;s.tl=_i(Ii(t,"tl",void 0),i,e),s.tr=_i(Ii(t,"tr",void 0),i,e),s.bl=_i(Ii(t,"bl",void 0),i,e),s.br=_i(Ii(t,"br",void 0),i,e)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){Li(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){Li(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){Li(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){Li(this.cornerRadius.br,t)}};var _i=function(t,i,e){return void 0===t?t={x:i,y:e}:"number"==typeof t&&(t={x:t,y:t}),zi(t),t},Li=function(t,i){"number"==typeof i?(t.x=i,t.y=i):(t.x=Ii(i,"x",0),t.y=Ii(i,"y",0)),zi(t)},zi=function(t){t.convex=t.x>=0||t.y>=0,t.x=Math.abs(t.x),t.y=Math.abs(t.y)},ji=function(t,i,e){var s=e.length;if(s>=2){var o=e[s-2],n=e[s-1];if(t===o&&i===n)return e}return e.push(t,i),e};const Hi=Phaser.Math.DegToRad;var Vi=function(t,i,e,s,o,n,h,r,a){h&&n>o?n-=360:!h&&n<o&&(n+=360);var d=Hi(n-o)/r;o=Hi(o);for(var l=0;l<=r;l++){var c=o+d*l,u=t+e*Math.cos(c),g=i+s*Math.sin(c);ji(u,g,a)}return a};const Yi=Phaser.Utils.Objects.IsPlainObject,Ui=Phaser.Utils.Objects.GetValue,Xi=Phaser.Geom.Polygon.Earcut;class $i extends Fi{constructor(t,i,e,s,o,n,h,r){var a,d,l,c;if(Yi(i)){var u=i;i=u.x,e=u.y,s=u.width,o=u.height,n=u.radius,h=u.color,r=u.alpha,a=u.strokeColor,d=u.strokeAlpha,l=u.strokeWidth,c=u.shape}void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=1),void 0===o&&(o=s),void 0===n&&(n=0),void 0===c&&(c=0);var g=new Ni;if(super(t,"rexRoundRectangleShape",g),this.setShapeType(c),0===this.shapeType){var p=Ui(n,"radius",n);g.setTo(0,0,s,o,p)}else p={x:s/2,y:o/2},g.setTo(0,0,s,o,p);var f=Ui(n,"iteration",void 0);this.setIteration(f),this.setPosition(i,e),this.setFillStyle(h,r),void 0!==a&&void 0===l&&(l=2),this.setStrokeStyle(l,a,d),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,i=this.pathData;i.length=0;var e,s=t.width,o=t.height,n=t.cornerRadius,h=this.iteration+1;if(e=n.tl,Ji(e))if(e.convex){var r=e.x,a=e.y;Vi(r,a,e.x,e.y,180,270,!1,h,i)}else Vi(r=0,a=0,e.x,e.y,90,0,!0,h,i);else ji(0,0,i);return e=n.tr,Ji(e)?e.convex?(r=s-e.x,a=e.y,Vi(r,a,e.x,e.y,270,360,!1,h,i)):Vi(r=s,a=0,e.x,e.y,180,90,!0,h,i):ji(s,0,i),e=n.br,Ji(e)?e.convex?(r=s-e.x,a=o-e.y,Vi(r,a,e.x,e.y,0,90,!1,h,i)):Vi(r=s,a=o,e.x,e.y,270,180,!0,h,i):ji(s,o,i),e=n.bl,Ji(e)?e.convex?(r=e.x,a=o-e.y,Vi(r,a,e.x,e.y,90,180,!1,h,i)):Vi(r=0,a=o,e.x,e.y,360,270,!0,h,i):ji(0,o,i),i.push(i[0],i[1]),this.pathIndexes=Xi(i),this}setShapeType(t){return"string"==typeof t&&(t=Zi[t]),this.shapeType=t,this}setSize(t,i){return void 0===i&&(i=t),this.geom.width===t&&this.geom.height===i||(this.geom.setSize(t,i),1===this.shapeType&&this.setRadius({x:t/2,y:i/2}),this.updateDisplayOrigin(),this.dirty=!0,super.setSize(t,i)),this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return void 0===t&&(t=0),this.radius=t,this}setRadiusTL(t){return void 0===t&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return void 0===t&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return void 0===t&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return void 0===t&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){void 0!==this._iteration?this._iteration!==t&&(this._iteration=t,this.dirty=!0):this._iteration=t}setIteration(t){return void 0===t&&(t=6),this.iteration=t,this}}var Ji=function(t){return t.x>0&&t.y>0};const Zi={rectangle:0,circle:1};class Ki extends Si.Scene{constructor(){super("Game"),this.isMouseDown=!1,this.path=[],this.graphics=null,this.grid=[],this.bonuses=[],this.words=[],this.wordsCommonFound=[],this.foundWords=new Set,this.timerText=null,this.resultText=null,this.wordBackgroundInner=null,this.resultPointsText=null,this.totalPointsText=null,this.wordBackgroundOuter=null,this.wordPointsBackgroundEllipse=null,this.wordPointsBackgroundEllipseGraphicObject=null,this.totalPoints=0,this.mostValuableWord=0,this.longestWord=0,this.lengthOfLongestWord=0,this.countdown=120,this.padding=10,this.tones=["A3","B3","C3","D3","E3","F3","G3","A4","B4","C4","D4","E4","F4","G4","A5","B5"],this.currentToneIndex=0,this.fontResolution=2,this.isGridRandom=!0,this.letterPoints={"ㅇ":1,"ㄴ":1,"ㄱ":1,"ㄹ":1,"ㅅ":2,"ㅈ":2,"ㅎ":3,"ㄷ":3,"ㅂ":3,"ㅁ":3,"ㅊ":5,"ㅋ":8,"ㅍ":8,"ㄶ":8,"ㅄ":8,"ㅌ":10,"ㄺ":10,"ㄻ":10,"ㅒ":10,"ㅀ":10,"ㄵ":10,"ㄼ":10,"ㅏ":1,"ㅣ":1,"ㅡ":1,"ㅓ":2,"ㅗ":2,"ㅜ":3,"ㅕ":4,"ㅐ":4,"ㅔ":4,"ㅛ":8,"ㅑ":8,"ㅠ":8,"ㅖ":8}}init(t){this.isGridRandom=!0,0!=t.counter&&(this.isGridRandom=!1),this.preselectedGridNumber=t.counter}preload(){this.cache.json.remove("gridData");let t=0;console.log(this.isGridRandom),this.isGridRandom?(console.log(Math.floor(100*this.seededRandom(this.getDateSeed()))+1),t=Math.floor(100*this.seededRandom(this.getDateSeed()))+1):t=this.preselectedGridNumber;const i=`grid_${t}.json`;this.load.json("gridData","assets/grids/"+i),this.countdown=120,this.foundWords=new Set,this.totalPoints=0,this.longestWord=0,this.lengthOfLongestWord=0,this.path=[]}create(){this.sound.playAudioSprite("effects","RoundStart"),this.cameras.main.setBackgroundColor(68719476735),this.cameras.main.setZoom(4.7);const t=this.cache.json.get("gridData");this.grid=t.grid,this.bonuses=t.bonuses,this.words=t.words.map((t=>t.word)),this.wordsCommonFound=t.words,this.wordsCommonFound.forEach((t=>{t.isFound=0}));const i=50,e=this.sys.game.config.width/2-115,s=this.sys.game.config.height/2-115,o=[];let n=new $i(this,{x:e-20,y:s-160,width:270,height:410,radius:6,strokeColor:0,strokeWidth:2,color:void 0,alpha:0}).setOrigin(0,0);this.add.existing(n),this.wordBackgroundOuter=new $i(this,{x:this.sys.game.config.width/2-115,y:s-45-35,width:230,height:70,radius:2,strokeColor:0,strokeWidth:2,color:void 0,alpha:0}).setOrigin(0,0),this.add.existing(this.wordBackgroundOuter);let h=new $i(this,{x:this.wordBackgroundOuter.x+this.wordBackgroundOuter.width-65,y:this.wordBackgroundOuter.y-i-10,width:65,height:i,radius:2,strokeColor:0,strokeWidth:2,color:void 0,alpha:0}).setOrigin(0,0);this.add.existing(h),this.totalPointsText=this.add.text(h.x+h.width-5,h.y+h.height/2,this.totalPoints.toString().padStart(4," "),{fontSize:"24px",fontFamily:"Arial",color:"#000",align:"right"}).setOrigin(1,.5).setResolution(this.fontResolution);let r=new $i(this,{x:this.wordBackgroundOuter.x,y:this.wordBackgroundOuter.y-i-10,width:65,height:i,radius:2,strokeColor:0,strokeWidth:2,color:void 0,alpha:0}).setOrigin(0,0);this.add.existing(r),this.timerText=this.add.text(r.x+r.width/2,r.y+r.height/2,this.formatTime(this.countdown),{fontSize:"24px",fontFamily:"Arial",color:"#000"}).setOrigin(.5,.5).setResolution(this.fontResolution),this.wordBackgroundInner=new $i(this,{x:this.wordBackgroundOuter.x+this.wordBackgroundOuter.width/2,y:this.wordBackgroundOuter.y+10,width:10,height:i,radius:2,strokeColor:0,strokeWidth:2,strokeAlpha:0,color:void 0,alpha:0}).setOrigin(.5,0),this.add.existing(this.wordBackgroundInner),this.wordPointsBackgroundEllipse=new Phaser.Geom.Ellipse(this.wordBackgroundInner.x+this.wordBackgroundInner.width/2,this.wordBackgroundInner.y+5,25,25,16777215),this.wordPointsBackgroundEllipseGraphicObject=this.add.graphics(),console.log("this.grid"+this.grid);for(let a=0;a<4;a++)for(let t=0;t<4;t++){let n=e+60*t,h=s+60*a,r=this.grid[a][t],d=this.letterPoints[r]||0,l=this.bonuses[a][t],c=this.add.rectangle(n+5,h+5,40,40,16711680).setOrigin(0,0);c.setAlpha(0);let u=new $i(this,{x:n+25,y:h+25,width:50,height:i,radius:6,strokeColor:0,strokeWidth:2,color:void 0,alpha:0}).setOrigin(.5,.5);this.add.existing(u),this.add.text(n+25,h+25,r,{fontSize:"32px",color:"#000000"}).setOrigin(.5,.5).setResolution(this.fontResolution),this.add.text(n+50-2.5,h+2.5,d,{fontSize:"12px",color:"#000000"}).setOrigin(1,0).setResolution(this.fontResolution);let g="";if(l){let t=new Phaser.Geom.Ellipse(n+5,h+5,25,25),i=this.add.graphics();switch(l){case 1:i.fillStyle(9286651,1),g="ㄱx2";break;case 2:i.fillStyle(9286651,1),g="ㄱx3";break;case 3:i.fillStyle(15697028,1),g="가x2";break;case 4:i.fillStyle(15697028,1),g="가x3"}i.fillEllipseShape(t),i.lineStyle(2,0,1),i.strokeEllipseShape(t,256),this.add.text(t.x,t.y,g,{fontSize:"10px",color:"#000000"}).setOrigin(.5,.5).setResolution(this.fontResolution)}o.push({rect:c,roundRect:u,letter:r,points:d,bonus:l,index:4*a+t,gridX:t,gridY:a})}this.graphics=this.add.graphics({lineStyle:{width:5,color:255}}),this.input.on("pointerdown",(t=>{this.isMouseDown=!0,this.path=[],this.graphics.clear(),this.checkPointerOverRect(t,o)})),this.input.on("pointermove",(t=>{this.isMouseDown&&this.checkPointerOverRect(t,o)})),this.input.on("pointerup",(()=>{if(this.isMouseDown=!1,this.path.length>1){const t=this.path.map((t=>t.letter)).join("");let i=this.path.reduce(((t,i)=>t+(this.letterPoints[i.letter]||0)),0);const e=Wi(t);console.log(e);let s=1;if(this.path.forEach((t=>{switch(t.bonus){case 1:i+=this.letterPoints[t.letter]||0;break;case 2:i+=2*(this.letterPoints[t.letter]||0);break;case 3:s*=2;break;case 4:s*=3}})),i*=s,this.checkAndMarkWordAsFound(e))this.totalPoints+=i,this.updateResultTextAndWordPoints(e,i),this.updateTotalPointsText(),console.log(`Match found: ${e}`),t.length>this.lengthOfLongestWord&&(this.longestWord=e,this.lengthOfLongestWord=t.length),i>this.mostValuableWord&&(this.mostValuableWord=i);else if(i=0,this.updateResultTextAndWordPoints(e,i),console.log(`No match found for: ${e}`),this.wordsCommonFound.some((t=>t.word===e)))this.sound.playAudioSprite("effects","RepeatedWord");else{this.sound.playAudioSprite("effects","NoWord");let t=this.resultText.x;this.tweens.add({targets:[this.resultText,this.wordBackgroundInner],x:{from:t-20,to:t+20},ease:"Linear",duration:100,yoyo:!0,repeat:2,onComplete:()=>{this.resultText.x=t}})}}this.resetRectangles(o),this.resetGridRoundRectangle(o),this.path=[],this.graphics.clear()})),this.resultText=this.add.text(this.wordBackgroundOuter.x+this.wordBackgroundOuter.width/2,this.wordBackgroundOuter.y+15,"",{fontSize:"32px",color:"#000000",padding:{top:10,bottom:10}}).setOrigin(.5,0),this.resultPointsText=this.add.text(this.sys.game.config.width/2+80,this.wordPointsBackgroundEllipse.y,"",{fontFamily:"Arial Black",fontSize:"12px",color:"#000000"}).setOrigin(.5,.5),this.time.addEvent({delay:1e3,callback:this.updateTimer,callbackScope:this,loop:!0}),this.hiddenAt=null,document.addEventListener("visibilitychange",(()=>{if(document.hidden)this.hiddenAt=Date.now();else if(this.hiddenAt){const t=(Date.now()-this.hiddenAt)/1e3;this.countdown=Math.max(0,this.countdown-Math.floor(t)),this.hiddenAt=null}}))}checkPointerOverRect(t,i){const e=t.worldX,s=t.worldY;i.forEach((t=>{if(Phaser.Geom.Rectangle.Contains(t.rect.getBounds(),e,s)){const i=this.path[this.path.length-1];if(!i||i.index!==t.index)if(this.path.some((i=>i.index===t.index))){const i=this.path.findIndex((i=>i.index===t.index));this.path.slice(i+1).forEach((t=>{t.roundRect.setFillStyle(255,0),this.shrinkCell(t.roundRect),this.currentToneIndex=this.currentToneIndex-1,console.log(this.currentToneIndex)})),this.path=this.path.slice(0,i+1),this.drawLines()}else i&&!this.areNeighbors(i,t)||(this.path.push(t),t.roundRect.setFillStyle(12776801,1),this.growCell(t.roundRect),this.sound.playAudioSprite("tones",this.tones[this.currentToneIndex]),this.currentToneIndex=(this.currentToneIndex+1)%(this.tones.length+1),console.log(this.currentToneIndex),this.drawLines())}}))}areNeighbors(t,i){const e=Math.abs(t.gridX-i.gridX),s=Math.abs(t.gridY-i.gridY);return e<=1&&s<=1&&!(0===e&&0===s)}resetRectangles(t){t.forEach((t=>{t.rect.setFillStyle(16711680)}))}resetGridRoundRectangle(t){t.forEach((t=>{t.roundRect.setFillStyle(16711680,0),this.shrinkCell(t.roundRect),this.currentToneIndex=0}))}drawLines(){this.graphics.clear(),this.graphics.lineStyle(5,12776801);for(let t=0;t<this.path.length-1;t++){const i=this.path[t].rect.getBounds(),e=this.path[t+1].rect.getBounds(),s=this.getEdgePoint(i,e),o=this.getEdgePoint(e,i);this.graphics.moveTo(s.x,s.y),this.graphics.lineTo(o.x,o.y)}this.graphics.strokePath()}getEdgePoint(t,i){const e=Phaser.Math.Angle.Between(t.centerX,t.centerY,i.centerX,i.centerY);return{x:t.centerX+Math.cos(e)*(t.width/2),y:t.centerY+Math.sin(e)*(t.height/2)}}updateResultTextAndWordPoints(t,i){this.resultText.setFontSize("32px"),this.resultText.setText(t).setResolution(this.fontResolution),this.resultText.width>=this.wordBackgroundOuter.width-2*this.padding&&this.resultText.setFontSize("16px"),this.wordBackgroundInner.setStrokeStyle(2,0,1),this.wordBackgroundInner.width=this.resultText.width+2*this.padding,this.wordPointsBackgroundEllipseGraphicObject.clear(),i?(this.resultPointsText.setText(`+${i}`).setResolution(this.fontResolution),this.wordPointsBackgroundEllipseGraphicObject.fillStyle(16777215,1),this.wordPointsBackgroundEllipseGraphicObject.lineStyle(2,0,1),i>=20?this.sound.playAudioSprite("effects","MediumPoints"):this.sound.playAudioSprite("effects","LowPoints")):(this.resultPointsText.setText(""),this.wordPointsBackgroundEllipseGraphicObject.fillStyle(16777215,0),this.wordPointsBackgroundEllipseGraphicObject.lineStyle(2,0,0)),this.wordPointsBackgroundEllipse.x=this.wordBackgroundInner.x+this.wordBackgroundInner.width/2,this.wordPointsBackgroundEllipse.width=this.resultPointsText.width+this.padding/2,this.resultPointsText.x=this.wordPointsBackgroundEllipse.x,this.wordPointsBackgroundEllipseGraphicObject.fillEllipseShape(this.wordPointsBackgroundEllipse),this.wordPointsBackgroundEllipseGraphicObject.strokeEllipseShape(this.wordPointsBackgroundEllipse,128)}updateTotalPointsText(){this.totalPointsText.setText(this.totalPoints).setResolution(this.fontResolution)}updateTimer(){if(this.countdown>0)this.countdown--,this.timerText.setText(this.formatTime(this.countdown)),5==this.countdown&&this.sound.playAudioSprite("effects","TickTock");else{this.timerText.setText("00:00"),this.sound.playAudioSprite("effects","Cheers");const t=this.wordsCommonFound.reduce(((t,i)=>t+i.isFound),0);this.scene.start("GameOver",{foundWords:t,totalNumberOfWords:this.words.length,totalPoints:this.totalPoints,longestWord:this.longestWord,mostValuableWord:this.mostValuableWord,wordData:this.wordsCommonFound})}}formatTime(t){const i=Math.floor(t/60),e=t%60;return`${this.pad(i)}:${this.pad(e)}`}pad(t){return t.toString().padStart(2,"0")}shrinkCell(t){this.tweens.add({targets:t,scaleX:1,scaleY:1,ease:"Linear",duration:500,repeat:0,yoyo:!1})}growCell(t){this.tweens.add({targets:t,scaleX:1.05,scaleY:1.05,ease:"Elastic",duration:500,repeat:0,yoyo:!1})}getDateSeed(){const t=new Date;return 1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()}seededRandom(t){const i=1e4*Math.sin(t);return i-Math.floor(i)}formatDate(t){let i=new Date(t),e=""+(i.getMonth()+1),s=""+i.getDate(),o=i.getFullYear();return e.length<2&&(e="0"+e),s.length<2&&(s="0"+s),[o,e,s].join("-")}checkAndMarkWordAsFound(t){const i=this.wordsCommonFound.find((i=>i.word===t));return!(!i||0!==i.isFound||(i.isFound=1,0))}}const qi=Object.freeze({RECT_HEIGHT:260,RECT_WIDTH:260,PADDING:52,GRID_WIDTH:1196,GRID_HEIGHT:1196,CELL_RADIUS:45});class Qi extends Phaser.GameObjects.Container{constructor(t,i,e){super(t,i,e),t.add.existing(this);let s=t.add.circle(0,0,100,16777215),o=t.add.rectangle(-10,-60,20,65,1715258).setOrigin(0,0),n=t.add.rectangle(60,-60,25,60,16777215).setOrigin(.5,.5);n.rotation=.785398;let h=t.add.rectangle(0,-125,70,25,16777215).setOrigin(.5,.5);this.add([s,o,n,h]),this.setScale(.35)}}class te extends Phaser.GameObjects.Container{constructor(t,i,e){super(t,i,e),t.add.existing(this);let s=t.add.graphics();s.fillStyle(16777215,1),s.fillCircle(0,0,100);let o=t.add.graphics();o.lineStyle(4,65280,0),o.fillStyle(1715258,1),o.beginPath(),o.moveTo(0,-60),o.lineTo(17,-17),o.lineTo(60,-17),o.lineTo(26,9),o.lineTo(39,52),o.lineTo(0,26),o.lineTo(-39,52),o.lineTo(-26,9),o.lineTo(-60,-17),o.lineTo(-17,-17),o.closePath(),o.strokePath(),o.fillPath(),this.add([s,o]),this.setScale(.4)}}class ie extends Phaser.GameObjects.Text{constructor(s,o,n){super(s,o,n,"0",{fontSize:"75px",fontFamily:"Pretendard-Bold",color:"#ffffff"}),xi(this,t,void 0),xi(this,i,void 0),xi(this,e,80),s.add.existing(this),this.setOrigin(1,.5),yi(this,i,new te(s,this.x-this.width-wi(this,e)/2-qi.PADDING,n))}setPoints(t){this.setText(t),wi(this,i).x=this.x-this.width-wi(this,e)/2-qi.PADDING}}t=new WeakMap,i=new WeakMap,e=new WeakMap;const ee=class t extends Phaser.GameObjects.Text{constructor(i,e,r,a,d){super(i,e,r,t.formatTime(a),{fontSize:"75px",fontFamily:"Pretendard-Bold",color:"#ffffff"}),xi(this,s,void 0),xi(this,o,0),xi(this,n,0),xi(this,h,void 0),yi(this,s,i),yi(this,h,d),i.add.existing(this),yi(this,o,a),this.setOrigin(0,.5),i.time.addEvent({delay:1e3,callback:this.updateTimer,callbackScope:this,loop:!0}),yi(this,n,null),document.addEventListener("visibilitychange",(()=>{if(document.hidden)yi(this,n,Date.now());else if(wi(this,n)){const t=(Date.now()-wi(this,n))/1e3;yi(this,o,Math.max(0,wi(this,o)-Math.floor(t))),yi(this,n,null)}}))}static formatTime(i){const e=Math.floor(i/60),s=i%60;return`${t.pad(e)}:${t.pad(s)}`}static pad(t){return t.toString().padStart(2,"0")}updateTimer(){wi(this,o)>0?(mi(this,o)._--,this.setText(t.formatTime(wi(this,o))),5==wi(this,o)&&wi(this,s).sound.playAudioSprite("effects","TickTock")):(this.setText("00:00"),wi(this,h).call(this))}};s=new WeakMap,o=new WeakMap,n=new WeakMap,h=new WeakMap;let se=ee;class oe extends Phaser.GameObjects.Container{constructor(t,i,e,s,o){super(t,i,e),xi(this,r,void 0),xi(this,a,void 0),xi(this,d,void 0),xi(this,l,void 0),xi(this,c,void 0),yi(this,r,t),t.add.existing(this),qi.PADDING;const n=qi.RECT_HEIGHT+qi.PADDING/2;this.RESULT_WORD_FONT_SIZE=104,yi(this,c,new $i(t,{x:0,y:0,width:qi.GRID_WIDTH,height:qi.RECT_HEIGHT+qi.PADDING/2,radius:45,strokeColor:0,strokeWidth:0,alpha:0}).setOrigin(.5,.5).setFillStyle(1008845,1)),this.add(wi(this,c)),yi(this,l,new $i(t,{x:0,y:-n/2,width:qi.RECT_WIDTH,height:qi.RECT_HEIGHT/3.5,radius:50,strokeColor:0,strokeWidth:0,alpha:0}).setOrigin(.5,.5).setFillStyle(16777215,1)),wi(this,l).setAlpha(0),this.add(wi(this,l)),yi(this,a,this.scene.add.text(0,0,"",{fontFamily:"Pretendard-Bold",fontSize:this.RESULT_WORD_FONT_SIZE,color:"#ffffff",padding:{top:qi.PADDING,bottom:qi.PADDING}}).setOrigin(.5,.5)),this.add(wi(this,a)),yi(this,d,this.scene.add.text(0,-n/2,"",{fontFamily:"Pretendard-Medium",fontSize:"64px",color:"#CD2E3A"}).setOrigin(.5,.5)),this.add(wi(this,d))}setResultText(t){wi(this,a).setFontSize(this.RESULT_WORD_FONT_SIZE),wi(this,a).setText(t),wi(this,a).width>=wi(this,c).width-2*this.padding&&this.resultText.setFontSize(this.RESULT_WORD_FONT_SIZE/2)}setResultPoints(t){t?(wi(this,d).setText(`+${t}`),wi(this,l).setAlpha(1)):(wi(this,d).setText(""),wi(this,l).setAlpha(0))}runNoWordTween(){let t=wi(this,a).x;wi(this,r).tweens.add({targets:wi(this,a),x:{from:t-20,to:t+20},ease:"Linear",duration:100,yoyo:!0,repeat:2,onComplete:()=>{wi(this,a).x=t}})}}r=new WeakMap,a=new WeakMap,d=new WeakMap,l=new WeakMap,c=new WeakMap;class ne{static calculate(t){if(!Array.isArray(t)||0===t.length)return 0;let i=t.reduce(((t,i)=>t+(i.point||0)),0),e=1;return t.forEach((t=>{switch(t.bonus){case 1:i+=t.point||0;break;case 2:i+=2*(t.point||0);break;case 3:e*=2;break;case 4:e*=3}})),i*e}}class he extends Phaser.GameObjects.Container{constructor(t,i,e,s,o,n,h){super(t,i,e),xi(this,m),xi(this,u,void 0),xi(this,g,void 0),xi(this,p,void 0),xi(this,f,void 0),xi(this,w,void 0),xi(this,x,void 0),xi(this,y,void 0),pi(this,"index"),t.add.existing(this),yi(this,u,t),yi(this,p,s),yi(this,f,o),yi(this,w,n),this.index=h,this.createCell()}createCell(){yi(this,g,new $i(wi(this,u),{x:0,y:0,width:qi.RECT_WIDTH,height:qi.RECT_HEIGHT,radius:qi.CELL_RADIUS}).setOrigin(.5).setFillStyle(16777215,1)),this.add(wi(this,g));const t=wi(this,u).add.text(0,0,wi(this,p),{fontFamily:"Pretendard-Bold",fontSize:qi.RECT_WIDTH/2.5,color:"#000000"}).setOrigin(.5);this.add(t);const i=wi(this,u).add.text(qi.RECT_WIDTH/2-qi.PADDING/2,-qi.RECT_HEIGHT/2+qi.PADDING/2,wi(this,f),{fontFamily:"Pretendard-Bold",fontSize:qi.RECT_WIDTH/7,color:"#929292"}).setOrigin(1,0);this.add(i);const e=wi(this,u).add.rectangle(0,0,qi.RECT_HEIGHT-qi.PADDING,qi.RECT_WIDTH-qi.PADDING,16711680).setOrigin(.5).setAlpha(0);e.name="hitbox",this.add(e),yi(this,x,new $i(wi(this,u),{x:0,y:qi.RECT_HEIGHT/4*1.5,width:qi.RECT_WIDTH,height:qi.RECT_HEIGHT/4,strokeColor:0,strokeWidth:0,alpha:0}).setOrigin(.5,.5).setFillStyle(1008845,1).setAlpha(0)),wi(this,x).setRadiusBR(qi.CELL_RADIUS),wi(this,x).setRadiusBL(qi.CELL_RADIUS),this.add(wi(this,x)),yi(this,y,wi(this,u).add.text(wi(this,x).x,wi(this,x).y,"",{fontFamily:"Pretendard-Medium",fontSize:"46px",color:"#ffffff"}).setOrigin(.5,.5)),this.add(wi(this,y)),ki(this,m,k).call(this)}select(){wi(this,g).setFillStyle(12776801,1),wi(this,u).tweens.add({targets:this,scaleX:1.05,scaleY:1.05,ease:"Elastic",duration:500,repeat:0,yoyo:!1})}deselect(){wi(this,g).setFillStyle(16777215,1),wi(this,u).tweens.add({targets:this,scaleX:1,scaleY:1,ease:"Linear",duration:500,repeat:0,yoyo:!1})}get letter(){return wi(this,p)}get point(){return wi(this,f)}get bonus(){return wi(this,w)}}u=new WeakMap,g=new WeakMap,p=new WeakMap,f=new WeakMap,w=new WeakMap,x=new WeakMap,y=new WeakMap,m=new WeakSet,k=function(){switch(wi(this,w)){case 0:break;case 1:wi(this,g).setStrokeStyle(6,1008845),wi(this,x).setFillStyle(1008845,1),wi(this,x).setAlpha(1),wi(this,y).setText("ㄱx2");break;case 2:wi(this,g).setStrokeStyle(6,1008845),wi(this,x).setFillStyle(1008845,1),wi(this,x).setAlpha(1),wi(this,y).setText("ㄱx3");break;case 3:wi(this,g).setStrokeStyle(6,13446714),wi(this,x).setFillStyle(13446714,1),wi(this,x).setAlpha(1),wi(this,y).setText("가x2");break;case 4:wi(this,g).setStrokeStyle(6,13446714),wi(this,x).setFillStyle(13446714,1),wi(this,x).setAlpha(1),wi(this,y).setText("가x3")}};class re{constructor(t,i,e,s,o,n,h=1){xi(this,G),xi(this,E),xi(this,I),xi(this,_),xi(this,z),xi(this,H),xi(this,Y),xi(this,X),xi(this,S,void 0),xi(this,T,void 0),xi(this,b,void 0),xi(this,O,void 0),xi(this,C,[]),xi(this,B,void 0),xi(this,P,void 0),xi(this,R,void 0),xi(this,W,[]),xi(this,D,null),xi(this,A,0),xi(this,v,["A3","B3","C3","D3","E3","F3","G3","A4","B4","C4","D4","E4","F4","G4","A5","B5"]),yi(this,S,t),yi(this,b,i),yi(this,O,e),yi(this,T,s),yi(this,B,h),yi(this,P,o),yi(this,R,n),ki(this,X,$).call(this),yi(this,D,wi(this,S).add.graphics({lineStyle:{width:10,color:12776801}}).setDepth(-1)),ki(this,G,M).call(this)}}S=new WeakMap,T=new WeakMap,b=new WeakMap,O=new WeakMap,C=new WeakMap,B=new WeakMap,P=new WeakMap,R=new WeakMap,W=new WeakMap,D=new WeakMap,A=new WeakMap,v=new WeakMap,G=new WeakSet,M=function(){wi(this,S).input.on("pointerdown",(t=>{ki(this,E,F).call(this,t)})),wi(this,S).input.on("pointermove",(t=>{t.isDown&&ki(this,E,F).call(this,t)})),wi(this,S).input.on("pointerup",(()=>{wi(this,W).length>1&&wi(this,S).events.emit("grid:resultInputFinished",{path:wi(this,W)}),ki(this,_,L).call(this)}))},E=new WeakSet,F=function(t){wi(this,C).forEach((i=>{if(i.getByName("hitbox").getBounds().contains(t.x,t.y)){const t=wi(this,W)[wi(this,W).length-1];t&&t.index===i.index||(wi(this,W).some((t=>t.index===i.index))?ki(this,I,N).call(this,i):t&&!ki(this,z,j).call(this,t.index,i.index)||(wi(this,W).push(i),i.select(),ki(this,H,V).call(this),wi(this,S).sound.playAudioSprite("tones",wi(this,v)[wi(this,A)]),yi(this,A,(wi(this,A)+1)%(wi(this,v).length+1)),console.log(wi(this,A))))}}))},I=new WeakSet,N=function(t){const i=wi(this,W).findIndex((i=>i.index===t.index));wi(this,W).slice(i+1).forEach((t=>{t.deselect(),yi(this,A,wi(this,A)-1),console.log(wi(this,A))})),yi(this,W,wi(this,W).slice(0,i+1)),ki(this,H,V).call(this)},_=new WeakSet,L=function(){wi(this,W).forEach((t=>t.deselect())),yi(this,W,[]),ki(this,H,V).call(this),yi(this,A,0)},z=new WeakSet,j=function(t,i){const e=t%4,s=Math.floor(t/4),o=i%4,n=Math.floor(i/4),h=Math.abs(e-o),r=Math.abs(s-n);return h<=1&&r<=1&&!(0===h&&0===r)},H=new WeakSet,V=function(){wi(this,D).clear();for(let t=0;t<wi(this,W).length-1;t++){const i=wi(this,W)[t].getByName("hitbox").getBounds(),e=wi(this,W)[t+1].getByName("hitbox").getBounds(),s=ki(this,Y,U).call(this,i,e),o=ki(this,Y,U).call(this,e,i);wi(this,D).moveTo(s.x,s.y),wi(this,D).lineTo(o.x,o.y)}wi(this,D).strokePath()},Y=new WeakSet,U=function(t,i){const e=Phaser.Math.Angle.Between(t.centerX,t.centerY,i.centerX,i.centerY);return{x:t.centerX+Math.cos(e)*(t.width/2),y:t.centerY+Math.sin(e)*(t.height/2)}},X=new WeakSet,$=function(){const t=qi.RECT_HEIGHT*wi(this,B)/5,i=qi.RECT_HEIGHT*wi(this,B);for(let e=0;e<4;e++)for(let s=0;s<4;s++){let o=wi(this,b)+s*(i+t),n=wi(this,O)+e*(i+t),h=wi(this,T)[e][s],r=4*e+s,a=new he(wi(this,S),o,n,h,wi(this,P)[h],wi(this,R)[e][s],r);a.setScale(wi(this,B)),wi(this,C).push(a)}};class ae extends Si.Scene{constructor(){super("Game2NewDesign"),this.lineGraphics=null,this.grid=[],this.bonuses=[],this.words=[],this.wordsCollection=[],this.foundWords=new Set,this.totalPointsTextAndShape=null,this.totalPoints=0,this.mostValuableWord=0,this.longestWord=0,this.lengthOfLongestWord=0,this.countdown=120,this.tones=["A3","B3","C3","D3","E3","F3","G3","A4","B4","C4","D4","E4","F4","G4","A5","B5"],this.isGridRandom=!0,this.letterPoints={"ㅇ":1,"ㄴ":1,"ㄱ":1,"ㄹ":1,"ㅅ":2,"ㅈ":2,"ㅎ":3,"ㄷ":3,"ㅂ":3,"ㅁ":3,"ㅊ":5,"ㅋ":8,"ㅍ":8,"ㄶ":8,"ㅄ":8,"ㅌ":10,"ㄺ":10,"ㄻ":10,"ㅒ":10,"ㅀ":10,"ㄵ":10,"ㄼ":10,"ㅏ":1,"ㅣ":1,"ㅡ":1,"ㅓ":2,"ㅗ":2,"ㅜ":3,"ㅕ":4,"ㅐ":4,"ㅔ":4,"ㅛ":8,"ㅑ":8,"ㅠ":8,"ㅖ":8}}init(t){this.isGridRandom=!0,0!=t.counter&&(this.isGridRandom=!1),this.preselectedGridNumber=t.counter}preload(){this.cache.json.remove("gridData");let t=0;console.log(this.isGridRandom),this.isGridRandom?(t=this.pickTodaysGrid(100),console.log("TodaysGrid: "+t)):t=this.preselectedGridNumber;const i=`grid_${t}.json`;this.load.json("gridData","assets/grids/"+i),this.countdown=120,this.foundWords=new Set,this.totalPoints=0,this.longestWord=0,this.lengthOfLongestWord=0}create(){this.events.once("shutdown",this.shutdown,this),this.sound.playAudioSprite("effects","RoundStart"),this.cameras.main.setBackgroundColor(1715258);const t=this.cache.json.get("gridData");this.grid=t.grid,this.bonuses=t.bonuses,this.words=t.words.map((t=>t.word)),this.wordsCollection=t.words.map((t=>({word:t.word,common:t.common,isFound:0})));const i=this.sys.game.config.width/2-qi.GRID_WIDTH/2,e=this.sys.game.config.height/2-qi.GRID_HEIGHT/2,s=2.5*qi.PADDING,o=qi.RECT_HEIGHT+qi.PADDING/2;this.resultPanel=new oe(this,this.sys.game.config.width/2,e-s-o/2);const n=new Qi(this,this.resultPanel.list[0].getBounds().x+qi.PADDING/2+qi.PADDING/3,this.resultPanel.list[0].getBounds().y-(qi.RECT_HEIGHT/3+qi.PADDING)+qi.PADDING/2);new se(this,n.getBounds().x+n.getBounds().width+qi.PADDING,n.y,this.countdown,(()=>{this.sound.playAudioSprite("effects","Cheers");const t=this.wordsCollection.reduce(((t,i)=>t+i.isFound),0);this.scene.start("GameOver",{foundWords:t,totalNumberOfWords:this.words.length,totalPoints:this.totalPoints,longestWord:this.longestWord,mostValuableWord:this.mostValuableWord,wordData:this.wordsCollection})})),this.totalPointsTextAndShape=new ie(this,this.resultPanel.list[0].getBounds().x+this.resultPanel.list[0].getBounds().width,this.resultPanel.list[0].getBounds().y-(qi.RECT_HEIGHT/3+qi.PADDING)+qi.PADDING/2),new re(this,i+qi.RECT_WIDTH/2,e+qi.RECT_HEIGHT/2,this.grid,this.letterPoints,this.bonuses),console.log("this.grid"+this.grid),this.events.on("grid:resultInputFinished",(({path:t})=>{const i=t.map((t=>t.letter)).join(""),e=Wi(i),s=ne.calculate(t);this.checkAndMarkWordAsFound(e)?this.handleFoundWord(e,s,i):this.handleInvalidWord(e)}))}updateResultTextAndWordPoints(t,i){this.resultPanel.setResultPoints(i),this.resultPanel.setResultText(t),i>=20?this.sound.playAudioSprite("effects","MediumPoints"):i>0&&this.sound.playAudioSprite("effects","LowPoints")}updateTotalPointsText(){this.totalPointsTextAndShape.setPoints(this.totalPoints)}checkAndMarkWordAsFound(t){const i=this.wordsCollection.find((i=>i.word===t));return!(!i||0!==i.isFound||(i.isFound=1,0))}handleFoundWord(t,i,e){this.totalPoints+=i,this.updateResultTextAndWordPoints(t,i),this.updateTotalPointsText(),console.log(`Match found: ${t}`),this.updateLongestWord(t,e.length),this.updateMostValuableWord(i)}updateLongestWord(t,i){(i>this.lengthOfLongestWord||i===this.lengthOfLongestWord&&t.length>this.longestWord.length)&&(this.longestWord=t,this.lengthOfLongestWord=i)}updateMostValuableWord(t){t>this.mostValuableWord&&(this.mostValuableWord=t)}handleInvalidWord(t){this.updateResultTextAndWordPoints(t,0),this.wordsCollection.some((i=>i.word===t))?this.sound.playAudioSprite("effects","RepeatedWord"):(this.sound.playAudioSprite("effects","NoWord"),this.resultPanel.runNoWordTween())}pickTodaysGrid(t){const i=new Date("2024-01-01");var e=new Date;const s=new Date(e);return s.setDate(e.getDate()+0),e=s,Math.floor((e-i)/864e5)%t+1}shutdown(){console.log("Shut down function ran!"),this.events.off("grid:resultInputFinished")}}const de=Object.freeze({SWIPE_THRESHOLD_FACTOR:.3,TRANSITION_DURATION:300,BORDER_COLOR:5269627,BACKGROUND_COLOR:1715258,BORDER_RADIUS:65,BORDER_WIDTH:4,SCROLL_BAR_WIDTH:10,SCROLL_BAR_COLOR:7442342,SCROLL_DEACCELERATION:1e3});class le{constructor(t,i){xi(this,yt),xi(this,kt),xi(this,Tt),xi(this,J,void 0),xi(this,Z,null),xi(this,K,void 0),xi(this,q,null),xi(this,Q,null),xi(this,tt,null),xi(this,it,0),xi(this,et,0),xi(this,st,0),xi(this,ot,null),xi(this,nt,0),xi(this,ht,0),xi(this,rt,0),xi(this,at,!1),xi(this,dt,0),xi(this,lt,0),xi(this,ct,0),xi(this,ut,0),xi(this,gt,0),xi(this,pt,(t=>{wi(this,Z).getBounds().contains(t.worldX,t.worldY)&&(0!=wi(this,nt)&&(yi(this,lt,wi(this,ot).y),yi(this,nt,0)),wi(this,Q).stop(),yi(this,at,!0),yi(this,dt,t.worldY),wi(this,Z).setInteractive(),yi(this,nt,0))})),xi(this,ft,(t=>{if(wi(this,at)){let e=t.worldY-wi(this,dt);wi(this,ot).y=wi(this,lt)+e;let s=wi(this,J).game.loop.delta,o=t.time;var i=t.worldY-wi(this,ht);o-wi(this,rt)<300?yi(this,nt,i/(s/1e3)):yi(this,nt,0),ki(this,Tt,bt).call(this),yi(this,ht,t.worldY),yi(this,rt,t.time)}})),xi(this,wt,(t=>{wi(this,at)&&(yi(this,at,!1),wi(this,Z).disableInteractive(),0==wi(this,nt)&&ki(this,yt,mt).call(this))})),xi(this,xt,((t,i,e,s,o)=>{wi(this,Z).getBounds().contains(t.worldX,t.worldY)&&(0!=wi(this,nt)&&(yi(this,lt,wi(this,ot).y),yi(this,nt,0)),wi(this,Q).stop(),wi(this,ot).y-=s,ki(this,Tt,bt).call(this),yi(this,lt,wi(this,ot).y),ki(this,kt,St).call(this),this.inactivityTimer&&this.inactivityTimer.remove(),this.inactivityTimer=wi(this,J).time.delayedCall(300,(()=>{ki(this,yt,mt).call(this)}),[],this))})),yi(this,J,t),yi(this,K,i)}createPopup(){const{x:t,y:i,width:e,height:s,container:o,backgroundColor:n=de.BACKGROUND_COLOR}=wi(this,K);yi(this,tt,new $i(wi(this,J),{x:t,y:i,width:e,height:s,radius:de.BORDER_RADIUS,strokeColor:de.BORDER_COLOR,strokeWidth:de.BORDER_WIDTH,color:n,alpha:1}).setOrigin(.5,.5)),wi(this,J).add.existing(wi(this,tt)),yi(this,ot,wi(this,J).add.container(t,i)),o.y=0,wi(this,ot).add(o),yi(this,et,wi(this,ot).list[0].list[0].getBounds().height),yi(this,st,wi(this,ot).list[0].getBounds().height-wi(this,et)),yi(this,lt,i);const h=t-e/2,r=i-s/2,a=new Phaser.Display.Masks.GeometryMask(wi(this,J),wi(this,J).add.graphics().fillRect(h,r+(de.BORDER_WIDTH/2+.5),e,s-(de.BORDER_WIDTH+1)));wi(this,ot).setMask(a),yi(this,Z,wi(this,J).add.zone(t-e/2,i-s/2,e,s).setOrigin(0,0)),yi(this,ct,Math.max(Math.min(s/(o.list.length+4)*5,100),20));const d=t+e/2-de.SCROLL_BAR_WIDTH/2-qi.PADDING;yi(this,ut,i-s/2+1*qi.PADDING),yi(this,gt,wi(this,K).height-2*qi.PADDING);const l=new $i(wi(this,J),{x:d,y:wi(this,ut),width:de.SCROLL_BAR_WIDTH,height:wi(this,gt),radius:5,color:2900821,alpha:1}).setOrigin(.5,0);wi(this,J).add.existing(l),yi(this,q,new $i(wi(this,J),{x:d,y:wi(this,ut),width:de.SCROLL_BAR_WIDTH,height:wi(this,ct),radius:5,color:de.SCROLL_BAR_COLOR,alpha:1}).setOrigin(.5,0)),wi(this,J).add.existing(wi(this,q)),wi(this,J).input.on("pointermove",wi(this,ft),this),wi(this,J).input.on("pointerdown",wi(this,pt),this),wi(this,J).input.on("pointerup",wi(this,wt),this),wi(this,J).input.on("wheel",wi(this,xt),this),ki(this,yt,mt).call(this)}updateScrollingVelocity(t){0!=wi(this,nt)&&0==wi(this,at)&&(Math.abs(wi(this,nt))>.1?(wi(this,nt)<0?(yi(this,nt,wi(this,nt)+de.SCROLL_DEACCELERATION*t/1e3),wi(this,nt)>0&&yi(this,nt,0)):(yi(this,nt,wi(this,nt)-de.SCROLL_DEACCELERATION*t/1e3),wi(this,nt)<0&&yi(this,nt,0)),wi(this,ot).y+=wi(this,nt)*t/1e3,ki(this,kt,St).call(this),ki(this,Tt,bt).call(this)):(yi(this,nt,0),ki(this,yt,mt).call(this)),0==wi(this,nt)&&ki(this,yt,mt).call(this))}close(){wi(this,J).input.off("pointerdown",wi(this,pt),this),wi(this,J).input.off("pointermove",wi(this,ft),this),wi(this,J).input.off("pointerup",wi(this,wt),this),wi(this,J).tweens.add({targets:wi(this,tt),alpha:0,duration:300,ease:"Power2"}),wi(this,J).tweens.add({targets:wi(this,ot),alpha:0,duration:300,ease:"Power2",onComplete:()=>{wi(this,tt).destroy(),wi(this,ot).destroy(),wi(this,Z).destroy(),wi(this,q)&&wi(this,q).destroy()}})}}J=new WeakMap,Z=new WeakMap,K=new WeakMap,q=new WeakMap,Q=new WeakMap,tt=new WeakMap,it=new WeakMap,et=new WeakMap,st=new WeakMap,ot=new WeakMap,nt=new WeakMap,ht=new WeakMap,rt=new WeakMap,at=new WeakMap,dt=new WeakMap,lt=new WeakMap,ct=new WeakMap,ut=new WeakMap,gt=new WeakMap,pt=new WeakMap,ft=new WeakMap,wt=new WeakMap,xt=new WeakMap,yt=new WeakSet,mt=function(){let t=wi(this,ot).list[0].list,i=1/0,e=null;if(t.forEach((t=>{let s=Math.abs(t.y+wi(this,ot).y-wi(this,K).y);s<i&&(i=s,e=t)})),e){const i=t.indexOf(e);console.log(`Snapped to child #${i+1} of ${t.length}`),yi(this,Q,wi(this,J).tweens.add({targets:wi(this,ot),y:wi(this,K).y-e.y,ease:"Power1",duration:de.TRANSITION_DURATION,onUpdate:()=>{yi(this,lt,wi(this,ot).y),ki(this,Tt,bt).call(this)},onComplete:()=>{yi(this,lt,wi(this,ot).y),console.log(`Successfully snapped to child #${i+1}`),yi(this,it,i)}}))}},kt=new WeakSet,St=function(){wi(this,ot).y>wi(this,K).y+2.5*wi(this,et)?(wi(this,ot).y=wi(this,K).y+2.5*wi(this,et),yi(this,nt,0)):wi(this,ot).y<wi(this,K).y-wi(this,st)-2.5*wi(this,et)&&(wi(this,ot).y=wi(this,K).y-wi(this,st)-2.5*wi(this,et),yi(this,nt,0))},Tt=new WeakSet,bt=function(){let t=wi(this,K).y-wi(this,ot).y;this.scrollRatio=t/wi(this,st),this.scrollRatio>1?this.scrollRatio=1:this.scrollRatio<0&&(this.scrollRatio=0),this.maxScrollBarDistance=wi(this,gt)-wi(this,ct),this.scrollBarMoveAmmount=this.scrollRatio*this.maxScrollBarDistance,wi(this,q).setY(wi(this,ut)+this.scrollBarMoveAmmount)};class ce extends Phaser.GameObjects.Container{constructor(t,i){super(t,i.x,i.y),xi(this,Ot),xi(this,Bt),t.add.existing(this),this.scene=t,this.config=i,this.currentPage=0,this.zone=null,this.createButton()}createButton(){const{x:t,y:i,width:e,height:s,borderRadius:o=50,backgroundColor:n=16777215,fontSize:h,onClick:r,buttonContainer:a}=this.config;a?(console.log("There is a container!"),this.add(a)):console.log("There is no container!"),this.x=t,this.y=i,this.width=e,this.height=s,this.backgroundColor=n,this.backgroundButtonTintColor=0,this.backgroundButtonShadowColor=0,this.buttonContainer=a,this.scaleAmount=.99,this.buttonBackgroundShadow=new $i(this.scene,{x:0-.01*e,y:0+.05*s,width:e,height:s,radius:o,color:this.backgroundButtonShadowColor,alpha:.75}).setOrigin(.5,.5),this.buttonBackgroundShadow.setScale(this.scaleAmount),this.add(this.buttonBackgroundShadow),this.buttonBackground=new $i(this.scene,{x:0,y:0,width:e,height:s,radius:o,color:n,alpha:1}).setOrigin(.5,.5),this.add(this.buttonBackground),this.buttonBackgroundDarkerTint=new $i(this.scene,{x:0,y:0,width:e,height:s,radius:o,color:this.backgroundButtonTintColor,alpha:0}).setOrigin(.5,.5),this.add(this.buttonBackgroundDarkerTint),this.bringToTop(this.buttonContainer),this.bringToTop(this.buttonBackgroundDarkerTint),this.buttonBackground.setInteractive({useHandCursor:!0}),this.buttonBackground.on("pointerdown",(()=>{this.isPressed=!0,ki(this,Ot,Ct).call(this)})),this.buttonBackground.on("pointerup",(()=>{this.isPressed&&(ki(this,Bt,Pt).call(this),r(),this.isPressed=!1)})),this.scene.input.on("pointerup",(t=>{this.isPressed&&(ki(this,Bt,Pt).call(this),this.buttonBackground.getBounds().contains(t.x,t.y)&&r(),this.isPressed=!1)}))}hideButton(){this.buttonBackground.setVisible(!1),this.buttonBackgroundShadow.setVisible(!1),this.buttonBackgroundDarkerTint.setVisible(!1)}showButton(){this.buttonBackground.setVisible(!0),this.buttonBackgroundShadow.setVisible(!0),this.buttonBackgroundDarkerTint.setVisible(!0)}grayOutButton(){this.buttonBackground.setFillStyle(this.backgroundColor,.3),this.buttonBackgroundShadow.setFillStyle(0,0)}resetButtonColor(){this.buttonBackground.setFillStyle(this.backgroundColor,1),this.buttonBackgroundShadow.setFillStyle(this.backgroundButtonShadowColor,.75)}}Ot=new WeakSet,Ct=function(){this.buttonContainer.setScale(this.scaleAmount),this.buttonContainer.x=this.buttonBackgroundShadow.x,this.buttonContainer.y=this.buttonBackgroundShadow.y,this.buttonBackground.setScale(this.scaleAmount),this.buttonBackground.x=this.buttonBackgroundShadow.x,this.buttonBackground.y=this.buttonBackgroundShadow.y,this.buttonBackgroundDarkerTint.setScale(this.scaleAmount),this.buttonBackgroundDarkerTint.x=this.buttonBackgroundShadow.x,this.buttonBackgroundDarkerTint.y=this.buttonBackgroundShadow.y,this.buttonBackgroundDarkerTint.setFillStyle(this.backgroundButtonTintColor,.5)},Bt=new WeakSet,Pt=function(){this.buttonContainer.setScale(1),this.buttonContainer.x=0,this.buttonContainer.y=0,this.buttonBackground.setScale(1),this.buttonBackground.x=0,this.buttonBackground.y=0,this.buttonBackgroundDarkerTint.setScale(1),this.buttonBackgroundDarkerTint.x=0,this.buttonBackgroundDarkerTint.y=0,this.buttonBackgroundDarkerTint.setFillStyle(this.backgroundButtonTintColor,0)};class ue extends Phaser.GameObjects.Container{constructor(t,i,e,s,o,n,h,r={},a=null){super(t),xi(this,zt),xi(this,Ht),xi(this,Rt,void 0),xi(this,Wt,void 0),xi(this,Dt,void 0),xi(this,At,void 0),xi(this,vt,void 0),xi(this,Gt,void 0),xi(this,Mt,void 0),xi(this,Et,void 0),xi(this,Ft,800),xi(this,It,800),xi(this,Nt,400),xi(this,_t,null),xi(this,Lt,void 0),yi(this,Rt,t),yi(this,Dt,i),yi(this,At,e),yi(this,vt,s),yi(this,Wt,h),yi(this,Gt,o),yi(this,Mt,n),yi(this,Et,r),yi(this,_t,a),ki(this,zt,jt).call(this)}}Rt=new WeakMap,Wt=new WeakMap,Dt=new WeakMap,At=new WeakMap,vt=new WeakMap,Gt=new WeakMap,Mt=new WeakMap,Et=new WeakMap,Ft=new WeakMap,It=new WeakMap,Nt=new WeakMap,_t=new WeakMap,Lt=new WeakMap,zt=new WeakSet,jt=function(){yi(this,Lt,wi(this,Rt).add.text(0,0,"예문 글",{fontSize:wi(this,Wt),fontFamily:"Pretendard-Bold",padding:{top:qi.PADDING,bottom:0,left:qi.PADDING,right:qi.PADDING}}).setAlpha(0)),wi(this,Gt).map(((t,i)=>wi(this,Rt).add.text(wi(this,Dt),wi(this,At)+wi(this,Lt).height*i,t,{fontSize:wi(this,Wt),fontFamily:"Pretendard-Bold",color:"#FFFFFF",padding:{top:qi.PADDING,bottom:0,left:qi.PADDING,right:qi.PADDING}}).setAlpha(0).setOrigin(0,0))).forEach(((t,i)=>{const e=wi(this,Mt)[i];wi(this,Rt).tweens.add({targets:t,alpha:1,y:{from:t.y-wi(this,Lt).height*i,to:t.y},duration:wi(this,Ft),delay:(wi(this,Ft)+wi(this,It))*i+wi(this,Nt),ease:"Power2",onComplete:()=>{ki(this,Ht,Vt).call(this,t,e,i),i===wi(this,Gt).length-1&&wi(this,_t)&&wi(this,_t).call(this)}})}))},Ht=new WeakSet,Vt=function(t,i,e){const s=wi(this,Et)[wi(this,Gt)[e]],o="number"==typeof i,n=wi(this,Rt).add.text(wi(this,vt),t.y,o?s?`${s.num1} of `:"":i,{fontSize:wi(this,Wt),fontFamily:"Pretendard-Bold",color:"#C2F561",padding:{top:qi.PADDING,bottom:0,left:qi.PADDING,right:qi.PADDING}}).setOrigin(1,0).setAlpha(0),h=wi(this,Rt).add.text(wi(this,vt),t.y,"",{fontSize:wi(this,Wt),fontFamily:"Pretendard-Bold",color:"#C2F561",padding:{top:qi.PADDING,bottom:0,left:qi.PADDING,right:qi.PADDING}}).setOrigin(1,0).setAlpha(0);wi(this,Rt).tweens.add({targets:n,duration:wi(this,It),alpha:1,ease:"Power2",onUpdate:(t,e)=>{if(o)if(s){e.setColor("#FFFFFF");const i=s.num2*t.getValue();e.text=`${s.num1} 증 ${Math.ceil(i)}`}else{const s=i*t.getValue();e.text=Math.ceil(s).toString()}}}),s&&wi(this,Rt).tweens.add({targets:h,duration:wi(this,It),alpha:1,ease:"Power2",onUpdate:function(t,i){const e=s.num2*t.getValue();i.text=`${Math.ceil(e)}`}})};class ge extends Si.Scene{constructor(){super("GameOver")}init(t){this.foundWords=t.foundWords,this.totalPoints=t.totalPoints,this.longestWord=t.longestWord,this.totalNumberOfWords=t.totalNumberOfWords,this.mostValuableWord=t.mostValuableWord,this.wordData=t.wordData,this.fontResolution=2,this.isDelayOver=!1,this.isCopyButtonPressed=!1,this.isCopyButtonPressedDown=!1,this.isPracticeGame=!1}create(){1==localStorage.getItem("playedOneRound")&&(this.saveLastPlayedDate(),this.savePlayerScore(),this.saveWordData()),this.wordData.forEach((t=>{1==t.isFound&&console.log(`Found Word: ${t.word}, Common: ${t.common}, Found: ${t.isFound}`)})),this.cameras.main.setBackgroundColor(1715258),this.cameras.main.setZoom(1),this.rectWidth=260,this.rectHeight=260,this.padding=this.rectWidth/5,this.pointOutlineWidth=65,this.gridWidth=4*this.rectWidth+3*this.padding,this.startX=this.sys.game.config.width/2-this.gridWidth/2,this.startY=this.rectHeight,this.resultFontSize="50px",this.resultTextFontColor="#FFFFFF",this.resultPointsFontColor="#C2F561",this.goBackToHomeScreenButtonColor=12776801,this.cornerRadius=65;let t="게임 종료";1!=localStorage.getItem("playedOneRound")&&(t="연습게임 종료",this.isPracticeGame=!0),this.add.text(this.sys.game.config.width/2,this.startY,t,{fontFamily:"Cafe24Moyamoya-Regular",fontSize:"150px",color:"#ffffff",padding:{top:this.padding,bottom:0,left:this.padding,right:this.padding}}).setOrigin(.5,.5),this.printGameResults(),this.blockerRect=this.add.rectangle(this.sys.game.config.width/2,this.resultsBackground.y+this.resultsBackground.height/2,this.gridWidth+200,this.sys.game.config.height/1.5,1715258,1).setOrigin(.5,0).setDepth(1),this.createCopyGameResultsButton();const i=this.add.container(0,0);this.popupScrollerYposition=this.cameras.main.height/2+this.gridWidth/2-this.padding,this.popupScrollerHeight=this.sys.game.config.height/4;const e=this.getCommonUnfoundWords();let s=0;this.scrollWordHeight=0,e.forEach(((t,e)=>{let o=this.add.text(0,s,t,{fontFamily:"Pretendard-Bold",fontSize:"75px",color:"#ffffff",padding:{top:this.padding/2,bottom:this.padding/2,left:this.padding,right:this.padding}});o.setOrigin(.5,.5),i.add(o),s+=o.height,this.scrollWordHeight=o.height})),this.popupScroller=new le(this,{x:this.cameras.main.width/2,y:this.popupScrollerYposition,width:this.gridWidth,height:this.popupScrollerHeight,container:i,backgroundColor:1715258}),this.add.text(this.sys.game.config.width/2,this.popupScrollerYposition-this.popupScrollerHeight/2,"찾지 못한 공통단어들을 확인해 보세요!",{fontFamily:"Pretendard-Medium",fontSize:"55px",color:this.resultTextFontColor,padding:{top:this.padding,bottom:this.padding,left:this.padding,right:this.padding}}).setOrigin(.5,1),this.popupScroller.createPopup();let o=this.gridWidth-4*this.padding;const n=this.popupScrollerHeight/4;this.add.image(this.cameras.main.width/2,this.popupScrollerYposition-n+2,"__WHITE").setDisplaySize(o,this.popupScrollerHeight/2).setAlpha(1,1,0,0).setTint(1715258),this.add.image(this.cameras.main.width/2,this.popupScrollerYposition+n-2,"__WHITE").setDisplaySize(o,this.popupScrollerHeight/2).setAlpha(0,0,1,1).setTint(1715258),this.createGoBackToHomeButton(),localStorage.setItem("playedOneRound",1)}update(t,i){this.popupScroller.updateScrollingVelocity(i)}createCopyGameResultsButton(){const t=this.add.text(0,0,"결과 복사",{backgroundColor:"#4a2a2d00",fontFamily:"Pretendard-Bold",fontSize:"56px",color:"#000000",padding:{top:this.padding,bottom:this.padding,left:this.padding,right:0}}).setOrigin(.5);let i=this.add.container(0,0);var e=100;this.copyBack=new $i(this,{x:e/6,y:0-e/6,width:e,height:e,radius:20,strokeColor:0,strokeWidth:16,alpha:1}).setOrigin(.5).setFillStyle(16777215,1),this.copyFront=new $i(this,{x:-100/6,y:e/6,width:e,height:e,radius:20,strokeColor:0,strokeWidth:16,alpha:1}).setOrigin(.5).setFillStyle(16777215,1),i.add([this.copyBack,this.copyFront]);const s=this.padding/3;i.setPosition(0-t.width/2-s,0).setScale(.5);const o=(i.getBounds().width/2+s)/2;i.setPosition(i.x+o,i.y),t.x=t.x+o;const n=.75*this.rectHeight,h=this.sys.game.config.width/2,r=this.resultsBackground.y+this.resultsBackground.height/2+n/2+this.padding,a=this.add.container(0,0);a.add(t),a.add(i),new ce(this,{x:h,y:r,width:this.gridWidth,height:n,backgroundColor:16777215,borderRadius:this.cornerRadius,buttonContainer:a,onClick:()=>this.copyToClipboard(t)})}createGoBackToHomeButton(){const t=this.add.text(0,0,"처음으로",{backgroundColor:"#4a2a2d00",fontFamily:"Pretendard-Bold",fontSize:"56px",color:"#000000",padding:{top:this.padding,bottom:this.padding,left:this.padding,right:0}}).setOrigin(.5),i=this.padding/3,e=this.add.image(0-t.width/2-i,0,"home");e.setScale(.15);const s=(e.displayWidth/2+i)/2;e.x=e.x+s,t.x=t.x+s;const o=.75*this.rectHeight,n=this.sys.game.config.width/2,h=this.popupScrollerYposition+this.popupScrollerHeight/2+o/2+this.padding,r=this.add.container(0,0);r.add(t),r.add(e),new ce(this,{x:n,y:h,width:this.gridWidth,height:o,backgroundColor:this.goBackToHomeScreenButtonColor,borderRadius:this.cornerRadius,buttonContainer:r,onClick:()=>this.scene.start("MainMenu")})}printGameResults(){const t=this.padding,i=this.add.text(0,0,"예문 글",{fontSize:this.resultFontSize,fontFamily:"Pretendard-Bold",padding:{top:t,bottom:0,left:t,right:t}}),e=i.height;i.destroy();const s=4*e+t;this.resultsBackground=new $i(this,{x:this.startX,y:.27*this.sys.game.config.height,width:this.gridWidth,height:s,radius:this.cornerRadius,strokeColor:0,strokeWidth:0,alpha:0}).setOrigin(0,.5).setFillStyle(2242375,1),this.add.existing(this.resultsBackground);const o=this.resultsBackground.y-this.resultsBackground.height/2,n=this.startX,h=this.resultsBackground.x+this.resultsBackground.width,r=[this.totalPoints,this.foundWords,this.mostValuableWord,this.longestWord],a={"찾은 단어수":{num1:this.totalNumberOfWords,num2:this.foundWords}};new ue(this,n,o,h,["총점","찾은 단어수","최고점 단어","최장 단어"],r,this.resultFontSize,a,(()=>{console.log("animation finished"),this.tweens.add({targets:this.blockerRect,alpha:0,duration:1e3,ease:"Power2",delay:500})}))}copyToClipboard(t){const i=new Date;let e=`${String(i.getMonth()+1)}월 ${String(i.getDate())}일`;this.isPracticeGame&&(e="연습 게임");const s=`연글 ${e}\n총점: ${this.totalPoints}\n찾은 단어수: ${this.totalNumberOfWords} 중 ${this.foundWords}\n최고점 단어: ${this.mostValuableWord}\n최장 단어: ${this.longestWord}\nhttps://ymer2k.github.io/yeongul`;if(navigator.clipboard)navigator.clipboard.writeText(s).then((()=>{console.log("Copied to clipboard successfully!"),this.showCopySuccess(t)}),(t=>{console.error("Could not copy text: ",t)}));else{const i=document.createElement("textarea");i.value=s,document.body.appendChild(i),i.focus(),i.select();try{document.execCommand("copy"),console.log("Copied to clipboard successfully!"),this.showCopySuccess(t)}catch(o){console.error("Could not copy text: ",o)}document.body.removeChild(i)}}showCopySuccess(t){t.setText("복사 완료!"),this.time.delayedCall(2e3,(()=>{t.setText("결과 복사")}),null,this)}saveLastPlayedDate(){let t=new Date,i=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;localStorage.setItem("lastPlayedDate",i)}savePlayerScore(){let t={foundWords:this.foundWords,totalPoints:this.totalPoints,longestWord:this.longestWord,totalNumberOfWords:this.totalNumberOfWords,mostValuableWord:this.mostValuableWord},i=JSON.stringify(t);localStorage.setItem("gameScore",i)}saveWordData(){localStorage.setItem("wordData",JSON.stringify(this.wordData))}getCommonUnfoundWords(){return this.wordData.filter((t=>1===t.common&&0===t.isFound)).map((t=>t.word))}}class pe{constructor(t,i,e,s,o,n,h){this.scene=t,this.gridSize=i,this.padding=e,this.startX=s,this.startY=o,this.cursorSizeFactor=n,this.easeSelection=h,this.grid=[],this.gridLetters=[["ㅅ","ㅏ","ㅎ","ㅣ"],["ㅛ","ㄱ","ㄹ","ㄹ"],["ㅇ","ㅗ","ㅏ","ㄴ"],["ㅂ","ㅜ","ㄱ","ㅇ"]],this.container=null}createAll(t,i,e=null){return this.container=e||this.scene.add.container(0,0),this.createGrid(t,i),this.createCursor(),this.createTimeline(),this.container}createGrid(t,i){let e=this.gridSize-this.padding;for(let s=0;s<t;s++){this.grid[s]=[];for(let t=0;t<i;t++){let i=this.scene.add.rectangle(this.startX+t*this.gridSize+this.padding/2,this.startY+s*this.gridSize+this.padding/2,e,e,16777215);i.setStrokeStyle(5,0);let o=this.gridLetters[s][t],n=this.scene.add.text(i.x,i.y,o,{fontSize:this.gridSize/1.5,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5);this.grid[s][t]={tile:i,text:n},this.container.add([i,n])}}}createCursor(){this.cursor=this.scene.add.triangle(this.startX+this.padding/2,this.startY+this.padding/2,75*this.cursorSizeFactor,50*this.cursorSizeFactor,110*this.cursorSizeFactor,35*this.cursorSizeFactor,74*this.cursorSizeFactor,0*this.cursorSizeFactor,14897478),this.cursor.setOrigin(2,0),this.container.add(this.cursor)}createTimeline(){this.timeline=this.scene.add.timeline([{at:500,tween:{targets:this.cursor,duration:0,onComplete:()=>{this.grid[0][0].tile.fillColor=65280}}},{at:1e3,tween:{targets:this.cursor,x:this.startX+this.gridSize+this.padding/2,duration:500,ease:this.easeSelection,onUpdate:()=>{this.grid[0][1].tile.fillColor=65280}}},{at:1500,tween:{targets:this.cursor,x:this.startX+2*this.gridSize+this.padding/2,y:this.startY+this.gridSize+this.padding/2,duration:500,ease:this.easeSelection,onUpdate:()=>{this.grid[1][2].tile.fillColor=65280}}},{at:2e3,tween:{targets:this.cursor,y:this.startY+2*this.gridSize+this.padding/2,duration:500,ease:this.easeSelection,onUpdate:()=>{this.grid[2][2].tile.fillColor=65280}}},{at:2500,tween:{targets:this.cursor,x:this.startX+3*this.gridSize+this.padding/2,y:this.startY+3*this.gridSize+this.padding/2,duration:500,ease:this.easeSelection,onUpdate:()=>{this.grid[3][3].tile.fillColor=65280},onComplete:()=>{this.scene.time.delayedCall(1e3,(()=>{this.resetGridColors(),this.resetCursorPosition(),this.timeline.play()}))}}}]),this.timeline.play()}resetGridColors(){this.grid.forEach((t=>{t.forEach((t=>{t.tile.fillColor=16777215}))}))}resetCursorPosition(){this.cursor.setPosition(this.startX+this.padding/2,this.startY+this.padding/2)}}const fe=Object.freeze({DOT_RADIUS:5,SWIPE_THRESHOLD_FACTOR:.33,TRANSITION_DURATION:300,BORDER_COLOR:0,BORDER_RADIUS:30,BORDER_WIDTH:4,DOT_INACTIVE_COLOR:11184810,DOT_ACTIVE_COLOR:0});class we{constructor(t,i){xi(this,ni),xi(this,ri),xi(this,Yt,0),xi(this,Ut,void 0),xi(this,Xt,null),xi(this,$t,void 0),xi(this,Jt,0),xi(this,Zt,[]),xi(this,Kt,!1),xi(this,qt,null),xi(this,Qt,null),xi(this,ti,!1),xi(this,ii,0),xi(this,ei,0),xi(this,si,(t=>{wi(this,Xt).getBounds().contains(t.worldX,t.worldY)&&(yi(this,ti,!0),yi(this,ii,t.x),console.log("#zone.on POINTER DOWN"),wi(this,Xt).setInteractive())})),xi(this,oi,(t=>{if(console.log("pointer UP in popupWindow."),wi(this,ti)){yi(this,ti,!1);let i=t.x-wi(this,ii);wi(this,Xt).disableInteractive(),console.log("#zone.on POINTER UP"),Math.abs(i)>wi(this,$t).width*fe.SWIPE_THRESHOLD_FACTOR&&(i>0&&wi(this,Yt)>0?mi(this,Yt)._--:i<0&&wi(this,Yt)<wi(this,Jt)-1&&mi(this,Yt)._++),ki(this,ri,ai).call(this),ki(this,ni,hi).call(this)}})),yi(this,Ut,t),yi(this,$t,i)}createPopup(){const{x:t,y:i,width:e,height:s,pageContainers:o,backgroundColor:n=16777215,isDraggingAllowed:h=!0}=wi(this,$t);yi(this,Jt,o.length),yi(this,Kt,h),yi(this,qt,new $i(wi(this,Ut),{x:t,y:i,width:e,height:s,radius:fe.BORDER_RADIUS,strokeColor:fe.BORDER_COLOR,strokeWidth:fe.BORDER_WIDTH,color:n,alpha:1}).setOrigin(.5,.5)),wi(this,Ut).add.existing(wi(this,qt)),yi(this,Qt,wi(this,Ut).add.container(t,i)),o.forEach(((t,i)=>{t.x=e*i,t.y=0,t.setAlpha(1),t.setVisible(!0),wi(this,Qt).add(t)}));for(let a=0;a<wi(this,Jt);a++){let e=wi(this,Ut).add.graphics();e.fillStyle(0===a?fe.DOT_ACTIVE_COLOR:fe.DOT_INACTIVE_COLOR,1),e.fillCircle(0,0,fe.DOT_RADIUS),e.x=t+100*(a-Math.floor(wi(this,Jt)/2)),e.y=i+s/3,wi(this,Zt).push(e)}yi(this,ti,!1),yi(this,ii,0),yi(this,ei,t);const r=new Phaser.Display.Masks.GeometryMask(wi(this,Ut),wi(this,Ut).add.graphics().fillRect(t-e/2,i-s/2,e,s));wi(this,Qt).setMask(r),yi(this,Xt,wi(this,Ut).add.zone(t-e/2,i-s/2,e,s).setOrigin(0,0)),wi(this,Xt).on("pointermove",(t=>{if(wi(this,ti)&&wi(this,Kt)){let i=t.x-wi(this,ii);wi(this,Qt).x=wi(this,ei)+i}})),wi(this,Ut).input.on("pointerdown",wi(this,si),this),wi(this,Ut).input.on("pointerup",wi(this,oi),this)}handleNextClick(){wi(this,Yt)<wi(this,Jt)-1&&(mi(this,Yt)._++,ki(this,ri,ai).call(this),ki(this,ni,hi).call(this))}close(){wi(this,Ut).input.off("pointerdown",wi(this,si),this),wi(this,Ut).input.off("pointerup",wi(this,oi),this),wi(this,Ut).tweens.add({targets:wi(this,qt),alpha:0,duration:300,ease:"Power2"}),wi(this,Ut).tweens.add({targets:wi(this,Qt),alpha:0,duration:300,ease:"Power2"}),wi(this,Ut).tweens.add({targets:wi(this,Zt),alpha:0,duration:300,ease:"Power2",onComplete:()=>{wi(this,qt).destroy(),wi(this,Qt).destroy(),wi(this,Zt).forEach((t=>t.destroy())),wi(this,Xt).destroy()}})}}Yt=new WeakMap,Ut=new WeakMap,Xt=new WeakMap,$t=new WeakMap,Jt=new WeakMap,Zt=new WeakMap,Kt=new WeakMap,qt=new WeakMap,Qt=new WeakMap,ti=new WeakMap,ii=new WeakMap,ei=new WeakMap,si=new WeakMap,oi=new WeakMap,ni=new WeakSet,hi=function(){wi(this,Ut).tweens.add({targets:wi(this,Qt),x:wi(this,$t).x-wi(this,$t).width*wi(this,Yt),ease:"Power1",duration:fe.TRANSITION_DURATION}),yi(this,ei,wi(this,$t).x-wi(this,$t).width*wi(this,Yt))},ri=new WeakSet,ai=function(){wi(this,Zt).forEach(((t,i)=>{t.clear(),t.fillStyle(i===wi(this,Yt)?fe.DOT_ACTIVE_COLOR:fe.DOT_INACTIVE_COLOR,1),t.fillCircle(0,0,fe.DOT_RADIUS)}))};class xe extends Phaser.GameObjects.Graphics{constructor(t,i,e,s=20,o=0,n=4,h=10,r=(()=>{}),a=!1){super(t),this.x=i,this.y=e,this.size=s,this.color=o,this.lineWidth=n,this.onClick=r,this.debug=a,this.interactivePadding=h,this.drawCross();const d=new Phaser.Geom.Rectangle(this.x-(this.size/2+this.interactivePadding),this.y-(this.size/2+this.interactivePadding),this.size+2*this.interactivePadding,this.size+2*this.interactivePadding);this.setInteractive(d,Phaser.Geom.Rectangle.Contains),this.on("pointerdown",(()=>{this.onClick()})),t.add.existing(this)}drawCross(){if(this.clear(),this.lineStyle(this.lineWidth,this.color),this.beginPath(),this.moveTo(this.x-this.size/2,this.y-this.size/2),this.lineTo(this.x+this.size/2,this.y+this.size/2),this.moveTo(this.x-this.size/2,this.y+this.size/2),this.lineTo(this.x+this.size/2,this.y-this.size/2),this.strokePath(),this.debug){this.lineStyle(2,16711680);const t=new Phaser.Geom.Rectangle(this.x-(this.size/2+this.interactivePadding),this.y-(this.size/2+this.interactivePadding),this.size+2*this.interactivePadding,this.size+2*this.interactivePadding);this.strokeRectShape(t)}}}class ye extends Phaser.GameObjects.Container{constructor(t,i){super(t,i.x,i.y),xi(this,di),xi(this,ci),t.add.existing(this),this.scene=t,this.config=i,this.currentPage=0,this.zone=null,this.createButton()}createButton(){const{x:t,y:i,width:e,height:s,borderRadius:o=50,backgroundColor:n=16777215,strokeColor:h=0,textColor:r=0,fontSize:a,onClick:d,text:l="버튼 텍스트"}=this.config;this.width=e,this.backgroundColor=n,this.backgroundButtonTintColor=0,this.backgroundButtonShadowColor=0,this.scaleAmount=.99,this.buttonBackgroundShadow=new $i(this.scene,{x:0-.01*e,y:0+.05*s,width:e,height:s,radius:o,color:this.backgroundButtonShadowColor,alpha:.5}).setOrigin(.5,.5),this.buttonBackgroundShadow.setScale(this.scaleAmount),this.add(this.buttonBackgroundShadow),this.buttonBackground=new $i(this.scene,{x:0,y:0,width:e,height:s,radius:o,color:n,alpha:1}).setOrigin(.5,.5),this.add(this.buttonBackground),this.buttonBackgroundDarkerTint=new $i(this.scene,{x:0,y:0,width:e,height:s,radius:o,color:this.backgroundButtonTintColor,alpha:0}).setOrigin(.5,.5),this.add(this.buttonBackgroundDarkerTint),this.buttonText=this.scene.add.text(0,0,l,{fontFamily:"Pretendard-Bold",fontSize:a,color:"#000000",stroke:"#000000",align:"center"}).setOrigin(.5),this.add(this.buttonText),this.buttonBackground.setInteractive({useHandCursor:!0}),this.buttonBackground.on("pointerdown",(()=>{this.isPressed=!0,ki(this,di,li).call(this)})),this.buttonBackground.on("pointerup",(()=>{this.isPressed&&(ki(this,ci,ui).call(this),d(),this.isPressed=!1)})),this.scene.input.on("pointerup",(t=>{this.isPressed&&(ki(this,ci,ui).call(this),this.buttonBackground.getBounds().contains(t.x,t.y)&&d(),this.isPressed=!1)}))}hideButton(){this.buttonBackground.setVisible(!1),this.buttonBackgroundShadow.setVisible(!1),this.buttonBackgroundDarkerTint.setVisible(!1),this.buttonText.setVisible(!1)}showButton(){this.buttonBackground.setVisible(!0),this.buttonBackgroundShadow.setVisible(!0),this.buttonBackgroundDarkerTint.setVisible(!0),this.buttonText.setVisible(!0)}grayOutButton(){this.buttonBackground.setFillStyle(this.backgroundColor,.3),this.buttonBackgroundShadow.setFillStyle(0,0),this.buttonText.setAlpha(.3)}resetButtonColor(){this.buttonBackground.setFillStyle(this.backgroundColor,1),this.buttonBackgroundShadow.setFillStyle(this.backgroundButtonShadowColor,.75),this.buttonText.setAlpha(1)}}di=new WeakSet,li=function(){this.buttonText.setScale(this.scaleAmount),this.buttonText.x=this.buttonBackgroundShadow.x,this.buttonText.y=this.buttonBackgroundShadow.y,this.buttonBackground.setScale(this.scaleAmount),this.buttonBackground.x=this.buttonBackgroundShadow.x,this.buttonBackground.y=this.buttonBackgroundShadow.y,this.buttonBackgroundDarkerTint.setScale(this.scaleAmount),this.buttonBackgroundDarkerTint.x=this.buttonBackgroundShadow.x,this.buttonBackgroundDarkerTint.y=this.buttonBackgroundShadow.y,this.buttonBackgroundDarkerTint.setFillStyle(this.backgroundButtonTintColor,.5)},ci=new WeakSet,ui=function(){this.buttonText.setScale(1),this.buttonText.x=0,this.buttonText.y=0,this.buttonBackground.setScale(1),this.buttonBackground.x=0,this.buttonBackground.y=0,this.buttonBackgroundDarkerTint.setScale(1),this.buttonBackgroundDarkerTint.x=0,this.buttonBackgroundDarkerTint.y=0,this.buttonBackgroundDarkerTint.setFillStyle(this.backgroundButtonTintColor,0)};class me extends Si.Scene{constructor(){super("MainMenu"),this.helpTextVisible=!1,this.infoTextVisible=!1,this.clickCounter=0,this.isAbleToplayUnlimitedRounds=!1,this.zone=0}create(){this.sceneSounds={startScene:"RoundStart"},this.cameras.main.setZoom(1),this.cameras.main.setBackgroundColor(1715258),this.setBackground("background"),this.drawEmailAddress(),this.startX=this.scale.width/2;const t=this.scale.height/4,i=180,e=this.add.graphics();e.lineStyle(10,16711935,1),e.beginPath();const s=this.sys.game.config.width,o=this.sys.game.config.height/4,n=Math.PI,h=(s-0)/100;e.moveTo(0,o);for(let p=0;p<=100;p++){const t=0+p*h,i=o+200*Math.sin(1*Phaser.Math.DegToRad(360)*(p/100)+n);e.lineTo(t,i)}e.strokePath();const r=this.add.graphics();r.fillGradientStyle(16724530,1529343,16724530,1529343,1),r.fillRect(0,0,this.sys.game.config.width,this.sys.game.config.height/2);const a=e.createGeometryMask();r.setMask(a),this.add.text(this.startX,t,"연글",{fontFamily:"Cafe24Moyamoya-Regular",fontSize:277,color:"#ffffff",stroke:"#1A2C3A",align:"center"}).setOrigin(.5).setStroke("#1A2C3A",42);const d=t+800;new ye(this,{x:this.startX,y:d,width:800,height:i,borderRadius:50,backgroundColor:16777215,textColor:0,fontSize:70,text:"게임 방법",onClick:()=>this.showHelpText(this.startX,d-100)}),this.startButtonY=d+240;const l=new ye(this,{x:this.startX,y:this.startButtonY,width:800,height:i,borderRadius:50,backgroundColor:12776801,textColor:0,fontSize:70,text:"게임 시작",onClick:()=>this.startButtonFunctionality()}),c=this.startButtonY+240,u=new ye(this,{x:this.startX,y:c,width:800,height:i,borderRadius:50,backgroundColor:16777215,textColor:0,fontSize:70,text:"오늘의 점수 보기",onClick:()=>this.scoreButtonFunctionality()});u.hideButton(),this.canPlayNewRound()||(l.grayOutButton(),u.showButton()),this.input.on("pointerdown",(t=>{this.hideInfoText(t)}));const g=this.sys.game.config.height;this.hiddenButton=this.add.rectangle(this.scale.width-50,g-90,100,i,16711680,0).setOrigin(.5).setInteractive(),this.hiddenButton.on("pointerdown",(()=>{this.clickCounter++,console.log("Counter:",this.clickCounter),this.clickCounter>=10&&(this.isAbleToplayUnlimitedRounds=1)})),this.hiddenButtonAdventureMode=this.add.rectangle(50,g-90,100,i,16711680,0).setOrigin(.5).setInteractive(),this.hiddenButtonAdventureMode.on("pointerdown",(()=>{this.scene.start("AdventureMode",{counter:1})}))}scoreButtonFunctionality(){if(0==this.helpTextVisible&&0==this.infoTextVisible){let h=localStorage.getItem("gameScore");if(h){let n=JSON.parse(h);var t=n.foundWords,i=n.totalPoints,e=n.longestWord,s=n.totalNumberOfWords,o=n.mostValuableWord}let r=localStorage.getItem("wordData");if(r)var n=JSON.parse(r);this.scene.start("GameOver",{foundWords:t,totalNumberOfWords:s,totalPoints:i,longestWord:e,mostValuableWord:o,wordData:n})}}startButtonFunctionality(){if(0==this.helpTextVisible&&0==this.infoTextVisible)if(this.canPlayNewRound())if(null==localStorage.getItem("playedOneRound")){this.helpTextVisible=!0;const t=this.add.container(0,0).setAlpha(0),i=this.add.graphics();i.fillStyle(11532970,1),i.fillCircle(0,200,50),t.add(i);const e="연글을 처음 플레이하시나요?\n\n본 게임에 들어가기 전에 게임 방법을 보고\n연습 게임을 해보시길 권장드립니다.";let s=this.add.text(0,-200,e,{fontSize:this.scale.width/30,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5);t.add(s);const o=new we(this,{x:this.scale.width/2,y:this.scale.height/2,width:.9*this.scale.width,height:.3*this.scale.height,pageContainers:[t],backgroundColor:16777215,isDraggingAllowed:!1}),n=(t,i,e)=>{const s=this.add.text(t,i,e,{fontFamily:"Arial",fontSize:"56px",color:"#ffffff",align:"center",backgroundColor:"#2d2d2d"}).setPadding(32).setOrigin(.5);return s.setInteractive({useHandCursor:!0}),s.on("pointerover",(()=>{s.setBackgroundColor("#8d8d8d")})),s.on("pointerout",(()=>{s.setBackgroundColor("#2d2d2d")})),s},h=n(.9*-this.scale.width/3,200,"게임 방법"),r=n(0,200,"연습 게임"),a=n(.9*this.scale.width/3,200,"오늘의 게임");h.on("pointerdown",(()=>{o.close(),this.helpTextVisible=!1,this.showHelpText()})),r.on("pointerdown",(()=>{o.close(),this.helpTextVisible=!1,this.scene.start("Game2NewDesign",{counter:1})})),a.on("pointerdown",(()=>{o.close(),this.helpTextVisible=!1,localStorage.setItem("playedOneRound",1),this.scene.start("Game2NewDesign",{counter:this.clickCounter})})),t.add(h),t.add(r),t.add(a);const d=new xe(this,.9*this.scale.width/4.5,.3*-this.scale.height/4.6,this.scale.width/50,0,6,40,(()=>{console.log("Cross clicked! Closing..."),o.close(),this.helpTextVisible=!1}),!1);t.add(d),o.createPopup()}else this.scene.start("Game2NewDesign",{counter:this.clickCounter});else this.showInfoText(this.startX,this.startButtonY+100)}showHelpText(t,i){if(0==this.helpTextVisible){const t=this.add.container(0,0).setAlpha(0),i=this.add.container(0,0).setAlpha(0),e=this.add.container(0,0).setAlpha(0);new pe(this,this.scale.width/10,this.scale.width/100,-this.scale.width/10*4/2+this.scale.width/10/2-this.scale.width/100/2,.25*-this.scale.height,this.scale.width/100/8,"Linear").createAll(4,4,t);let s=this.add.text(0,-this.scale.height/2+.15*this.scale.height,"게임 방법",{fontSize:100,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5);t.add(s);let o=this.add.text(0,-this.scale.height/2+.475*this.scale.height,"연글은 빠르게 진행되는 단어 찾기 게임입니다!\n인접한 글자들을 연결하여 단어를 찾습니다.\n\n모든 플레이어는 매일 같은 글자 그리드를 받으니,\n친구들과 가족과 점수를 비교해 보세요!",{fontSize:50,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5);t.add(o);const n=(t,i,e)=>{const s=this.add.text(t,i,e,{fontFamily:"Arial",fontSize:"56px",color:"#ffffff",align:"center",fixedWidth:260,backgroundColor:"#2d2d2d"}).setPadding(32).setOrigin(.5);return s.setInteractive({useHandCursor:!0}),s.on("pointerover",(()=>{s.setBackgroundColor("#8d8d8d")})),s.on("pointerout",(()=>{s.setBackgroundColor("#2d2d2d")})),s};let h="글자마다 점수가 있으며, 단어를 만들면\n해당 점수를 얻습니다.";this.createGrid(i,!1,null,h);let r=[["더블 글자 점수","트리플 글자 점수"],["더블 단어 점수","트리플 단어 점수"]],a="일부 글자에는 보너스가 있습니다.\n이 보너스는 추가 점수를 줍니다.";this.createGrid(e,!0,r,a);const d=new we(this,{x:this.scale.width/2,y:this.scale.height/2,width:.9*this.scale.width,height:.9*this.scale.height,pageContainers:[t,i,e],backgroundColor:16777215,isDragginAllowed:!0}),l=n(0,300,"다음"),c=n(0,300,"다음"),u=n(0,300,"완료");l.on("pointerdown",(()=>d.handleNextClick())),c.on("pointerdown",(()=>d.handleNextClick())),u.on("pointerdown",(()=>{d.close(),this.helpTextVisible=!1})),t.add(l),i.add(c),e.add(u),d.createPopup()}this.helpTextVisible=!0}createGrid(t,i=!0,e=[],s=""){let o=this.scale.width/6,n=o/1,h=(-o-n)/2,r=.6*-this.scale.width;for(let a=0;a<2;a++)for(let s=0;s<2;s++){let d=this.add.rectangle(h+s*(o+n),r+a*(o+n),o,o,16777215);d.setStrokeStyle(5,0);let l="ㄱ",c=this.add.text(d.x,d.y,l,{fontSize:o/1.5,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5),u=[["1","5"],["3","1"]],g=this.add.text(d.x+o/2.5,d.y-o/2.5,u[a][s],{fontSize:o/6,color:"#000000",fontFamily:"Arial"}).setOrigin(1,0);if(t.add(d),t.add(c),t.add(g),i){let i=[[1,2],[3,4]][a][s],n="",h=new $i(this,{x:d.x,y:d.y+o/2-o/8,width:o,height:o/4,strokeColor:0,strokeWidth:0,alpha:1}).setOrigin(.5,.5).setFillStyle(1008845,1);if(h.setAlpha(1),i){switch(i){case 1:h.setFillStyle(9286651,1),n="ㄱx2";break;case 2:h.setFillStyle(9286651,1),n="ㄱx3";break;case 3:h.setFillStyle(15697028,1),n="가x2";break;case 4:h.setFillStyle(15697028,1),n="가x3"}t.add(h);let r=this.add.text(h.x,h.y,n,{fontSize:o/6,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5);t.add(r);let l=e[a][s],c=this.add.text(d.x,d.y+o/1.25,l,{fontSize:o/5,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5);t.add(c)}}}if(s){let i=this.add.text(0,0,s,{fontSize:this.scale.width/30,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5);t.add(i)}}hideHelpText(t){this.helpTextVisible&&(this.helpBackground.getBounds().contains(t.x,t.y)||(this.helpBackground.destroy(),this.helpText.destroy(),this.helpTextVisible=!1))}showInfoText(t,i){if(0==this.infoTextVisible){const e=this.calculateHoursLeft(),s=`내일 또 단어를 찾아보세요! (${e} 시간 뒤)`;console.log("Hours left:",e),this.infoBackground=this.add.rectangle(t,i,900,700,0).setOrigin(.5),this.infoText=this.add.text(t,i,s,{fontFamily:"Arial",fontSize:50,color:"#ffffff",align:"center"}).setOrigin(.5),this.children.bringToTop(this.infoBackground),this.children.bringToTop(this.infoText)}this.infoTextVisible=!0}hideInfoText(t){this.infoTextVisible&&(this.infoBackground.getBounds().contains(t.x,t.y)||(this.infoBackground.destroy(),this.infoText.destroy(),this.infoTextVisible=!1))}canPlayNewRound(){let t=localStorage.getItem("lastPlayedDate"),i=new Date,e=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`;return console.log("lastPlayedDate:",t),console.log("today:",e),null===t||t!==e||this.isAbleToplayUnlimitedRounds}calculateHoursLeft(){const t=new Date,i=new Date(t);return i.setHours(24,0,0,0),Math.max(0,Math.floor((i-t)/1e3/60/60))+1}drawEmailAddress(){const t=this.scale.width/2,i=.85*this.sys.game.config.height;this.add.dom(t,i,"div",{"background-color":"transparent",color:"#CCCCCC","text-align":"center",width:"520px",height:"300px",font:"32px Arial","font-weight":"bold"},"의견 및 문의:\n yeongulgame@gmail.com").setOrigin(.5,0)}}class ke extends Si.Scene{constructor(){super("Preloader")}init(){this.setBackground("background"),this.cameras.main.setBackgroundColor(68719476735),this.cameras.main.setZoom(2),this.add.rectangle(this.sys.game.config.width/2,this.sys.game.config.height/2,468,32).setStrokeStyle(1,0);const t=this.add.rectangle(this.sys.game.config.width/2-230,this.sys.game.config.height/2,4,28,0);this.load.on("progress",(i=>{t.width=4+460*i}))}preload(){this.load.setPath("assets"),this.load.image("home","home.png"),this.load.audioSprite("tones","../assets/audio/audioTones.json",["../assets/audio/Xylophone.ogg","../assets/audio/Xylophone.mp3"]),this.load.audioSprite("effects","../assets/audio/audioEffects.json",["../assets/audio/AllEffectSounds.ogg","../assets/audio/AllEffectSounds.mp3"]),this.load.script("webfont","https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js")}create(){this.scene.start("MainMenu")}}Phaser.GameObjects.Text,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakSet,new WeakSet;class Se extends Si.Scene{constructor(){super("Test"),this.isDragging=!1,this.startDragX=0}preload(){}create(){this.cameras.main.setZoom(1),this.cameras.main.setBackgroundColor(4294638335);const t=this.sys.game.config.width/2,i=this.sys.game.config.height/2,e=this.add.text(0,0,"예문 글",{fontSize:50,fontFamily:"Pretendard-Bold",padding:{top:qi.PADDING,bottom:0,left:qi.PADDING,right:qi.PADDING}}),s=t-500,o=i,n=["score1","score2","score3","score4","score5"],h=[100,200,300,400,500],r={score3:{num1:523,num2:100}},a=[];for(let d=0;d<n.length;d++)a.push(this.add.text(s,o+e.height*d,n[d],{fontSize:50,fontStyle:"bold",color:"#000000"}));a.forEach(((t,i)=>{t.setAlpha(0);const s=h[i];this.tweens.add({targets:t,alpha:1,y:{from:t.y-e.height*i,to:t.y},duration:1e3,delay:1800*i+1e3,ease:"Power2",onComplete:()=>{const e=r[n[i]];if(e){const i=this.add.text(t.x+600,t.y,`${e.num1} of `,{fontSize:50,fontStyle:"bold",color:"#000000"}).setOrigin(1,.5);i.setAlpha(0),this.tweens.add({targets:i,duration:800,alpha:1,ease:"Power2",onUpdate:(t,i)=>{const s=e.num2*t.getValue();i.text=`${e.num1} of ${Math.ceil(s)}`}})}else{const i=this.add.text(t.x+600,t.y,"",{fontSize:50,fontStyle:"bold",color:"#000000"}).setOrigin(1,.5);i.setAlpha(0),this.tweens.add({targets:i,alpha:1,duration:800,ease:"Power2",onUpdate:(t,i)=>{const e=s*t.getValue();i.text=Math.ceil(e).toString()}})}}})}))}}class Te extends Si.Scene{constructor(){super("AdventureMode"),this.isMouseDown=!1,this.path=[],this.lineGraphics=null,this.grid=[],this.bonuses=[],this.words=[],this.wordsCommonFound=[],this.foundWords=new Set,this.timerText=null,this.resultText=null,this.resultPointsText=null,this.totalPointsText=null,this.targetPointsText=null,this.wordBackgroundOuter=null,this.totalPoints=0,this.mostValuableWord=0,this.longestWord=0,this.lengthOfLongestWord=0,this.countdown=120,this.rectHeight=260,this.rectWidth=this.rectHeight,this.padding=this.rectWidth/5,this.tones=["A3","B3","C3","D3","E3","F3","G3","A4","B4","C4","D4","E4","F4","G4","A5","B5"],this.currentToneIndex=0,this.fontResolution=2,this.isGridRandom=!0,this.isRunOnce=!1,this.letterPoints={"ㅇ":1,"ㄴ":1,"ㄱ":1,"ㄹ":1,"ㅅ":2,"ㅈ":2,"ㅎ":3,"ㄷ":3,"ㅂ":3,"ㅁ":3,"ㅊ":5,"ㅋ":8,"ㅍ":8,"ㄶ":8,"ㅄ":8,"ㅌ":10,"ㄺ":10,"ㄻ":10,"ㅒ":10,"ㅀ":10,"ㄵ":10,"ㄼ":10,"ㅏ":1,"ㅣ":1,"ㅡ":1,"ㅓ":2,"ㅗ":2,"ㅜ":3,"ㅕ":4,"ㅐ":4,"ㅔ":4,"ㅛ":8,"ㅑ":8,"ㅠ":8,"ㅖ":8}}init(t){this.isGridRandom=!0,0!=t.counter&&(this.isGridRandom=!1),this.preselectedGridNumber=t.counter}preload(){console.log("Welcome to Adventure Mode!"),this.cache.json.remove("gridData");let t=0;console.log(this.isGridRandom),this.isGridRandom?(t=this.pickTodaysGrid(100),console.log("TodaysGrid: "+t)):t=this.preselectedGridNumber;const i=`grid_${t}.json`;this.load.json("gridData","assets/grids/"+i),this.countdown=1,this.foundWords=new Set,this.totalPoints=0,this.longestWord=0,this.lengthOfLongestWord=0,this.path=[],this.targetPoints=0,this.targetPointsList=[300,450,600,800,1200,1600],this.currentRound=0,this.targetPoints=this.targetPointsList[this.currentRound],this.isGameOver=!1}create(){this.sound.playAudioSprite("effects","RoundStart"),this.cameras.main.setBackgroundColor(1715258);const t=this.cache.json.get("gridData");this.grid=t.grid,this.bonuses=t.bonuses,this.words=t.words.map((t=>t.word)),this.wordsCommonFound=t.words,this.wordsCommonFound.forEach((t=>{t.isFound=0}));const i=52;this.gridWidth=1196;const e=this.sys.game.config.width/2-this.gridWidth/2,s=this.sys.game.config.height/2-this.gridWidth/2;this.gridWidth,this.gridWidth,this.resultWordFontSize=104,this.rectangles=[],this.wordBackgroundOuter=new $i(this,{x:this.sys.game.config.width/2-this.gridWidth/2,y:s-234-182,width:this.gridWidth,height:286,radius:45,strokeColor:0,strokeWidth:0,alpha:0}).setOrigin(0,0).setFillStyle(1008845,1),this.add.existing(this.wordBackgroundOuter),this.wordPointsBackground=new $i(this,{x:this.sys.game.config.width/2,y:s-234-182,width:this.rectWidth,height:this.rectHeight/3.5,radius:50,strokeColor:0,strokeWidth:0,alpha:0}).setOrigin(.5,.5).setFillStyle(16777215,1),this.add.existing(this.wordPointsBackground),this.wordPointsBackground.setAlpha(0);let o=new $i(this,{x:this.wordBackgroundOuter.x+this.padding/3,y:this.wordBackgroundOuter.y-138.66666666666669,width:i,height:i,radius:2,strokeColor:1715258,strokeWidth:2,color:void 0,alpha:0}).setOrigin(0,0);this.add.existing(o),this.drawTimerShape(),this.timerText=this.add.text(o.x+o.width+i,0,this.formatTime(this.countdown),{fontSize:75,fontFamily:"Pretendard-Bold",color:"#ffffff"}).setOrigin(0,0);let n=o.getBounds(),h=this.timerText.getBounds();this.timerText.y=n.y+n.height/2-h.height/2,this.totalPointsText=this.add.text(0,this.timerText.y,this.totalPoints.toString().padStart(4,"9"),{fontSize:75,fontFamily:"Pretendard-Bold",color:"#ffffff",align:"right"}).setOrigin(1,0),console.log("TotalPointsTextWidth: "+this.totalPointsText.getBounds().width),this.totalPointsText.x=this.wordBackgroundOuter.x+this.wordBackgroundOuter.width;let r=new $i(this,{x:this.totalPointsText.x-104-this.totalPointsText.getBounds().width,y:this.wordBackgroundOuter.y-138.66666666666669,width:i,height:i,radius:2,strokeColor:1715258,strokeWidth:2,color:void 0,alpha:0}).setOrigin(0,0);this.add.existing(r),this.drawPointShape();const a=this.totalPointsText.x-2*this.padding-this.totalPointsText.getBounds().width+this.padding/2,d=this.wordBackgroundOuter.y-(this.rectHeight/3+2*this.padding);this.add.circle(a,d-this.padding,40,0).setStrokeStyle(15,16777215),this.add.circle(a,d-this.padding,15,0).setStrokeStyle(15,16777215),this.targetPointsText=this.add.text(0,d,this.targetPoints.toString().padStart(4,"9"),{fontSize:75,fontFamily:"Pretendard-Bold",color:"#ffffff",align:"right"}).setOrigin(1,1),this.targetPointsText.x=this.wordBackgroundOuter.x+this.wordBackgroundOuter.width,this.totalPointsText.setText("0"),this.targetPointsText.setText(this.targetPoints),console.log("this.grid"+this.grid);for(let c=0;c<4;c++)for(let t=0;t<4;t++){let i=e+312*t,o=s+312*c,n=this.grid[c][t],h=this.letterPoints[n]||0,r=this.bonuses[c][t],a=this.add.rectangle(i+26,o+26,208,208,16711680).setOrigin(0,0);a.setAlpha(0);let d=new $i(this,{x:i+130,y:o+130,width:260,height:260,radius:45,strokeColor:0,strokeWidth:0,color:void 0,alpha:0}).setOrigin(.5,.5).setFillStyle(16777215,1);this.add.existing(d),this.add.text(i+130,o+130,n,{fontFamily:"Pretendard-Bold",fontSize:104,color:"#000000"}).setOrigin(.5,.5),this.add.text(i+260-26,o+26,h,{fontFamily:"Pretendard-Bold",fontSize:260/7,color:"#929292"}).setOrigin(1,0);var l=new $i(this,{x:i+130,y:o+130+65+32.5+10.4,width:260,height:65,strokeColor:0,strokeWidth:0,alpha:1}).setOrigin(.5,.5).setFillStyle(1008845,1);l.setRadiusBR(45),l.setRadiusBL(45),l.setAlpha(0),this.add.existing(l);let u="";if(r){switch(r){case 1:d.setStrokeStyle(6,1008845),l.setFillStyle(1008845,1),l.setAlpha(1),u="ㄱx2";break;case 2:d.setStrokeStyle(6,1008845),l.setFillStyle(1008845,1),l.setAlpha(1),u="ㄱx3";break;case 3:d.setStrokeStyle(6,13446714),l.setFillStyle(13446714,1),l.setAlpha(1),u="가x2";break;case 4:d.setStrokeStyle(6,13446714),l.setFillStyle(13446714,1),l.setAlpha(1),u="가x3"}this.add.text(l.x,l.y,u,{fontFamily:"Pretendard-Medium",fontSize:"46px",color:"#ffffff"}).setOrigin(.5,.5).setResolution(this.fontResolution)}this.rectangles.push({rect:a,roundRect:d,bonusRect:l,letter:n,points:h,bonus:r,index:4*c+t,gridX:t,gridY:c})}this.lineGraphics=this.add.graphics({lineStyle:{width:5,color:255}}).setDepth(-1),this.gameOverLogic(),this.input.on("pointerdown",(t=>{this.isMouseDown=!0,this.path=[],this.lineGraphics.clear(),this.checkPointerOverRect(t,this.rectangles)})),this.input.on("pointermove",(t=>{this.isMouseDown&&this.checkPointerOverRect(t,this.rectangles)})),this.input.on("pointerup",(()=>{if(this.isMouseDown=!1,this.path.length>1){const t=this.path.map((t=>t.letter)).join("");let i=this.path.reduce(((t,i)=>t+(this.letterPoints[i.letter]||0)),0);const e=Wi(t);console.log(e);let s=1;if(this.path.forEach((t=>{switch(t.bonus){case 1:i+=this.letterPoints[t.letter]||0;break;case 2:i+=2*(this.letterPoints[t.letter]||0);break;case 3:s*=2;break;case 4:s*=3}})),i*=s,this.checkAndMarkWordAsFound(e))this.totalPoints+=i,this.updateResultTextAndWordPoints(e,i),this.updateTotalPointsText(),console.log(`Match found: ${e}`),t.length>this.lengthOfLongestWord&&(this.longestWord=e,this.lengthOfLongestWord=t.length),i>this.mostValuableWord&&(this.mostValuableWord=i);else if(i=0,this.updateResultTextAndWordPoints(e,i),console.log(`No match found for: ${e}`),this.wordsCommonFound.some((t=>t.word===e)))this.sound.playAudioSprite("effects","RepeatedWord");else{this.sound.playAudioSprite("effects","NoWord");let t=this.resultText.x;this.tweens.add({targets:this.resultText,x:{from:t-20,to:t+20},ease:"Linear",duration:100,yoyo:!0,repeat:2,onComplete:()=>{this.resultText.x=t}})}}this.resetRectangles(this.rectangles),this.resetGridRoundRectangle(this.rectangles),this.path=[],this.lineGraphics.clear()})),this.resultText=this.add.text(this.wordBackgroundOuter.x+this.wordBackgroundOuter.width/2,this.wordBackgroundOuter.y+this.wordBackgroundOuter.height/2,"",{fontFamily:"Pretendard-Bold",fontSize:this.resultWordFontSize,color:"#ffffff",padding:{top:i,bottom:i}}).setOrigin(.5,.5),this.resultPointsText=this.add.text(this.sys.game.config.width/2,this.wordBackgroundOuter.y,"",{fontFamily:"Pretendard-Medium",fontSize:"64px",color:"#CD2E3A"}).setOrigin(.5,.5),this.time.addEvent({delay:1e3,callback:this.updateTimer,callbackScope:this,loop:!0}),this.hiddenAt=null,document.addEventListener("visibilitychange",(()=>{if(document.hidden)this.hiddenAt=Date.now();else if(this.hiddenAt){const t=(Date.now()-this.hiddenAt)/1e3;this.countdown=Math.max(0,this.countdown-Math.floor(t)),this.hiddenAt=null}}))}checkPointerOverRect(t,i){const e=t.worldX,s=t.worldY;i.forEach((t=>{if(Phaser.Geom.Rectangle.Contains(t.rect.getBounds(),e,s)){const i=this.path[this.path.length-1];if(!i||i.index!==t.index)if(this.path.some((i=>i.index===t.index))){const i=this.path.findIndex((i=>i.index===t.index));this.path.slice(i+1).forEach((t=>{t.roundRect.setFillStyle(16777215,1),this.shrinkCell(t.roundRect,t.bonusRect),this.currentToneIndex=this.currentToneIndex-1,console.log(this.currentToneIndex)})),this.path=this.path.slice(0,i+1),this.drawLines()}else i&&!this.areNeighbors(i,t)||(this.path.push(t),t.roundRect.setFillStyle(12776801,1),this.growCell(t.roundRect,t.bonusRect),this.sound.playAudioSprite("tones",this.tones[this.currentToneIndex]),this.currentToneIndex=(this.currentToneIndex+1)%(this.tones.length+1),console.log(this.currentToneIndex),this.drawLines())}}))}areNeighbors(t,i){const e=Math.abs(t.gridX-i.gridX),s=Math.abs(t.gridY-i.gridY);return e<=1&&s<=1&&!(0===e&&0===s)}resetRectangles(t){t.forEach((t=>{t.rect.setFillStyle(16711680)}))}resetGridRoundRectangle(t){t.forEach((t=>{t.roundRect.setFillStyle(16777215,1),this.shrinkCell(t.roundRect,t.bonusRect),this.currentToneIndex=0}))}drawLines(){this.lineGraphics.clear(),this.lineGraphics.lineStyle(10,12776801);for(let t=0;t<this.path.length-1;t++){const i=this.path[t].rect.getBounds(),e=this.path[t+1].rect.getBounds(),s=this.getEdgePoint(i,e),o=this.getEdgePoint(e,i);this.lineGraphics.moveTo(s.x,s.y),this.lineGraphics.lineTo(o.x,o.y)}this.lineGraphics.strokePath()}getEdgePoint(t,i){const e=Phaser.Math.Angle.Between(t.centerX,t.centerY,i.centerX,i.centerY);return{x:t.centerX+Math.cos(e)*(t.width/2),y:t.centerY+Math.sin(e)*(t.height/2)}}updateResultTextAndWordPoints(t,i){this.resultText.setFontSize(this.resultWordFontSize),this.resultText.setText(t).setResolution(this.fontResolution),this.resultText.width>=this.wordBackgroundOuter.width-2*this.padding&&this.resultText.setFontSize(this.resultWordFontSize/2),i?(this.resultPointsText.setText(`+${i}`).setResolution(this.fontResolution),this.wordPointsBackground.setAlpha(1),i>=20?this.sound.playAudioSprite("effects","MediumPoints"):this.sound.playAudioSprite("effects","LowPoints")):(this.resultPointsText.setText(""),this.wordPointsBackground.setAlpha(0))}updateTotalPointsText(){this.totalPointsText.setText(this.totalPoints).setResolution(this.fontResolution)}updateTimer(){this.countdown>0?(this.countdown--,this.timerText.setText(this.formatTime(this.countdown)),5==this.countdown&&this.sound.playAudioSprite("effects","TickTock")):(this.timerText.setText("00:00"),this.wordsCommonFound.reduce(((t,i)=>t+i.isFound),0),this.isGameOver=!0)}formatTime(t){const i=Math.floor(t/60),e=t%60;return`${this.pad(i)}:${this.pad(e)}`}pad(t){return t.toString().padStart(2,"0")}shrinkCell(t,i){this.tweens.add({targets:[t,i],scaleX:1,scaleY:1,ease:"Linear",duration:500,repeat:0,yoyo:!1})}growCell(t,i){this.tweens.add({targets:[t,i],scaleX:1.05,scaleY:1.05,ease:"Elastic",duration:500,repeat:0,yoyo:!1})}getDateSeed(){const t=new Date;return 1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()}seededRandom(t){const i=1e4*Math.sin(t);return i-Math.floor(i)}formatDate(t){let i=new Date(t),e=""+(i.getMonth()+1),s=""+i.getDate(),o=i.getFullYear();return e.length<2&&(e="0"+e),s.length<2&&(s="0"+s),[o,e,s].join("-")}checkAndMarkWordAsFound(t){const i=this.wordsCommonFound.find((i=>i.word===t));return!(!i||0!==i.isFound||(i.isFound=1,0))}drawTimerShape(){let t=this.add.container(0,0),i=this.add.graphics();i.fillStyle(16777215,1),i.fillCircle(0,0,100);let e=this.add.graphics();e.fillStyle(1715258,1),e.fillRect(-10,-60,20,65);let s=this.add.rectangle(60,-60,25,60,16777215).setOrigin(.5,.5);s.rotation=.785398;let o=this.add.rectangle(0,-125,70,25,16777215).setOrigin(.5,.5);t.add([i,e,s,o]),t.setPosition(this.wordBackgroundOuter.x+this.padding/2+this.padding/3,this.wordBackgroundOuter.y-(this.rectHeight/3+this.padding)+this.padding/2),t.setScale(.35)}drawPointShape(){let t=this.add.container(this.totalPointsText.x-2*this.padding-this.totalPointsText.getBounds().width+this.padding/2,this.wordBackgroundOuter.y-(this.rectHeight/3+this.padding)+this.padding/2),i=this.add.graphics();i.fillStyle(16777215,1),i.fillCircle(0,0,100);let e=this.add.graphics();e.lineStyle(4,65280,0),e.fillStyle(1715258,1),e.beginPath(),e.moveTo(0,-60),e.lineTo(17,-17),e.lineTo(60,-17),e.lineTo(26,9),e.lineTo(39,52),e.lineTo(0,26),e.lineTo(-39,52),e.lineTo(-26,9),e.lineTo(-60,-17),e.lineTo(-17,-17),e.closePath(),e.strokePath(),e.fillPath(),t.add([i,e]),t.setScale(.4)}pickTodaysGrid(t){const i=new Date("2024-01-01");var e=new Date;const s=new Date(e);return s.setDate(e.getDate()+0),e=s,Math.floor((e-i)/864e5)%t+1}gameOverLogic(){console.log("GameOverLogic"),this.gameOverContainer=this.add.container(0,0).setVisible(!1),this.gameOverPopUpWindow=new we(this,{x:this.scale.width/2,y:this.scale.height/2,width:.9*this.scale.width,height:.3*this.scale.height,pageContainers:[this.gameOverContainer],backgroundColor:16777215,isDraggingAllowed:!1});const t=this.add.text(0,200,"Game Over!",{fontSize:"64px",fontFamily:"Pretendard-Bold",color:"#ff0000"}).setOrigin(.5,.5);t.on("pointerdown",(()=>{console.log("Text pressed")})),this.gameOverContainer.add(t);let i=this.add.rectangle(0,0,200,200,16711680).setOrigin(.5,.5);this.gameOverContainer.add(i)}update(t){this.isGameOver&&(this.gameOverContainer.x=100*Math.sin(t/1e3),this.isRunOnce||(console.log("only print this once."),this.gameOverPopUpWindow.createPopup(),this.isRunOnce=!0))}}class be extends Phaser.Plugins.BasePlugin{init(){this.game.events.once("ready",(()=>{this.game.scene.scenes.forEach((t=>{this.setupEventListeners(t)}))}))}setupEventListeners(t){t.events.on("OutOfTime",(i=>{console.log("myNumber:",i),t.sceneSounds&&t.sceneSounds.startScene&&t.sound.playAudioSprite("effects",t.sceneSounds.startScene)}))}}const Oe={type:Phaser.AUTO,width:1318.4,height:2745,parent:"game-container",backgroundColor:"#028af8",dom:{createContainer:!0},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[Ti,ke,me,Ki,ge,Se,ae,Te],fps:{target:60,forceSetTimeOut:!0},plugins:{global:[{key:"globalAudio",plugin:be,start:!0}]},autoFocus:!0,visibilityChangePause:!1};new Phaser.Game(Oe);
