var t,i,e,s,o,n,r,h,a=Object.defineProperty,d=(t,i,e)=>(((t,i,e)=>{i in t?a(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e})(t,"symbol"!=typeof i?i+"":i,e),e),l=(t,i,e)=>{if(i.has(t))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(t):i.set(t,e)},c=(t,i,e)=>(((t,i,e)=>{if(!i.has(t))throw TypeError("Cannot access private method")})(t,i),e);import{p as u}from"./phaser-C2_wa_Fb.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver((t=>{for(const e of t)if("childList"===e.type)for(const t of e.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&i(t)})).observe(document,{childList:!0,subtree:!0})}function i(t){if(t.ep)return;t.ep=!0;const i=function(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?i.credentials="include":"anonymous"===t.crossOrigin?i.credentials="omit":i.credentials="same-origin",i}(t);fetch(t.href,i)}}(),Phaser.Scene.prototype.setBackground=function(t){const i=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,t).setOrigin(.5,.5),e=this.cameras.main.width/i.width,s=this.cameras.main.height/i.height,o=Math.max(e,s);i.setScale(1.6*o),i.setPosition(this.cameras.main.width/2,this.cameras.main.height/2)};class g extends u.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/background.png")}create(){this.scene.start("Preloader")}}const p=new Set("ㅂㅃㅈㅉㄷㄸㄱㄲㅅㅆㅁㄴㅇㄹㅎㅋㅌㅊㅍ"),f=new Set("ㅛㅕㅑㅐㅒㅔㅖㅗㅓㅏㅣㅠㅜㅡ"),w="ㄱㄲㄴㄷㄸㄹㅁㅂㅃㅅㅆㅇㅈㅉㅊㅋㅌㅍㅎ",y="ㄱㄲㄳㄴㄵㄶㄷㄹㄺㄻㄼㄽㄾㄿㅀㅁㅂㅄㅅㅆㅇㅈㅊㅋㅌㅍㅎ",m=class t{constructor(t=null,i=null,e=null,s=null){this.choseong=t,this.jungseong=i,this.jongseong1=e,this.jongseong2=s}addChoseong(t){console.assert(p.has(t)),console.assert(null===this.choseong),this.choseong=t}canCombineJungseong(i){return this.jungseong in t.COMBINE_JUNGSEONG&&i in t.COMBINE_JUNGSEONG[this.jungseong]}addJungseong(i){console.assert(f.has(i)),null===this.jungseong?this.jungseong=i:this.canCombineJungseong(i)?this.jungseong=t.COMBINE_JUNGSEONG[this.jungseong][i]:console.assert(!1)}canCombineJongseong(i){return this.jongseong1 in t.COMBINE_JONGSEONG&&i in t.COMBINE_JONGSEONG[this.jongseong1]}addJongseong(t){console.assert(p.has(t)),null===this.jongseong1?this.jongseong1=t:this.canCombineJongseong(t)?this.jongseong2=t:console.assert(!1)}join(){let t=0;const i=["","ㄱ","ㅅ"],e=["","ㅈ","ㅎ"],s=["","ㄱ","ㅁ","ㅂ","ㅅ","ㅌ","ㅍ","ㅎ"],o=["","ㅅ"],n=["","ㅅ"];if(null===this.choseong&&null!==this.jungseong&&null===this.jongseong1&&null===this.jongseong2)return this.jungseong;if(null!==this.choseong&&null===this.jungseong&&null===this.jongseong1&&null===this.jongseong2)return this.choseong;if(null!==this.choseong&&null!==this.jungseong&&null===this.jongseong1&&null===this.jongseong2)t=44032+588*w.indexOf(this.choseong)+28*(this.jungseong.charCodeAt(0)-12623)+0;else if(null!==this.choseong&&null!==this.jungseong&&null!==this.jongseong1&&null===this.jongseong2){let i=y.indexOf(this.jongseong1)+1;t=44032+588*w.indexOf(this.choseong)+28*(this.jungseong.charCodeAt(0)-12623)+i}else{if(null===this.choseong||null===this.jungseong||null===this.jongseong1||null===this.jongseong2)return"";{let r=y.indexOf(this.jongseong1)+1,h=0;"ㄱ"===this.jongseong1?h=i.indexOf(this.jongseong2):"ㄴ"===this.jongseong1?h=e.indexOf(this.jongseong2):"ㄹ"===this.jongseong1?h=s.indexOf(this.jongseong2):"ㅂ"===this.jongseong1?h=o.indexOf(this.jongseong2):"ㅅ"===this.jongseong1?h=n.indexOf(this.jongseong2):console.assert(!1),t=44032+588*w.indexOf(this.choseong)+28*(this.jungseong.charCodeAt(0)-12623)+r+h}}return String.fromCharCode(t)}};d(m,"COMBINE_JUNGSEONG",{"ㅗ":{"ㅏ":"ㅘ","ㅐ":"ㅙ","ㅣ":"ㅚ"},"ㅜ":{"ㅓ":"ㅝ","ㅔ":"ㅞ","ㅣ":"ㅟ"},"ㅡ":{"ㅣ":"ㅢ"}}),d(m,"COMBINE_JONGSEONG",{"ㄱ":{"ㅅ":"ㄳ"},"ㄴ":{"ㅈ":"ㄵ","ㅎ":"ㄶ"},"ㄹ":{"ㄱ":"ㄺ","ㅁ":"ㄻ","ㅂ":"ㄼ","ㅅ":"ㄽ","ㅌ":"ㄾ","ㅍ":"ㄿ","ㅎ":"ㅀ"},"ㅂ":{"ㅅ":"ㅄ"}});let x=m;const k=t=>{let i="START",e=new x,s="";for(const o of t)if(p.has(o)||f.has(o)||(s+=e.join(),e=new x,s+=o,i="START"),"START"===i)p.has(o)?(e.addChoseong(o),i="CHOSEONG"):f.has(o)&&(e.addJungseong(o),i="JUNGSEONG1");else if("CHOSEONG"===i)p.has(o)?(s+=e.join(),e=new x(o),i="CHOSEONG"):f.has(o)&&(e.addJungseong(o),i="JUNGSEONG1");else if("JUNGSEONG1"===i)p.has(o)?null!==e.choseong&&y.includes(o)?(e.addJongseong(o),i="JONGSEONG1"):(s+=e.join(),e=new x(o),i="CHOSEONG"):f.has(o)&&(e.canCombineJungseong(o)?(e.addJungseong(o),i="JUNGSEONG2"):(s+=e.join(),e=new x(null,o),i="JUNGSEONG1"));else if("JUNGSEONG2"===i)p.has(o)?null!==e.choseong&&y.includes(o)?(e.addJongseong(o),i="JONGSEONG1"):(s+=e.join(),e=new x(o),i="CHOSEONG"):f.has(o)&&(s+=e.join(),e=new x(null,o),i="JUNGSEONG1");else if("JONGSEONG1"===i){if(p.has(o))e.canCombineJongseong(o)?(e.addJongseong(o),i="JONGSEONG2"):(s+=e.join(),e=new x(o),i="CHOSEONG");else if(f.has(o)){let t=e.jongseong1;e.jongseong1=null,s+=e.join(),e=new x(t,o),i="JUNGSEONG1"}}else if("JONGSEONG2"===i){if(p.has(o))s+=e.join(),e=new x(o),i="CHOSEONG";else if(f.has(o)){let t=e.jongseong2;e.jongseong2=null,s+=e.join(),e=new x(t,o),i="JUNGSEONG1"}}else console.assert(!1);return s+=e.join(),s};var S=Phaser.Renderer.WebGL.Utils,b=Phaser.Renderer.WebGL.Utils;const C=Phaser.GameObjects.GetCalcMatrix,B=Phaser.Renderer.Canvas.SetTransform,T={renderWebGL:function(t,i,e,s){i.dirty&&(i.updateData(),i.dirty=!1),e.addToRenderList(i);var o=t.pipelines.set(i.pipeline),n=C(i,e,s),r=o.calcMatrix.copyFrom(n.calc),h=i._displayOriginX,a=i._displayOriginY,d=e.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&function(t,i,e,s,o,n){for(var r=S.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*s),h=e.pathData,a=e.pathIndexes,d=0;d<a.length;d+=3){var l=2*a[d],c=2*a[d+1],u=2*a[d+2],g=h[l+0]-o,p=h[l+1]-n,f=h[c+0]-o,w=h[c+1]-n,y=h[u+0]-o,m=h[u+1]-n,x=i.getX(g,p),k=i.getY(g,p),b=i.getX(f,w),C=i.getY(f,w),B=i.getX(y,m),T=i.getY(y,m);t.batchTri(e,x,k,b,C,B,T,0,0,1,1,r,r,r,2)}}(o,r,i,d,h,a),i.isStroked&&function(t,i,e,s,o){var n=t.strokeTint,r=b.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*e);n.TL=r,n.TR=r,n.BL=r,n.BR=r;var h=i.pathData,a=h.length-1,d=i.lineWidth,l=d/2,c=h[0]-s,u=h[1]-o;i.closePath||(a-=2);for(var g=2;g<a;g+=2){var p=h[g]-s,f=h[g+1]-o;t.batchLine(c,u,p,f,l,l,d,g-2,!!i.closePath&&g===a-1),c=p,u=f}}(o,i,d,h,a),t.pipelines.postBatch(i)},renderCanvas:function(t,i,e,s){i.dirty&&(i.updateData(),i.dirty=!1),e.addToRenderList(i);var o=t.currentContext;if(B(t,o,i,e,s)){var n=i._displayOriginX,r=i._displayOriginY,h=i.pathData,a=h.length-1,d=h[0]-n,l=h[1]-r;o.beginPath(),o.moveTo(d,l),i.closePath||(a-=2);for(var c=2;c<a;c+=2){var u=h[c]-n,g=h[c+1]-r;o.lineTo(u,g)}o.closePath(),i.isFilled&&(function(t,i,e,s){var o=i.fillColor,n=i.fillAlpha,r=(16711680&o)>>>16,h=(65280&o)>>>8,a=255&o;t.fillStyle="rgba("+r+","+h+","+a+","+n+")"}(o,i),o.fill()),i.isStroked&&(function(t,i,e,s){var o=i.strokeColor,n=i.strokeAlpha,r=(16711680&o)>>>16,h=(65280&o)>>>8,a=255&o;t.strokeStyle="rgba("+r+","+h+","+a+","+n+")",t.lineWidth=i.lineWidth}(o,i),o.stroke()),o.restore()}}},P=Phaser.GameObjects.Shape;class O extends P{get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.isFilled=null!=t&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this._fillAlpha=t,this.isFilled=t>0&&null!=this._fillColor}setFillStyle(t,i){return void 0===i&&(i=1),this.fillColor=t,this.fillAlpha=i,this}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.isStroked=null!=t&&this._strokeAlpha>0&&this._lineWidth>0}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this._strokeAlpha=t,this.isStroked=t>0&&null!=this._strokeColor&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.isStroked=t>0&&null!=this._strokeColor}setStrokeStyle(t,i,e){return void 0===e&&(e=1),this.lineWidth=t,this.strokeColor=i,this.strokeAlpha=e,this}updateData(){return this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,i){var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=t,e.hitArea.height=i),this}resize(t,i){return this.setSize(t,i),this}}Object.assign(O.prototype,T);const R=Phaser.Utils.Objects.GetValue;let F=class{constructor(t,i,e,s,o){void 0===t&&(t=0),void 0===i&&(i=t),void 0===e&&(e=0),void 0===s&&(s=0),void 0===o&&(o=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,i,e,s,o)}setTo(t,i,e,s,o){return this.setPosition(t,i),this.setRadius(o),this.setSize(e,s),this}setPosition(t,i){return this.x=t,this.y=i,this}setRadius(t){return void 0===t&&(t=0),this.radius=t,this}setSize(t,i){return this.width=t,this.height=i,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){null==t&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){null==t&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var i,e;"number"==typeof t?(i=t,e=t):(i=R(t,"x",0),e=R(t,"y",0));var s=this.cornerRadius;s.tl=v(R(t,"tl",void 0),i,e),s.tr=v(R(t,"tr",void 0),i,e),s.bl=v(R(t,"bl",void 0),i,e),s.br=v(R(t,"br",void 0),i,e)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){W(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){W(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){W(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){W(this.cornerRadius.br,t)}};var v=function(t,i,e){return void 0===t?t={x:i,y:e}:"number"==typeof t&&(t={x:t,y:t}),D(t),t},W=function(t,i){"number"==typeof i?(t.x=i,t.y=i):(t.x=R(i,"x",0),t.y=R(i,"y",0)),D(t)},D=function(t){t.convex=t.x>=0||t.y>=0,t.x=Math.abs(t.x),t.y=Math.abs(t.y)},A=function(t,i,e){var s=e.length;if(s>=2){var o=e[s-2],n=e[s-1];if(t===o&&i===n)return e}return e.push(t,i),e};const G=Phaser.Math.DegToRad;var z=function(t,i,e,s,o,n,r,h,a){r&&n>o?n-=360:!r&&n<o&&(n+=360);var d=G(n-o)/h;o=G(o);for(var l=0;l<=h;l++){var c=o+d*l,u=t+e*Math.cos(c),g=i+s*Math.sin(c);A(u,g,a)}return a};const E=Phaser.Utils.Objects.IsPlainObject,M=Phaser.Utils.Objects.GetValue,j=Phaser.Geom.Polygon.Earcut;class N extends O{constructor(t,i,e,s,o,n,r,h){var a,d,l,c;if(E(i)){var u=i;i=u.x,e=u.y,s=u.width,o=u.height,n=u.radius,r=u.color,h=u.alpha,a=u.strokeColor,d=u.strokeAlpha,l=u.strokeWidth,c=u.shape}void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=1),void 0===o&&(o=s),void 0===n&&(n=0),void 0===c&&(c=0);var g=new F;if(super(t,"rexRoundRectangleShape",g),this.setShapeType(c),0===this.shapeType){var p=M(n,"radius",n);g.setTo(0,0,s,o,p)}else p={x:s/2,y:o/2},g.setTo(0,0,s,o,p);var f=M(n,"iteration",void 0);this.setIteration(f),this.setPosition(i,e),this.setFillStyle(r,h),void 0!==a&&void 0===l&&(l=2),this.setStrokeStyle(l,a,d),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,i=this.pathData;i.length=0;var e,s=t.width,o=t.height,n=t.cornerRadius,r=this.iteration+1;if(e=n.tl,I(e))if(e.convex){var h=e.x,a=e.y;z(h,a,e.x,e.y,180,270,!1,r,i)}else z(h=0,a=0,e.x,e.y,90,0,!0,r,i);else A(0,0,i);return e=n.tr,I(e)?e.convex?(h=s-e.x,a=e.y,z(h,a,e.x,e.y,270,360,!1,r,i)):z(h=s,a=0,e.x,e.y,180,90,!0,r,i):A(s,0,i),e=n.br,I(e)?e.convex?(h=s-e.x,a=o-e.y,z(h,a,e.x,e.y,0,90,!1,r,i)):z(h=s,a=o,e.x,e.y,270,180,!0,r,i):A(s,o,i),e=n.bl,I(e)?e.convex?(h=e.x,a=o-e.y,z(h,a,e.x,e.y,90,180,!1,r,i)):z(h=0,a=o,e.x,e.y,360,270,!0,r,i):A(0,o,i),i.push(i[0],i[1]),this.pathIndexes=j(i),this}setShapeType(t){return"string"==typeof t&&(t=V[t]),this.shapeType=t,this}setSize(t,i){return void 0===i&&(i=t),this.geom.width===t&&this.geom.height===i||(this.geom.setSize(t,i),1===this.shapeType&&this.setRadius({x:t/2,y:i/2}),this.updateDisplayOrigin(),this.dirty=!0,super.setSize(t,i)),this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return void 0===t&&(t=0),this.radius=t,this}setRadiusTL(t){return void 0===t&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return void 0===t&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return void 0===t&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return void 0===t&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){void 0!==this._iteration?this._iteration!==t&&(this._iteration=t,this.dirty=!0):this._iteration=t}setIteration(t){return void 0===t&&(t=6),this.iteration=t,this}}var I=function(t){return t.x>0&&t.y>0};const V={rectangle:0,circle:1};class Y extends u.Scene{constructor(){super("Game"),this.isMouseDown=!1,this.path=[],this.graphics=null,this.grid=[],this.bonuses=[],this.words=[],this.wordsCommonFound=[],this.foundWords=new Set,this.timerText=null,this.resultText=null,this.wordBackgroundInner=null,this.resultPointsText=null,this.totalPointsText=null,this.wordBackgroundOuter=null,this.wordPointsBackgroundEllipse=null,this.wordPointsBackgroundEllipseGraphicObject=null,this.totalPoints=0,this.mostValuableWord=0,this.longestWord=0,this.lengthOfLongestWord=0,this.countdown=120,this.padding=10,this.tones=["A3","B3","C3","D3","E3","F3","G3","A4","B4","C4","D4","E4","F4","G4","A5","B5"],this.currentToneIndex=0,this.fontResolution=2,this.isGridRandom=!0,this.letterPoints={"ㅇ":1,"ㄴ":1,"ㄱ":1,"ㄹ":1,"ㅅ":2,"ㅈ":2,"ㅎ":3,"ㄷ":3,"ㅂ":3,"ㅁ":3,"ㅊ":5,"ㅋ":8,"ㅍ":8,"ㄶ":8,"ㅄ":8,"ㅌ":10,"ㄺ":10,"ㄻ":10,"ㅒ":10,"ㅀ":10,"ㄵ":10,"ㄼ":10,"ㅏ":1,"ㅣ":1,"ㅡ":1,"ㅓ":2,"ㅗ":2,"ㅜ":3,"ㅕ":4,"ㅐ":4,"ㅔ":4,"ㅛ":8,"ㅑ":8,"ㅠ":8,"ㅖ":8}}init(t){this.isGridRandom=!0,0!=t.counter&&(this.isGridRandom=!1),this.preselectedGridNumber=t.counter}preload(){this.cache.json.remove("gridData");let t=0;console.log(this.isGridRandom),this.isGridRandom?(console.log(Math.floor(100*this.seededRandom(this.getDateSeed()))+1),t=Math.floor(100*this.seededRandom(this.getDateSeed()))+1):t=this.preselectedGridNumber;const i=`grid_${t}.json`;this.load.json("gridData","assets/grids/"+i),this.countdown=120,this.foundWords=new Set,this.totalPoints=0,this.longestWord=0,this.lengthOfLongestWord=0,this.path=[]}create(){this.sound.playAudioSprite("effects","RoundStart"),this.cameras.main.setBackgroundColor(68719476735),this.cameras.main.setZoom(4.7);const t=this.cache.json.get("gridData");this.grid=t.grid,this.bonuses=t.bonuses,this.words=t.words.map((t=>t.word)),this.wordsCommonFound=t.words,this.wordsCommonFound.forEach((t=>{t.isFound=0}));const i=50,e=this.sys.game.config.width/2-115,s=this.sys.game.config.height/2-115,o=[];let n=new N(this,{x:e-20,y:s-160,width:270,height:410,radius:6,strokeColor:0,strokeWidth:2,color:void 0,alpha:0}).setOrigin(0,0);this.add.existing(n),this.wordBackgroundOuter=new N(this,{x:this.sys.game.config.width/2-115,y:s-45-35,width:230,height:70,radius:2,strokeColor:0,strokeWidth:2,color:void 0,alpha:0}).setOrigin(0,0),this.add.existing(this.wordBackgroundOuter);let r=new N(this,{x:this.wordBackgroundOuter.x+this.wordBackgroundOuter.width-65,y:this.wordBackgroundOuter.y-i-10,width:65,height:i,radius:2,strokeColor:0,strokeWidth:2,color:void 0,alpha:0}).setOrigin(0,0);this.add.existing(r),this.totalPointsText=this.add.text(r.x+r.width-5,r.y+r.height/2,this.totalPoints.toString().padStart(4," "),{fontSize:"24px",fontFamily:"Arial",color:"#000",align:"right"}).setOrigin(1,.5).setResolution(this.fontResolution);let h=new N(this,{x:this.wordBackgroundOuter.x,y:this.wordBackgroundOuter.y-i-10,width:65,height:i,radius:2,strokeColor:0,strokeWidth:2,color:void 0,alpha:0}).setOrigin(0,0);this.add.existing(h),this.timerText=this.add.text(h.x+h.width/2,h.y+h.height/2,this.formatTime(this.countdown),{fontSize:"24px",fontFamily:"Arial",color:"#000"}).setOrigin(.5,.5).setResolution(this.fontResolution),this.wordBackgroundInner=new N(this,{x:this.wordBackgroundOuter.x+this.wordBackgroundOuter.width/2,y:this.wordBackgroundOuter.y+10,width:10,height:i,radius:2,strokeColor:0,strokeWidth:2,strokeAlpha:0,color:void 0,alpha:0}).setOrigin(.5,0),this.add.existing(this.wordBackgroundInner),this.wordPointsBackgroundEllipse=new Phaser.Geom.Ellipse(this.wordBackgroundInner.x+this.wordBackgroundInner.width/2,this.wordBackgroundInner.y+5,25,25,16777215),this.wordPointsBackgroundEllipseGraphicObject=this.add.graphics(),console.log("this.grid"+this.grid);for(let a=0;a<4;a++)for(let t=0;t<4;t++){let n=e+60*t,r=s+60*a,h=this.grid[a][t],d=this.letterPoints[h]||0,l=this.bonuses[a][t],c=this.add.rectangle(n+5,r+5,40,40,16711680).setOrigin(0,0);c.setAlpha(0);let u=new N(this,{x:n+25,y:r+25,width:50,height:i,radius:6,strokeColor:0,strokeWidth:2,color:void 0,alpha:0}).setOrigin(.5,.5);this.add.existing(u),this.add.text(n+25,r+25,h,{fontSize:"32px",color:"#000000"}).setOrigin(.5,.5).setResolution(this.fontResolution),this.add.text(n+50-2.5,r+2.5,d,{fontSize:"12px",color:"#000000"}).setOrigin(1,0).setResolution(this.fontResolution);let g="";if(l){let t=new Phaser.Geom.Ellipse(n+5,r+5,25,25),i=this.add.graphics();switch(l){case 1:i.fillStyle(9286651,1),g="ㄱx2";break;case 2:i.fillStyle(9286651,1),g="ㄱx3";break;case 3:i.fillStyle(15697028,1),g="가x2";break;case 4:i.fillStyle(15697028,1),g="가x3"}i.fillEllipseShape(t),i.lineStyle(2,0,1),i.strokeEllipseShape(t,256),this.add.text(t.x,t.y,g,{fontSize:"10px",color:"#000000"}).setOrigin(.5,.5).setResolution(this.fontResolution)}o.push({rect:c,roundRect:u,letter:h,points:d,bonus:l,index:4*a+t,gridX:t,gridY:a})}this.graphics=this.add.graphics({lineStyle:{width:5,color:255}}),this.input.on("pointerdown",(t=>{this.isMouseDown=!0,this.path=[],this.graphics.clear(),this.checkPointerOverRect(t,o)})),this.input.on("pointermove",(t=>{this.isMouseDown&&this.checkPointerOverRect(t,o)})),this.input.on("pointerup",(()=>{if(this.isMouseDown=!1,this.path.length>1){const t=this.path.map((t=>t.letter)).join("");let i=this.path.reduce(((t,i)=>t+(this.letterPoints[i.letter]||0)),0);const e=k(t);console.log(e);let s=1;if(this.path.forEach((t=>{switch(t.bonus){case 1:i+=this.letterPoints[t.letter]||0;break;case 2:i+=2*(this.letterPoints[t.letter]||0);break;case 3:s*=2;break;case 4:s*=3}})),i*=s,this.checkAndMarkWordAsFound(e))this.totalPoints+=i,this.updateResultTextAndWordPoints(e,i),this.updateTotalPointsText(),console.log(`Match found: ${e}`),t.length>this.lengthOfLongestWord&&(this.longestWord=e,this.lengthOfLongestWord=t.length),i>this.mostValuableWord&&(this.mostValuableWord=i);else if(i=0,this.updateResultTextAndWordPoints(e,i),console.log(`No match found for: ${e}`),this.wordsCommonFound.some((t=>t.word===e)))this.sound.playAudioSprite("effects","RepeatedWord");else{this.sound.playAudioSprite("effects","NoWord");let t=this.resultText.x;this.tweens.add({targets:[this.resultText,this.wordBackgroundInner],x:{from:t-20,to:t+20},ease:"Linear",duration:100,yoyo:!0,repeat:2,onComplete:()=>{this.resultText.x=t}})}}this.resetRectangles(o),this.resetGridRoundRectangle(o),this.path=[],this.graphics.clear()})),this.resultText=this.add.text(this.wordBackgroundOuter.x+this.wordBackgroundOuter.width/2,this.wordBackgroundOuter.y+15,"",{fontSize:"32px",color:"#000000",padding:{top:10,bottom:10}}).setOrigin(.5,0),this.resultPointsText=this.add.text(this.sys.game.config.width/2+80,this.wordPointsBackgroundEllipse.y,"",{fontFamily:"Arial Black",fontSize:"12px",color:"#000000"}).setOrigin(.5,.5),this.time.addEvent({delay:1e3,callback:this.updateTimer,callbackScope:this,loop:!0}),this.hiddenAt=null,document.addEventListener("visibilitychange",(()=>{if(document.hidden)this.hiddenAt=Date.now();else if(this.hiddenAt){const t=(Date.now()-this.hiddenAt)/1e3;this.countdown=Math.max(0,this.countdown-Math.floor(t)),this.hiddenAt=null}}))}checkPointerOverRect(t,i){const e=t.worldX,s=t.worldY;i.forEach((t=>{if(Phaser.Geom.Rectangle.Contains(t.rect.getBounds(),e,s)){const i=this.path[this.path.length-1];if(!i||i.index!==t.index)if(this.path.some((i=>i.index===t.index))){const i=this.path.findIndex((i=>i.index===t.index));this.path.slice(i+1).forEach((t=>{t.roundRect.setFillStyle(255,0),this.shrinkCell(t.roundRect),this.currentToneIndex=this.currentToneIndex-1,console.log(this.currentToneIndex)})),this.path=this.path.slice(0,i+1),this.drawLines()}else i&&!this.areNeighbors(i,t)||(this.path.push(t),t.roundRect.setFillStyle(12776801,1),this.growCell(t.roundRect),this.sound.playAudioSprite("tones",this.tones[this.currentToneIndex]),this.currentToneIndex=(this.currentToneIndex+1)%(this.tones.length+1),console.log(this.currentToneIndex),this.drawLines())}}))}areNeighbors(t,i){const e=Math.abs(t.gridX-i.gridX),s=Math.abs(t.gridY-i.gridY);return e<=1&&s<=1&&!(0===e&&0===s)}resetRectangles(t){t.forEach((t=>{t.rect.setFillStyle(16711680)}))}resetGridRoundRectangle(t){t.forEach((t=>{t.roundRect.setFillStyle(16711680,0),this.shrinkCell(t.roundRect),this.currentToneIndex=0}))}drawLines(){this.graphics.clear(),this.graphics.lineStyle(5,12776801);for(let t=0;t<this.path.length-1;t++){const i=this.path[t].rect.getBounds(),e=this.path[t+1].rect.getBounds(),s=this.getEdgePoint(i,e),o=this.getEdgePoint(e,i);this.graphics.moveTo(s.x,s.y),this.graphics.lineTo(o.x,o.y)}this.graphics.strokePath()}getEdgePoint(t,i){const e=Phaser.Math.Angle.Between(t.centerX,t.centerY,i.centerX,i.centerY);return{x:t.centerX+Math.cos(e)*(t.width/2),y:t.centerY+Math.sin(e)*(t.height/2)}}updateResultTextAndWordPoints(t,i){this.resultText.setFontSize("32px"),this.resultText.setText(t).setResolution(this.fontResolution),this.resultText.width>=this.wordBackgroundOuter.width-2*this.padding&&this.resultText.setFontSize("16px"),this.wordBackgroundInner.setStrokeStyle(2,0,1),this.wordBackgroundInner.width=this.resultText.width+2*this.padding,this.wordPointsBackgroundEllipseGraphicObject.clear(),i?(this.resultPointsText.setText(`+${i}`).setResolution(this.fontResolution),this.wordPointsBackgroundEllipseGraphicObject.fillStyle(16777215,1),this.wordPointsBackgroundEllipseGraphicObject.lineStyle(2,0,1),i>=20?this.sound.playAudioSprite("effects","MediumPoints"):this.sound.playAudioSprite("effects","LowPoints")):(this.resultPointsText.setText(""),this.wordPointsBackgroundEllipseGraphicObject.fillStyle(16777215,0),this.wordPointsBackgroundEllipseGraphicObject.lineStyle(2,0,0)),this.wordPointsBackgroundEllipse.x=this.wordBackgroundInner.x+this.wordBackgroundInner.width/2,this.wordPointsBackgroundEllipse.width=this.resultPointsText.width+this.padding/2,this.resultPointsText.x=this.wordPointsBackgroundEllipse.x,this.wordPointsBackgroundEllipseGraphicObject.fillEllipseShape(this.wordPointsBackgroundEllipse),this.wordPointsBackgroundEllipseGraphicObject.strokeEllipseShape(this.wordPointsBackgroundEllipse,128)}updateTotalPointsText(){this.totalPointsText.setText(this.totalPoints).setResolution(this.fontResolution)}updateTimer(){if(this.countdown>0)this.countdown--,this.timerText.setText(this.formatTime(this.countdown)),5==this.countdown&&this.sound.playAudioSprite("effects","TickTock");else{this.timerText.setText("00:00"),this.sound.playAudioSprite("effects","Cheers");const t=this.wordsCommonFound.reduce(((t,i)=>t+i.isFound),0);this.scene.start("GameOver",{foundWords:t,totalNumberOfWords:this.words.length,totalPoints:this.totalPoints,longestWord:this.longestWord,mostValuableWord:this.mostValuableWord,wordData:this.wordsCommonFound})}}formatTime(t){const i=Math.floor(t/60),e=t%60;return`${this.pad(i)}:${this.pad(e)}`}pad(t){return t.toString().padStart(2,"0")}shrinkCell(t){this.tweens.add({targets:t,scaleX:1,scaleY:1,ease:"Linear",duration:500,repeat:0,yoyo:!1})}growCell(t){this.tweens.add({targets:t,scaleX:1.05,scaleY:1.05,ease:"Elastic",duration:500,repeat:0,yoyo:!1})}getDateSeed(){const t=new Date;return 1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()}seededRandom(t){const i=1e4*Math.sin(t);return i-Math.floor(i)}formatDate(t){let i=new Date(t),e=""+(i.getMonth()+1),s=""+i.getDate(),o=i.getFullYear();return e.length<2&&(e="0"+e),s.length<2&&(s="0"+s),[o,e,s].join("-")}checkAndMarkWordAsFound(t){const i=this.wordsCommonFound.find((i=>i.word===t));return!(!i||0!==i.isFound||(i.isFound=1,0))}}class H extends u.Scene{constructor(){super("Game2NewDesign"),this.isMouseDown=!1,this.path=[],this.lineGraphics=null,this.grid=[],this.bonuses=[],this.words=[],this.wordsCommonFound=[],this.foundWords=new Set,this.timerText=null,this.resultText=null,this.resultPointsText=null,this.totalPointsText=null,this.wordBackgroundOuter=null,this.totalPoints=0,this.mostValuableWord=0,this.longestWord=0,this.lengthOfLongestWord=0,this.countdown=120,this.rectHeight=260,this.rectWidth=this.rectHeight,this.padding=this.rectWidth/5,this.tones=["A3","B3","C3","D3","E3","F3","G3","A4","B4","C4","D4","E4","F4","G4","A5","B5"],this.currentToneIndex=0,this.fontResolution=2,this.isGridRandom=!0,this.letterPoints={"ㅇ":1,"ㄴ":1,"ㄱ":1,"ㄹ":1,"ㅅ":2,"ㅈ":2,"ㅎ":3,"ㄷ":3,"ㅂ":3,"ㅁ":3,"ㅊ":5,"ㅋ":8,"ㅍ":8,"ㄶ":8,"ㅄ":8,"ㅌ":10,"ㄺ":10,"ㄻ":10,"ㅒ":10,"ㅀ":10,"ㄵ":10,"ㄼ":10,"ㅏ":1,"ㅣ":1,"ㅡ":1,"ㅓ":2,"ㅗ":2,"ㅜ":3,"ㅕ":4,"ㅐ":4,"ㅔ":4,"ㅛ":8,"ㅑ":8,"ㅠ":8,"ㅖ":8}}init(t){this.isGridRandom=!0,0!=t.counter&&(this.isGridRandom=!1),this.preselectedGridNumber=t.counter}preload(){this.cache.json.remove("gridData");let t=0;console.log(this.isGridRandom),this.isGridRandom?(t=this.pickTodaysGrid(100),console.log("TodaysGrid: "+t)):t=this.preselectedGridNumber;const i=`grid_${t}.json`;this.load.json("gridData","assets/grids/"+i),this.countdown=120,this.foundWords=new Set,this.totalPoints=0,this.longestWord=0,this.lengthOfLongestWord=0,this.path=[]}create(){this.sound.playAudioSprite("effects","RoundStart"),this.cameras.main.setBackgroundColor(1715258);const t=this.cache.json.get("gridData");this.grid=t.grid,this.bonuses=t.bonuses,this.words=t.words.map((t=>t.word)),this.wordsCommonFound=t.words,this.wordsCommonFound.forEach((t=>{t.isFound=0}));const i=52;this.gridWidth=1196;const e=this.sys.game.config.width/2-this.gridWidth/2,s=this.sys.game.config.height/2-this.gridWidth/2;this.gridWidth,this.gridWidth,this.resultWordFontSize=104;const o=[];this.wordBackgroundOuter=new N(this,{x:this.sys.game.config.width/2-this.gridWidth/2,y:s-234-182,width:this.gridWidth,height:286,radius:45,strokeColor:0,strokeWidth:0,alpha:0}).setOrigin(0,0).setFillStyle(1008845,1),this.add.existing(this.wordBackgroundOuter),this.wordPointsBackground=new N(this,{x:this.sys.game.config.width/2,y:s-234-182,width:this.rectWidth,height:this.rectHeight/3.5,radius:50,strokeColor:0,strokeWidth:0,alpha:0}).setOrigin(.5,.5).setFillStyle(16777215,1),this.add.existing(this.wordPointsBackground),this.wordPointsBackground.setAlpha(0);let n=new N(this,{x:this.wordBackgroundOuter.x+this.padding/3,y:this.wordBackgroundOuter.y-138.66666666666669,width:i,height:i,radius:2,strokeColor:1715258,strokeWidth:2,color:void 0,alpha:0}).setOrigin(0,0);this.add.existing(n),this.drawTimerShape(),this.timerText=this.add.text(n.x+n.width+i,0,this.formatTime(this.countdown),{fontSize:75,fontFamily:"Pretendard-Bold",color:"#ffffff"}).setOrigin(0,0);let r=n.getBounds(),h=this.timerText.getBounds();this.timerText.y=r.y+r.height/2-h.height/2,this.totalPointsText=this.add.text(0,this.timerText.y,this.totalPoints.toString().padStart(4,"9"),{fontSize:75,fontFamily:"Pretendard-Bold",color:"#ffffff",align:"right"}).setOrigin(1,0),console.log("TotalPointsTextWidth: "+this.totalPointsText.getBounds().width),this.totalPointsText.x=this.wordBackgroundOuter.x+this.wordBackgroundOuter.width;let a=new N(this,{x:this.totalPointsText.x-104-this.totalPointsText.getBounds().width,y:this.wordBackgroundOuter.y-138.66666666666669,width:i,height:i,radius:2,strokeColor:1715258,strokeWidth:2,color:void 0,alpha:0}).setOrigin(0,0);this.add.existing(a),this.drawPointShape(),this.totalPointsText.setText("0"),console.log("this.grid"+this.grid);for(let l=0;l<4;l++)for(let t=0;t<4;t++){let i=e+312*t,n=s+312*l,r=this.grid[l][t],h=this.letterPoints[r]||0,a=this.bonuses[l][t],c=this.add.rectangle(i+26,n+26,208,208,16711680).setOrigin(0,0);c.setAlpha(0);let u=new N(this,{x:i+130,y:n+130,width:260,height:260,radius:45,strokeColor:0,strokeWidth:0,color:void 0,alpha:0}).setOrigin(.5,.5).setFillStyle(16777215,1);this.add.existing(u),this.add.text(i+130,n+130,r,{fontFamily:"Pretendard-Bold",fontSize:104,color:"#000000"}).setOrigin(.5,.5),this.add.text(i+260-26,n+26,h,{fontFamily:"Pretendard-Bold",fontSize:260/7,color:"#929292"}).setOrigin(1,0);var d=new N(this,{x:i+130,y:n+130+65+32.5+10.4,width:260,height:65,strokeColor:0,strokeWidth:0,alpha:1}).setOrigin(.5,.5).setFillStyle(1008845,1);d.setRadiusBR(45),d.setRadiusBL(45),d.setAlpha(0),this.add.existing(d);let g="";if(a){switch(a){case 1:u.setStrokeStyle(6,1008845),d.setFillStyle(1008845,1),d.setAlpha(1),g="ㄱx2";break;case 2:u.setStrokeStyle(6,1008845),d.setFillStyle(1008845,1),d.setAlpha(1),g="ㄱx3";break;case 3:u.setStrokeStyle(6,13446714),d.setFillStyle(13446714,1),d.setAlpha(1),g="가x2";break;case 4:u.setStrokeStyle(6,13446714),d.setFillStyle(13446714,1),d.setAlpha(1),g="가x3"}this.add.text(d.x,d.y,g,{fontFamily:"Pretendard-Medium",fontSize:"46px",color:"#ffffff"}).setOrigin(.5,.5).setResolution(this.fontResolution)}o.push({rect:c,roundRect:u,bonusRect:d,letter:r,points:h,bonus:a,index:4*l+t,gridX:t,gridY:l})}this.lineGraphics=this.add.graphics({lineStyle:{width:5,color:255}}).setDepth(-1),this.input.on("pointerdown",(t=>{this.isMouseDown=!0,this.path=[],this.lineGraphics.clear(),this.checkPointerOverRect(t,o)})),this.input.on("pointermove",(t=>{this.isMouseDown&&this.checkPointerOverRect(t,o)})),this.input.on("pointerup",(()=>{if(this.isMouseDown=!1,this.path.length>1){const t=this.path.map((t=>t.letter)).join("");let i=this.path.reduce(((t,i)=>t+(this.letterPoints[i.letter]||0)),0);const e=k(t);console.log(e);let s=1;if(this.path.forEach((t=>{switch(t.bonus){case 1:i+=this.letterPoints[t.letter]||0;break;case 2:i+=2*(this.letterPoints[t.letter]||0);break;case 3:s*=2;break;case 4:s*=3}})),i*=s,this.checkAndMarkWordAsFound(e))this.totalPoints+=i,this.updateResultTextAndWordPoints(e,i),this.updateTotalPointsText(),console.log(`Match found: ${e}`),t.length>this.lengthOfLongestWord&&(this.longestWord=e,this.lengthOfLongestWord=t.length),i>this.mostValuableWord&&(this.mostValuableWord=i);else if(i=0,this.updateResultTextAndWordPoints(e,i),console.log(`No match found for: ${e}`),this.wordsCommonFound.some((t=>t.word===e)))this.sound.playAudioSprite("effects","RepeatedWord");else{this.sound.playAudioSprite("effects","NoWord");let t=this.resultText.x;this.tweens.add({targets:this.resultText,x:{from:t-20,to:t+20},ease:"Linear",duration:100,yoyo:!0,repeat:2,onComplete:()=>{this.resultText.x=t}})}}this.resetRectangles(o),this.resetGridRoundRectangle(o),this.path=[],this.lineGraphics.clear()})),this.resultText=this.add.text(this.wordBackgroundOuter.x+this.wordBackgroundOuter.width/2,this.wordBackgroundOuter.y+this.wordBackgroundOuter.height/2,"",{fontFamily:"Pretendard-Bold",fontSize:this.resultWordFontSize,color:"#ffffff",padding:{top:i,bottom:i}}).setOrigin(.5,.5),this.resultPointsText=this.add.text(this.sys.game.config.width/2,this.wordBackgroundOuter.y,"",{fontFamily:"Pretendard-Medium",fontSize:"64px",color:"#CD2E3A"}).setOrigin(.5,.5),this.time.addEvent({delay:1e3,callback:this.updateTimer,callbackScope:this,loop:!0}),this.hiddenAt=null,document.addEventListener("visibilitychange",(()=>{if(document.hidden)this.hiddenAt=Date.now();else if(this.hiddenAt){const t=(Date.now()-this.hiddenAt)/1e3;this.countdown=Math.max(0,this.countdown-Math.floor(t)),this.hiddenAt=null}}))}checkPointerOverRect(t,i){const e=t.worldX,s=t.worldY;i.forEach((t=>{if(Phaser.Geom.Rectangle.Contains(t.rect.getBounds(),e,s)){const i=this.path[this.path.length-1];if(!i||i.index!==t.index)if(this.path.some((i=>i.index===t.index))){const i=this.path.findIndex((i=>i.index===t.index));this.path.slice(i+1).forEach((t=>{t.roundRect.setFillStyle(16777215,1),this.shrinkCell(t.roundRect,t.bonusRect),this.currentToneIndex=this.currentToneIndex-1,console.log(this.currentToneIndex)})),this.path=this.path.slice(0,i+1),this.drawLines()}else i&&!this.areNeighbors(i,t)||(this.path.push(t),t.roundRect.setFillStyle(12776801,1),this.growCell(t.roundRect,t.bonusRect),this.sound.playAudioSprite("tones",this.tones[this.currentToneIndex]),this.currentToneIndex=(this.currentToneIndex+1)%(this.tones.length+1),console.log(this.currentToneIndex),this.drawLines())}}))}areNeighbors(t,i){const e=Math.abs(t.gridX-i.gridX),s=Math.abs(t.gridY-i.gridY);return e<=1&&s<=1&&!(0===e&&0===s)}resetRectangles(t){t.forEach((t=>{t.rect.setFillStyle(16711680)}))}resetGridRoundRectangle(t){t.forEach((t=>{t.roundRect.setFillStyle(16777215,1),this.shrinkCell(t.roundRect,t.bonusRect),this.currentToneIndex=0}))}drawLines(){this.lineGraphics.clear(),this.lineGraphics.lineStyle(10,12776801);for(let t=0;t<this.path.length-1;t++){const i=this.path[t].rect.getBounds(),e=this.path[t+1].rect.getBounds(),s=this.getEdgePoint(i,e),o=this.getEdgePoint(e,i);this.lineGraphics.moveTo(s.x,s.y),this.lineGraphics.lineTo(o.x,o.y)}this.lineGraphics.strokePath()}getEdgePoint(t,i){const e=Phaser.Math.Angle.Between(t.centerX,t.centerY,i.centerX,i.centerY);return{x:t.centerX+Math.cos(e)*(t.width/2),y:t.centerY+Math.sin(e)*(t.height/2)}}updateResultTextAndWordPoints(t,i){this.resultText.setFontSize(this.resultWordFontSize),this.resultText.setText(t).setResolution(this.fontResolution),this.resultText.width>=this.wordBackgroundOuter.width-2*this.padding&&this.resultText.setFontSize(this.resultWordFontSize/2),i?(this.resultPointsText.setText(`+${i}`).setResolution(this.fontResolution),this.wordPointsBackground.setAlpha(1),i>=20?this.sound.playAudioSprite("effects","MediumPoints"):this.sound.playAudioSprite("effects","LowPoints")):(this.resultPointsText.setText(""),this.wordPointsBackground.setAlpha(0))}updateTotalPointsText(){this.totalPointsText.setText(this.totalPoints).setResolution(this.fontResolution)}updateTimer(){if(this.countdown>0)this.countdown--,this.timerText.setText(this.formatTime(this.countdown)),5==this.countdown&&this.sound.playAudioSprite("effects","TickTock");else{this.timerText.setText("00:00"),this.sound.playAudioSprite("effects","Cheers");const t=this.wordsCommonFound.reduce(((t,i)=>t+i.isFound),0);this.scene.start("GameOver",{foundWords:t,totalNumberOfWords:this.words.length,totalPoints:this.totalPoints,longestWord:this.longestWord,mostValuableWord:this.mostValuableWord,wordData:this.wordsCommonFound})}}formatTime(t){const i=Math.floor(t/60),e=t%60;return`${this.pad(i)}:${this.pad(e)}`}pad(t){return t.toString().padStart(2,"0")}shrinkCell(t,i){this.tweens.add({targets:[t,i],scaleX:1,scaleY:1,ease:"Linear",duration:500,repeat:0,yoyo:!1})}growCell(t,i){this.tweens.add({targets:[t,i],scaleX:1.05,scaleY:1.05,ease:"Elastic",duration:500,repeat:0,yoyo:!1})}getDateSeed(){const t=new Date;return 1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()}seededRandom(t){const i=1e4*Math.sin(t);return i-Math.floor(i)}formatDate(t){let i=new Date(t),e=""+(i.getMonth()+1),s=""+i.getDate(),o=i.getFullYear();return e.length<2&&(e="0"+e),s.length<2&&(s="0"+s),[o,e,s].join("-")}checkAndMarkWordAsFound(t){const i=this.wordsCommonFound.find((i=>i.word===t));return!(!i||0!==i.isFound||(i.isFound=1,0))}drawTimerShape(){let t=this.add.container(0,0),i=this.add.graphics();i.fillStyle(16777215,1),i.fillCircle(0,0,100);let e=this.add.graphics();e.fillStyle(1715258,1),e.fillRect(-10,-60,20,65);let s=this.add.rectangle(60,-60,25,60,16777215).setOrigin(.5,.5);s.rotation=.785398;let o=this.add.rectangle(0,-125,70,25,16777215).setOrigin(.5,.5);t.add([i,e,s,o]),t.setPosition(this.wordBackgroundOuter.x+this.padding/2+this.padding/3,this.wordBackgroundOuter.y-(this.rectHeight/3+this.padding)+this.padding/2),t.setScale(.35)}drawPointShape(){let t=this.add.container(this.totalPointsText.x-2*this.padding-this.totalPointsText.getBounds().width+this.padding/2,this.wordBackgroundOuter.y-(this.rectHeight/3+this.padding)+this.padding/2),i=this.add.graphics();i.fillStyle(16777215,1),i.fillCircle(0,0,100);let e=this.add.graphics();e.lineStyle(4,65280,0),e.fillStyle(1715258,1),e.beginPath(),e.moveTo(0,-60),e.lineTo(17,-17),e.lineTo(60,-17),e.lineTo(26,9),e.lineTo(39,52),e.lineTo(0,26),e.lineTo(-39,52),e.lineTo(-26,9),e.lineTo(-60,-17),e.lineTo(-17,-17),e.closePath(),e.strokePath(),e.fillPath(),t.add([i,e]),t.setScale(.4)}pickTodaysGrid(t){const i=new Date("2024-01-01");var e=new Date;const s=new Date(e);return s.setDate(e.getDate()+0),e=s,Math.floor((e-i)/864e5)%t+1}}class L{constructor(t,i){d(this,"handlePointerDown",(t=>{this.zone.getBounds().contains(t.worldX,t.worldY)&&(0!=this.scrollVelocity&&(this.currentPosition=this.mainContainer.y,this.scrollVelocity=0),this.snapToClosestTween.stop(),this.isDragging=!0,this.startDragY=t.worldY,this.zone.setInteractive(),this.scrollVelocity=0)})),d(this,"handlePointerMove",(t=>{if(this.isDragging&&this.isDraggingAllowed){let e=t.worldY-this.startDragY;this.mainContainer.y=this.currentPosition+e;let s=this.scene.game.loop.delta,o=t.time;var i=t.worldY-this.previousPressedPosition;o-this.previousPressedPositionTimeStamp<300?this.scrollVelocity=i/(s/1e3):this.scrollVelocity=0,this.updateScrollBar(),this.previousPressedPosition=t.worldY,this.previousPressedPositionTimeStamp=t.time}})),d(this,"handlePointerUp",(t=>{this.isDragging&&(this.isDragging=!1,this.zone.disableInteractive(),0==this.scrollVelocity&&this.snapToClosest())})),d(this,"handleMouseWheel",((t,i,e,s,o)=>{this.zone.getBounds().contains(t.worldX,t.worldY)&&(0!=this.scrollVelocity&&(this.currentPosition=this.mainContainer.y,this.scrollVelocity=0),this.snapToClosestTween.stop(),this.mainContainer.y-=s,this.updateScrollBar(),this.currentPosition=this.mainContainer.y,this.limitScrollingRange(),this.inactivityTimer&&this.inactivityTimer.remove(),this.inactivityTimer=this.scene.time.delayedCall(500,(()=>{this.snapToClosest()}),[],this))})),this.scene=t,this.config=i,this.currentPage=0,this.zone=null,this.scrollBar=null,this.scrollInactivityTimer=null,this.snapToClosestTween=null}createPopup(){const{x:t,y:i,width:e,height:s,container:o,swipeThresholdFactor:n=.33,transitionDuration:r=300,backgroundColor:h=16777215,borderColor:a=0,borderRadius:d=30,borderWidth:l=4,isDraggingAllowed:c=!0,scrollBarWidth:u=10,scrollBarColor:g=7442342}=this.config;this.padding=52,this.swipeThresholdFactor=n,this.transitionDuration=r,this.width=e,this.height=s,this.borderWidth=l,this.isDraggingAllowed=c,this.x=t,this.y=i,this.scrollVelocity=0,this.deacceleration=1e3,this.previousPressedPosition=0,this.previousPressedPositionTimeStamp=0,this.snappedChildIndex=0,this.background=new N(this.scene,{x:t,y:i,width:e,height:s,radius:d,strokeColor:a,strokeWidth:l,color:h,alpha:1}).setOrigin(.5,.5),this.scene.add.existing(this.background),this.mainContainer=this.scene.add.container(t,i),o.y=0,this.mainContainer.add(o),this.textHeight=this.mainContainer.list[0].list[0].getBounds().height,this.maxScrollDistance=this.mainContainer.list[0].getBounds().height-this.textHeight,this.isDragging=!1,this.startDragY=0,this.currentPosition=i;const p=t-e/2,f=i-s/2,w=new Phaser.Display.Masks.GeometryMask(this.scene,this.scene.add.graphics().fillRect(p,f+(this.borderWidth/2+.5),e,s-(this.borderWidth+1)));this.mainContainer.setMask(w),this.zone=this.scene.add.zone(t-e/2,i-s/2,e,s).setOrigin(0,0),this.scrollBarHeight=Math.max(Math.min(s/(o.list.length+4)*5,100),20),this.scrollBarStartX=t+e/2-u/2-this.padding,this.scrollBarStartY=i-s/2+1*this.padding,this.scrollBarPathHeight=this.height-2*this.padding,this.scrollBarPath=new N(this.scene,{x:this.scrollBarStartX,y:this.scrollBarStartY,width:u,height:this.scrollBarPathHeight,radius:5,color:2900821,alpha:1}).setOrigin(.5,0),this.scene.add.existing(this.scrollBarPath),this.scrollBar=new N(this.scene,{x:this.scrollBarStartX,y:this.scrollBarStartY,width:u,height:this.scrollBarHeight,radius:5,color:g,alpha:1}).setOrigin(.5,0),this.scene.add.existing(this.scrollBar),this.scene.input.on("pointermove",this.handlePointerMove,this),this.scene.input.on("pointerdown",this.handlePointerDown,this),this.scene.input.on("pointerup",this.handlePointerUp,this),this.scene.input.on("wheel",this.handleMouseWheel,this),this.snapToClosest()}snapToClosest(){let t=this.mainContainer.list[0].list,i=1/0,e=null;if(t.forEach((t=>{let s=Math.abs(t.y+this.mainContainer.y-this.config.y);s<i&&(i=s,e=t)})),e){const i=t.indexOf(e);console.log(`Snapped to child #${i+1} of ${t.length}`),this.snapToClosestTween=this.scene.tweens.add({targets:this.mainContainer,y:this.config.y-e.y,ease:"Power1",duration:this.transitionDuration,onUpdate:()=>{this.currentPosition=this.mainContainer.y},onComplete:()=>{this.currentPosition=this.mainContainer.y,console.log(`Successfully snapped to child #${i+1}`),this.snappedChildIndex=i}})}}updateScrollingVelocity(t){0!=this.scrollVelocity&&0==this.isDragging&&(Math.abs(this.scrollVelocity)>.1?(this.scrollVelocity<0?(this.scrollVelocity+=this.deacceleration*t/1e3,this.scrollVelocity>0&&(this.scrollVelocity=0)):(this.scrollVelocity-=this.deacceleration*t/1e3,this.scrollVelocity<0&&(this.scrollVelocity=0)),this.mainContainer.y+=this.scrollVelocity*t/1e3,this.limitScrollingRange(),this.updateScrollBar()):(this.scrollVelocity=0,this.snapToClosest()),0==this.scrollVelocity&&this.snapToClosest())}limitScrollingRange(){this.mainContainer.y>this.y+2.5*this.textHeight?(this.mainContainer.y=this.y+2.5*this.textHeight,this.scrollVelocity=0):this.mainContainer.y<this.y-this.maxScrollDistance-2.5*this.textHeight&&(this.mainContainer.y=this.y-this.maxScrollDistance-2.5*this.textHeight,this.scrollVelocity=0)}updateScrollBar(){let t=this.y-this.mainContainer.y;this.scrollRatio=t/this.maxScrollDistance,this.scrollRatio>1?this.scrollRatio=1:this.scrollRatio<0&&(this.scrollRatio=0),this.maxScrollBarDistance=this.scrollBarPathHeight-this.scrollBarHeight,this.scrollBarMoveAmmount=this.scrollRatio*this.maxScrollBarDistance,this.scrollBar.setY(this.scrollBarStartY+this.scrollBarMoveAmmount)}close(){this.scene.input.off("pointerdown",this.handlePointerDown,this),this.scene.input.off("pointermove",this.handlePointerMove,this),this.scene.input.off("pointerup",this.handlePointerUp,this),this.scene.tweens.add({targets:this.background,alpha:0,duration:300,ease:"Power2"}),this.scene.tweens.add({targets:this.mainContainer,alpha:0,duration:300,ease:"Power2",onComplete:()=>{this.background.destroy(),this.mainContainer.destroy(),this.zone.destroy(),this.scrollBar&&this.scrollBar.destroy()}})}}class X{constructor(i,s){l(this,t),l(this,e),this.scene=i,this.config=s,this.currentPage=0,this.zone=null,this.createButton()}createButton(){const{x:o,y:n,width:r,height:h,borderRadius:a=50,backgroundColor:d=16777215,strokeColor:l=0,textColor:u=0,fontSize:g,onClick:p,buttonContainer:f}=this.config;f?console.log("There is a container!"):console.log("There is no container!");var w=this.scene.add.container(0,0);this.x=o,this.y=n,this.width=r,this.height=h,this.backgroundColor=d,this.backgroundButtonTintColor=0,this.backgroundButtonShadowColor=0,this.buttonContainer=f,this.scaleAmount=.99,this.buttonBackgroundShadow=new N(this.scene,{x:o-.01*r,y:n+.05*h,width:r,height:h,radius:a,color:this.backgroundButtonShadowColor,alpha:.75}).setOrigin(.5,.5),this.buttonBackgroundShadow.setScale(this.scaleAmount),this.scene.add.existing(this.buttonBackgroundShadow),this.buttonBackground=new N(this.scene,{x:o,y:n,width:r,height:h,radius:a,color:d,alpha:1}).setOrigin(.5,.5),this.scene.add.existing(this.buttonBackground),this.buttonBackgroundDarkerTint=new N(this.scene,{x:o,y:n,width:r,height:h,radius:a,color:this.backgroundButtonTintColor,alpha:0}).setOrigin(.5,.5),this.scene.add.existing(this.buttonBackgroundDarkerTint),w.add([this.buttonContainer,this.buttonBackgroundShadow,this.buttonBackground,this.buttonBackgroundDarkerTint]),w.bringToTop(this.buttonContainer),w.bringToTop(this.buttonBackgroundDarkerTint),this.buttonBackground.setInteractive({useHandCursor:!0}),this.buttonBackground.on("pointerdown",(()=>{this.isPressed=!0,c(this,t,i).call(this)})),this.buttonBackground.on("pointerup",(()=>{this.isPressed&&(c(this,e,s).call(this),p(),this.isPressed=!1)})),this.scene.input.on("pointerup",(t=>{this.isPressed&&(c(this,e,s).call(this),this.buttonBackground.getBounds().contains(t.x,t.y)&&p(),this.isPressed=!1)}))}hideButton(){this.buttonBackground.setVisible(!1),this.buttonBackgroundShadow.setVisible(!1),this.buttonBackgroundDarkerTint.setVisible(!1)}showButton(){this.buttonBackground.setVisible(!0),this.buttonBackgroundShadow.setVisible(!0),this.buttonBackgroundDarkerTint.setVisible(!0)}grayOutButton(){this.buttonBackground.setFillStyle(this.backgroundColor,.3),this.buttonBackgroundShadow.setFillStyle(0,0)}resetButtonColor(){this.buttonBackground.setFillStyle(this.backgroundColor,1),this.buttonBackgroundShadow.setFillStyle(this.backgroundButtonShadowColor,.75)}}t=new WeakSet,i=function(){this.buttonContainer.setScale(this.scaleAmount),this.buttonContainer.x=this.buttonBackgroundShadow.x,this.buttonContainer.y=this.buttonBackgroundShadow.y,this.buttonBackground.setScale(this.scaleAmount),this.buttonBackground.x=this.buttonBackgroundShadow.x,this.buttonBackground.y=this.buttonBackgroundShadow.y,this.buttonBackgroundDarkerTint.setScale(this.scaleAmount),this.buttonBackgroundDarkerTint.x=this.buttonBackgroundShadow.x,this.buttonBackgroundDarkerTint.y=this.buttonBackgroundShadow.y,this.buttonBackgroundDarkerTint.setFillStyle(this.backgroundButtonTintColor,.5)},e=new WeakSet,s=function(){this.buttonContainer.setScale(1),this.buttonContainer.x=this.x,this.buttonContainer.y=this.y,this.buttonBackground.setScale(1),this.buttonBackground.x=this.x,this.buttonBackground.y=this.y,this.buttonBackgroundDarkerTint.setScale(1),this.buttonBackgroundDarkerTint.x=this.x,this.buttonBackgroundDarkerTint.y=this.y,this.buttonBackgroundDarkerTint.setFillStyle(this.backgroundButtonTintColor,0)};class _ extends u.Scene{constructor(){super("GameOver")}init(t){this.foundWords=t.foundWords,this.totalPoints=t.totalPoints,this.longestWord=t.longestWord,this.totalNumberOfWords=t.totalNumberOfWords,this.mostValuableWord=t.mostValuableWord,this.wordData=t.wordData,this.fontResolution=2,this.isDelayOver=!1,this.isCopyButtonPressed=!1,this.isCopyButtonPressedDown=!1,this.isPracticeGame=!1}create(){1==localStorage.getItem("playedOneRound")&&(this.saveLastPlayedDate(),this.savePlayerScore(),this.saveWordData()),this.wordData.forEach((t=>{1==t.isFound&&console.log(`Found Word: ${t.word}, Common: ${t.common}, Found: ${t.isFound}`)})),this.cameras.main.setBackgroundColor(1715258),this.cameras.main.setZoom(1),this.rectWidth=260,this.rectHeight=260,this.padding=this.rectWidth/5,this.pointOutlineWidth=65,this.gridWidth=4*this.rectWidth+3*this.padding,this.startX=this.sys.game.config.width/2-this.gridWidth/2,this.startY=this.rectHeight,this.resultFontSize="50px",this.resultTextFontColor="#FFFFFF",this.resultPointsFontColor="#C2F561",this.goBackToHomeScreenButtonColor=12776801,this.cornerRadius=65;let t="게임 종료";1!=localStorage.getItem("playedOneRound")&&(t="연습게임 종료",this.isPracticeGame=!0),this.add.text(this.sys.game.config.width/2,this.startY,t,{fontFamily:"Cafe24Moyamoya-Regular",fontSize:"150px",color:"#ffffff",padding:{top:this.padding,bottom:0,left:this.padding,right:this.padding}}).setOrigin(.5,.5),this.printGameResults(),this.createCopyGameResultsButton();const i=this.add.container(0,0);this.popupScrollerYposition=this.cameras.main.height/2+this.gridWidth/2-this.padding,this.popupScrollerHeight=this.sys.game.config.height/4;const e=this.getCommonUnfoundWords();let s=0;this.scrollWordHeight=0,e.forEach(((t,e)=>{let o=this.add.text(0,s,t,{fontFamily:"Pretendard-Bold",fontSize:"75px",color:"#ffffff",padding:{top:this.padding/2,bottom:this.padding/2,left:this.padding,right:this.padding}});o.setOrigin(.5,.5),i.add(o),s+=o.height,this.scrollWordHeight=o.height})),this.popupScroller=new L(this,{x:this.cameras.main.width/2,y:this.popupScrollerYposition,width:this.gridWidth,height:this.popupScrollerHeight,container:i,transitionDuration:300,swipeThresholdFactor:.3,backgroundColor:1715258,borderColor:5269627,borderRadius:this.cornerRadius,borderWidth:4,isDraggingAllowed:!0}),this.add.text(this.sys.game.config.width/2,this.popupScrollerYposition-this.popupScrollerHeight/2,"찾지 못한 공통단어들을 확인해 보세요!",{fontFamily:"Pretendard-Medium",fontSize:"55px",color:this.resultTextFontColor,padding:{top:this.padding,bottom:this.padding,left:this.padding,right:this.padding}}).setOrigin(.5,1),this.popupScroller.createPopup();let o=this.gridWidth-4*this.padding;const n=this.popupScrollerHeight/4;this.add.image(this.cameras.main.width/2,this.popupScrollerYposition-n+2,"__WHITE").setDisplaySize(o,this.popupScrollerHeight/2).setAlpha(1,1,0,0).setTint(1715258),this.add.image(this.cameras.main.width/2,this.popupScrollerYposition+n-2,"__WHITE").setDisplaySize(o,this.popupScrollerHeight/2).setAlpha(0,0,1,1).setTint(1715258),this.createGoBackToHomeButton(),localStorage.setItem("playedOneRound",1)}update(t,i){this.popupScroller.updateScrollingVelocity(i)}createCopyGameResultsButton(){const t=this.add.text(0,0,"결과 복사",{backgroundColor:"#4a2a2d00",fontFamily:"Pretendard-Bold",fontSize:"56px",color:"#000000",padding:{top:this.padding,bottom:this.padding,left:this.padding,right:0}}).setOrigin(.5);let i=this.add.container(0,0);var e=100;this.copyBack=new N(this,{x:e/6,y:0-e/6,width:e,height:e,radius:20,strokeColor:0,strokeWidth:16,alpha:1}).setOrigin(.5).setFillStyle(16777215,1),this.add.existing(this.copyBack),this.copyFront=new N(this,{x:-100/6,y:e/6,width:e,height:e,radius:20,strokeColor:0,strokeWidth:16,alpha:1}).setOrigin(.5).setFillStyle(16777215,1),this.add.existing(this.copyFront),i.add([this.copyBack,this.copyFront]);const s=this.padding/3;i.setPosition(0-t.width/2-s,0).setScale(.5);const o=(i.getBounds().width/2+s)/2;i.setPosition(i.x+o,i.y),t.x=t.x+o;const n=.75*this.rectHeight,r=this.sys.game.config.width/2,h=this.resultsBackground.y+this.resultsBackground.height/2+n/2+this.padding,a=this.add.container(r,h);a.add(t),a.add(i),new X(this,{x:r,y:h,width:this.gridWidth,height:n,backgroundColor:16777215,borderRadius:this.cornerRadius,buttonContainer:a,onClick:()=>this.copyToClipboard(t)})}createGoBackToHomeButton(){const t=this.add.text(0,0,"처음으로",{backgroundColor:"#4a2a2d00",fontFamily:"Pretendard-Bold",fontSize:"56px",color:"#000000",padding:{top:this.padding,bottom:this.padding,left:this.padding,right:0}}).setOrigin(.5),i=this.padding/3,e=this.add.image(0-t.width/2-i,0,"home");e.setScale(.15);const s=(e.displayWidth/2+i)/2;e.x=e.x+s,t.x=t.x+s;const o=.75*this.rectHeight,n=this.sys.game.config.width/2,r=this.popupScrollerYposition+this.popupScrollerHeight/2+o/2+this.padding,h=this.add.container(n,r);h.add(t),h.add(e),new X(this,{x:n,y:r,width:this.gridWidth,height:o,backgroundColor:this.goBackToHomeScreenButtonColor,borderRadius:this.cornerRadius,buttonContainer:h,onClick:()=>this.scene.start("MainMenu")})}printGameResults(){const t=this.padding,i=this.add.text(0,0,"예문 글",{fontSize:this.resultFontSize,fontFamily:"Pretendard-Bold",padding:{top:t,bottom:0,left:t,right:t}}),e=i.height;i.destroy();const s=4*e+t;this.resultsBackground=new N(this,{x:this.startX,y:.27*this.sys.game.config.height,width:this.gridWidth,height:s,radius:this.cornerRadius,strokeColor:0,strokeWidth:0,alpha:0}).setOrigin(0,.5).setFillStyle(2242375,1),this.add.existing(this.resultsBackground);const o=this.resultsBackground.y-this.resultsBackground.height/2,n=this.startX,r=this.resultsBackground.x+this.resultsBackground.width;this.add.text(n,o,"총점: ",{backgroundColor:"#2d2d2d00",fontFamily:"Pretendard-Bold",fontSize:this.resultFontSize,color:this.resultTextFontColor,padding:{top:t,bottom:0,left:t,right:t}}).setOrigin(0,0),this.add.text(r,o,`${this.totalPoints}`,{backgroundColor:"#2d2d2d00",fontFamily:"Pretendard-Bold",fontSize:this.resultFontSize,color:this.resultPointsFontColor,padding:{top:t,bottom:0,left:t,right:t}}).setOrigin(1,0),this.add.text(n,o+e,"찾은 단어수: ",{backgroundColor:"#4a2a2d00",fontFamily:"Pretendard-Bold",fontSize:this.resultFontSize,color:this.resultTextFontColor,padding:{top:t,bottom:0,left:t,right:t}}).setOrigin(0,0),this.add.text(r,o+e,`${this.totalNumberOfWords}  중 ${this.foundWords}`,{backgroundColor:"#4a2a2d00",fontFamily:"Pretendard-Bold",fontSize:this.resultFontSize,color:this.resultTextFontColor,padding:{top:t,bottom:0,left:t,right:t}}).setOrigin(1,0),this.add.text(r,o+e,`${this.foundWords}`,{backgroundColor:"#4a2a2d00",fontFamily:"Pretendard-Bold",fontSize:this.resultFontSize,color:this.resultPointsFontColor,padding:{top:t,bottom:0,left:t,right:t}}).setOrigin(1,0),this.add.text(n,o+2*e,"최고점 단어: ",{backgroundColor:"#2d2b2a00",fontFamily:"Pretendard-Bold",fontSize:this.resultFontSize,color:this.resultTextFontColor,padding:{top:t,bottom:0,left:t,right:t}}).setOrigin(0,0),this.add.text(r,o+2*e,`${this.mostValuableWord}`,{backgroundColor:"#2d2b2a00",fontFamily:"Pretendard-Bold",fontSize:this.resultFontSize,color:this.resultPointsFontColor,padding:{top:t,bottom:0,left:t,right:t}}).setOrigin(1,0),this.add.text(n,o+3*e,"최장 단어: ",{backgroundColor:"#2d2d2d00",fontFamily:"Pretendard-Bold",fontSize:this.resultFontSize,color:this.resultTextFontColor,padding:{top:t,bottom:0,left:t,right:t}}).setOrigin(0,0),this.add.text(r,o+3*e,`${this.longestWord}`,{backgroundColor:"#2d2d2d00",fontFamily:"Pretendard-Bold",fontSize:this.resultFontSize,color:this.resultPointsFontColor,padding:{top:t,bottom:0,left:t,right:t}}).setOrigin(1,0)}copyToClipboard(t){const i=new Date;let e=`${String(i.getMonth()+1)}월 ${String(i.getDate())}일`;this.isPracticeGame&&(e="연습 게임");const s=`연글 ${e}\n총점: ${this.totalPoints}\n찾은 단어수: ${this.totalNumberOfWords} 중 ${this.foundWords}\n최고점 단어: ${this.mostValuableWord}\n최장 단어: ${this.longestWord}\nhttps://ymer2k.github.io/yeongul`;if(navigator.clipboard)navigator.clipboard.writeText(s).then((()=>{console.log("Copied to clipboard successfully!"),this.showCopySuccess(t)}),(t=>{console.error("Could not copy text: ",t)}));else{const i=document.createElement("textarea");i.value=s,document.body.appendChild(i),i.focus(),i.select();try{document.execCommand("copy"),console.log("Copied to clipboard successfully!"),this.showCopySuccess(t)}catch(o){console.error("Could not copy text: ",o)}document.body.removeChild(i)}}showCopySuccess(t){t.setText("복사 완료!"),this.time.delayedCall(2e3,(()=>{t.setText("결과 복사")}),null,this)}saveLastPlayedDate(){let t=new Date,i=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;localStorage.setItem("lastPlayedDate",i)}savePlayerScore(){let t={foundWords:this.foundWords,totalPoints:this.totalPoints,longestWord:this.longestWord,totalNumberOfWords:this.totalNumberOfWords,mostValuableWord:this.mostValuableWord},i=JSON.stringify(t);localStorage.setItem("gameScore",i)}saveWordData(){localStorage.setItem("wordData",JSON.stringify(this.wordData))}getCommonUnfoundWords(){return this.wordData.filter((t=>1===t.common&&0===t.isFound)).map((t=>t.word))}}class J{constructor(t,i,e,s,o,n,r){this.scene=t,this.gridSize=i,this.padding=e,this.startX=s,this.startY=o,this.cursorSizeFactor=n,this.easeSelection=r,this.grid=[],this.gridLetters=[["ㅅ","ㅏ","ㅎ","ㅣ"],["ㅛ","ㄱ","ㄹ","ㄹ"],["ㅇ","ㅗ","ㅏ","ㄴ"],["ㅂ","ㅜ","ㄱ","ㅇ"]],this.container=null}createAll(t,i,e=null){return this.container=e||this.scene.add.container(0,0),this.createGrid(t,i),this.createCursor(),this.createTimeline(),this.container}createGrid(t,i){let e=this.gridSize-this.padding;for(let s=0;s<t;s++){this.grid[s]=[];for(let t=0;t<i;t++){let i=this.scene.add.rectangle(this.startX+t*this.gridSize+this.padding/2,this.startY+s*this.gridSize+this.padding/2,e,e,16777215);i.setStrokeStyle(5,0);let o=this.gridLetters[s][t],n=this.scene.add.text(i.x,i.y,o,{fontSize:this.gridSize/1.5,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5);this.grid[s][t]={tile:i,text:n},this.container.add([i,n])}}}createCursor(){this.cursor=this.scene.add.triangle(this.startX+this.padding/2,this.startY+this.padding/2,75*this.cursorSizeFactor,50*this.cursorSizeFactor,110*this.cursorSizeFactor,35*this.cursorSizeFactor,74*this.cursorSizeFactor,0*this.cursorSizeFactor,14897478),this.cursor.setOrigin(2,0),this.container.add(this.cursor)}createTimeline(){this.timeline=this.scene.add.timeline([{at:500,tween:{targets:this.cursor,duration:0,onComplete:()=>{this.grid[0][0].tile.fillColor=65280}}},{at:1e3,tween:{targets:this.cursor,x:this.startX+this.gridSize+this.padding/2,duration:500,ease:this.easeSelection,onUpdate:()=>{this.grid[0][1].tile.fillColor=65280}}},{at:1500,tween:{targets:this.cursor,x:this.startX+2*this.gridSize+this.padding/2,y:this.startY+this.gridSize+this.padding/2,duration:500,ease:this.easeSelection,onUpdate:()=>{this.grid[1][2].tile.fillColor=65280}}},{at:2e3,tween:{targets:this.cursor,y:this.startY+2*this.gridSize+this.padding/2,duration:500,ease:this.easeSelection,onUpdate:()=>{this.grid[2][2].tile.fillColor=65280}}},{at:2500,tween:{targets:this.cursor,x:this.startX+3*this.gridSize+this.padding/2,y:this.startY+3*this.gridSize+this.padding/2,duration:500,ease:this.easeSelection,onUpdate:()=>{this.grid[3][3].tile.fillColor=65280},onComplete:()=>{this.scene.time.delayedCall(1e3,(()=>{this.resetGridColors(),this.resetCursorPosition(),this.timeline.play()}))}}}]),this.timeline.play()}resetGridColors(){this.grid.forEach((t=>{t.forEach((t=>{t.tile.fillColor=16777215}))}))}resetCursorPosition(){this.cursor.setPosition(this.startX+this.padding/2,this.startY+this.padding/2)}}class ${constructor(t,i){d(this,"handlePointerDown",(t=>{this.zone.getBounds().contains(t.worldX,t.worldY)&&(this.isDragging=!0,this.startDragX=t.x,console.log("zone.on POINTER DOWN"),this.zone.setInteractive())})),d(this,"handlePointerUp",(t=>{if(console.log("pointer UP in popupWindow."),this.isDragging){this.isDragging=!1;let i=t.x-this.startDragX;this.zone.disableInteractive(),console.log("zone.on POINTER UP"),Math.abs(i)>this.width*this.swipeThresholdFactor&&(i>0&&this.currentPage>0?this.currentPage--:i<0&&this.currentPage<this.totalPages-1&&this.currentPage++),this.updateDots(),this.snapToPage(this.transitionDuration)}})),this.scene=t,this.config=i,this.currentPage=0,this.zone=null}createPopup(){const{x:t,y:i,width:e,height:s,totalPages:o,pageContainers:n,dotRadius:r=5,swipeThresholdFactor:h=.33,transitionDuration:a=300,backgroundColor:d=16777215,borderColor:l=0,borderRadius:c=30,borderWidth:u=4,dotInactiveColor:g=11184810,dotActiveColor:p=16711680,isDraggingAllowed:f=!0}=this.config;this.totalPages=o,this.swipeThresholdFactor=h,this.transitionDuration=a,this.width=e,this.dots=[],this.isDraggingAllowed=f,this.background=new N(this.scene,{x:t,y:i,width:e,height:s,radius:c,strokeColor:l,strokeWidth:u,color:d,alpha:1}).setOrigin(.5,.5),this.scene.add.existing(this.background),this.mainContainer=this.scene.add.container(t,i),n.forEach(((t,i)=>{t.x=e*i,t.y=0,t.setAlpha(1),t.setVisible(!0),this.mainContainer.add(t)}));for(let y=0;y<o;y++){let e=this.scene.add.graphics();e.fillStyle(0===y?p:g,1),e.fillCircle(0,0,r),e.x=t+100*(y-Math.floor(o/2)),e.y=i+s/3,this.dots.push(e)}this.isDragging=!1,this.startDragX=0,this.currentPosition=t;const w=new Phaser.Display.Masks.GeometryMask(this.scene,this.scene.add.graphics().fillRect(t-e/2,i-s/2,e,s));this.mainContainer.setMask(w),this.zone=this.scene.add.zone(t-e/2,i-s/2,e,s).setOrigin(0,0),this.zone.on("pointermove",(t=>{if(this.isDragging&&this.isDraggingAllowed){let i=t.x-this.startDragX;this.mainContainer.x=this.currentPosition+i}})),this.scene.input.on("pointerdown",this.handlePointerDown,this),this.scene.input.on("pointerup",this.handlePointerUp,this)}snapToPage(t){this.scene.tweens.add({targets:this.mainContainer,x:this.config.x-this.config.width*this.currentPage,ease:"Power1",duration:t}),this.currentPosition=this.config.x-this.config.width*this.currentPage}updateDots(){this.dots.forEach(((t,i)=>{t.clear(),t.fillStyle(i===this.currentPage?this.config.dotActiveColor:this.config.dotInactiveColor,1),t.fillCircle(0,0,this.config.dotRadius)}))}close(){this.scene.input.off("pointerdown",this.handlePointerDown,this),this.scene.input.off("pointerup",this.handlePointerUp,this),this.scene.tweens.add({targets:this.background,alpha:0,duration:300,ease:"Power2"}),this.scene.tweens.add({targets:this.mainContainer,alpha:0,duration:300,ease:"Power2"}),this.scene.tweens.add({targets:this.dots,alpha:0,duration:300,ease:"Power2",onComplete:()=>{this.background.destroy(),this.mainContainer.destroy(),this.dots.forEach((t=>t.destroy())),this.zone.destroy()}})}}class U extends Phaser.GameObjects.Graphics{constructor(t,i,e,s=20,o=0,n=4,r=10,h=(()=>{}),a=!1){super(t),this.x=i,this.y=e,this.size=s,this.color=o,this.lineWidth=n,this.onClick=h,this.debug=a,this.interactivePadding=r,this.drawCross();const d=new Phaser.Geom.Rectangle(this.x-(this.size/2+this.interactivePadding),this.y-(this.size/2+this.interactivePadding),this.size+2*this.interactivePadding,this.size+2*this.interactivePadding);this.setInteractive(d,Phaser.Geom.Rectangle.Contains),this.on("pointerdown",(()=>{this.onClick()})),t.add.existing(this)}drawCross(){if(this.clear(),this.lineStyle(this.lineWidth,this.color),this.beginPath(),this.moveTo(this.x-this.size/2,this.y-this.size/2),this.lineTo(this.x+this.size/2,this.y+this.size/2),this.moveTo(this.x-this.size/2,this.y+this.size/2),this.lineTo(this.x+this.size/2,this.y-this.size/2),this.strokePath(),this.debug){this.lineStyle(2,16711680);const t=new Phaser.Geom.Rectangle(this.x-(this.size/2+this.interactivePadding),this.y-(this.size/2+this.interactivePadding),this.size+2*this.interactivePadding,this.size+2*this.interactivePadding);this.strokeRectShape(t)}}}class Z extends Phaser.GameObjects.Container{constructor(t,i){super(t,i.x,i.y),l(this,o),l(this,r),t.add.existing(this),this.scene=t,this.config=i,this.currentPage=0,this.zone=null,this.createButton()}createButton(){const{x:t,y:i,width:e,height:s,borderRadius:a=50,backgroundColor:d=16777215,strokeColor:l=0,textColor:u=0,fontSize:g,onClick:p,text:f="버튼 텍스트"}=this.config;this.width=e,this.backgroundColor=d,this.backgroundButtonTintColor=0,this.backgroundButtonShadowColor=0,this.scaleAmount=.99,this.buttonBackgroundShadow=new N(this.scene,{x:0-.01*e,y:0+.05*s,width:e,height:s,radius:a,color:this.backgroundButtonShadowColor,alpha:.5}).setOrigin(.5,.5),this.buttonBackgroundShadow.setScale(this.scaleAmount),this.add(this.buttonBackgroundShadow),this.buttonBackground=new N(this.scene,{x:0,y:0,width:e,height:s,radius:a,color:d,alpha:1}).setOrigin(.5,.5),this.add(this.buttonBackground),this.buttonBackgroundDarkerTint=new N(this.scene,{x:0,y:0,width:e,height:s,radius:a,color:this.backgroundButtonTintColor,alpha:0}).setOrigin(.5,.5),this.add(this.buttonBackgroundDarkerTint),this.buttonText=this.scene.add.text(0,0,f,{fontFamily:"Pretendard-Bold",fontSize:g,color:"#000000",stroke:"#000000",align:"center"}).setOrigin(.5),this.add(this.buttonText),this.buttonBackground.setInteractive({useHandCursor:!0}),this.buttonBackground.on("pointerdown",(()=>{this.isPressed=!0,c(this,o,n).call(this)})),this.buttonBackground.on("pointerup",(()=>{this.isPressed&&(c(this,r,h).call(this),p(),this.isPressed=!1)})),this.scene.input.on("pointerup",(t=>{this.isPressed&&(c(this,r,h).call(this),this.buttonBackground.getBounds().contains(t.x,t.y)&&p(),this.isPressed=!1)}))}hideButton(){this.buttonBackground.setVisible(!1),this.buttonBackgroundShadow.setVisible(!1),this.buttonBackgroundDarkerTint.setVisible(!1),this.buttonText.setVisible(!1)}showButton(){this.buttonBackground.setVisible(!0),this.buttonBackgroundShadow.setVisible(!0),this.buttonBackgroundDarkerTint.setVisible(!0),this.buttonText.setVisible(!0)}grayOutButton(){this.buttonBackground.setFillStyle(this.backgroundColor,.3),this.buttonBackgroundShadow.setFillStyle(0,0),this.buttonText.setAlpha(.3)}resetButtonColor(){this.buttonBackground.setFillStyle(this.backgroundColor,1),this.buttonBackgroundShadow.setFillStyle(this.backgroundButtonShadowColor,.75),this.buttonText.setAlpha(1)}}o=new WeakSet,n=function(){this.buttonText.setScale(this.scaleAmount),this.buttonText.x=this.buttonBackgroundShadow.x,this.buttonText.y=this.buttonBackgroundShadow.y,this.buttonBackground.setScale(this.scaleAmount),this.buttonBackground.x=this.buttonBackgroundShadow.x,this.buttonBackground.y=this.buttonBackgroundShadow.y,this.buttonBackgroundDarkerTint.setScale(this.scaleAmount),this.buttonBackgroundDarkerTint.x=this.buttonBackgroundShadow.x,this.buttonBackgroundDarkerTint.y=this.buttonBackgroundShadow.y,this.buttonBackgroundDarkerTint.setFillStyle(this.backgroundButtonTintColor,.5)},r=new WeakSet,h=function(){this.buttonText.setScale(1),this.buttonText.x=0,this.buttonText.y=0,this.buttonBackground.setScale(1),this.buttonBackground.x=0,this.buttonBackground.y=0,this.buttonBackgroundDarkerTint.setScale(1),this.buttonBackgroundDarkerTint.x=0,this.buttonBackgroundDarkerTint.y=0,this.buttonBackgroundDarkerTint.setFillStyle(this.backgroundButtonTintColor,0)};class q extends u.Scene{constructor(){super("MainMenu"),this.helpTextVisible=!1,this.infoTextVisible=!1,this.clickCounter=0,this.isAbleToplayUnlimitedRounds=!1,this.zone=0}create(){this.cameras.main.setZoom(1),this.cameras.main.setBackgroundColor(1715258),this.setBackground("background"),this.drawEmailAddress(),this.startX=this.scale.width/2;const t=this.scale.height/4,i=180,e=this.add.graphics();e.lineStyle(10,16711935,1),e.beginPath();const s=this.sys.game.config.width,o=this.sys.game.config.height/4,n=Math.PI,r=(s-0)/100;e.moveTo(0,o);for(let p=0;p<=100;p++){const t=0+p*r,i=o+200*Math.sin(1*Phaser.Math.DegToRad(360)*(p/100)+n);e.lineTo(t,i)}e.strokePath();const h=this.add.graphics();h.fillGradientStyle(16724530,1529343,16724530,1529343,1),h.fillRect(0,0,this.sys.game.config.width,this.sys.game.config.height/2);const a=e.createGeometryMask();h.setMask(a),this.add.text(this.startX,t,"연글",{fontFamily:"Cafe24Moyamoya-Regular",fontSize:277,color:"#ffffff",stroke:"#1A2C3A",align:"center"}).setOrigin(.5).setStroke("#1A2C3A",42);const d=t+800;new Z(this,{x:this.startX,y:d,width:800,height:i,borderRadius:50,backgroundColor:16777215,textColor:0,fontSize:70,text:"게임 방법",onClick:()=>this.showHelpText(this.startX,d-100)}),this.startButtonY=d+240;const l=new Z(this,{x:this.startX,y:this.startButtonY,width:800,height:i,borderRadius:50,backgroundColor:12776801,textColor:0,fontSize:70,text:"게임 시작",onClick:()=>this.startButtonFunctionality()}),c=this.startButtonY+240,u=new Z(this,{x:this.startX,y:c,width:800,height:i,borderRadius:50,backgroundColor:16777215,textColor:0,fontSize:70,text:"오늘의 점수 보기",onClick:()=>this.scoreButtonFunctionality()});u.hideButton(),this.canPlayNewRound()||(l.grayOutButton(),u.showButton()),this.input.on("pointerdown",(t=>{this.hideInfoText(t)}));const g=this.sys.game.config.height;this.hiddenButton=this.add.rectangle(this.scale.width-50,g-90,100,i,16711680,0).setOrigin(.5).setInteractive(),this.hiddenButton.on("pointerdown",(()=>{this.clickCounter++,console.log("Counter:",this.clickCounter),this.clickCounter>=10&&(this.isAbleToplayUnlimitedRounds=1)}))}scoreButtonFunctionality(){if(0==this.helpTextVisible&&0==this.infoTextVisible){let r=localStorage.getItem("gameScore");if(r){let n=JSON.parse(r);var t=n.foundWords,i=n.totalPoints,e=n.longestWord,s=n.totalNumberOfWords,o=n.mostValuableWord}let h=localStorage.getItem("wordData");if(h)var n=JSON.parse(h);this.scene.start("GameOver",{foundWords:t,totalNumberOfWords:s,totalPoints:i,longestWord:e,mostValuableWord:o,wordData:n})}}startButtonFunctionality(){if(0==this.helpTextVisible&&0==this.infoTextVisible)if(this.canPlayNewRound())if(null==localStorage.getItem("playedOneRound")){this.helpTextVisible=!0;const t=this.add.container(0,0).setAlpha(0),i=this.add.graphics();i.fillStyle(11532970,1),i.fillCircle(0,200,50),t.add(i);const e="연글을 처음 플레이하시나요?\n\n본 게임에 들어가기 전에 게임 방법을 보고\n연습 게임을 해보시길 권장드립니다.";let s=this.add.text(0,-200,e,{fontSize:this.scale.width/30,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5);t.add(s);const o=new $(this,{x:this.scale.width/2,y:this.scale.height/2,width:.9*this.scale.width,height:.3*this.scale.height,totalPages:1,pageContainers:[t],dotRadius:5,swipeThresholdFactor:.33,transitionDuration:300,backgroundColor:16777215,borderColor:0,borderRadius:30,borderWidth:4,dotInactiveColor:11184810,dotActiveColor:0,isDraggingAllowed:!1}),n=(t,i,e)=>{const s=this.add.text(t,i,e,{fontFamily:"Arial",fontSize:"56px",color:"#ffffff",align:"center",backgroundColor:"#2d2d2d"}).setPadding(32).setOrigin(.5);return s.setInteractive({useHandCursor:!0}),s.on("pointerover",(()=>{s.setBackgroundColor("#8d8d8d")})),s.on("pointerout",(()=>{s.setBackgroundColor("#2d2d2d")})),s},r=n(.9*-this.scale.width/3,200,"게임 방법"),h=n(0,200,"연습 게임"),a=n(.9*this.scale.width/3,200,"오늘의 게임");r.on("pointerdown",(()=>{o.close(),this.helpTextVisible=!1,this.showHelpText()})),h.on("pointerdown",(()=>{o.close(),this.helpTextVisible=!1,this.scene.start("Game2NewDesign",{counter:1})})),a.on("pointerdown",(()=>{o.close(),this.helpTextVisible=!1,localStorage.setItem("playedOneRound",1),this.scene.start("Game2NewDesign",{counter:this.clickCounter})})),t.add(r),t.add(h),t.add(a);const d=new U(this,.9*this.scale.width/4.5,.3*-this.scale.height/4.6,this.scale.width/50,0,6,40,(()=>{console.log("Cross clicked! Closing..."),o.close(),this.helpTextVisible=!1}),!1);t.add(d),o.createPopup()}else this.scene.start("Game2NewDesign",{counter:this.clickCounter});else this.showInfoText(this.startX,this.startButtonY+100)}showHelpText(t,i){if(0==this.helpTextVisible){const t=this.add.container(0,0).setAlpha(0),i=this.add.container(0,0).setAlpha(0),e=this.add.container(0,0).setAlpha(0);new J(this,this.scale.width/10,this.scale.width/100,-this.scale.width/10*4/2+this.scale.width/10/2-this.scale.width/100/2,.25*-this.scale.height,this.scale.width/100/8,"Linear").createAll(4,4,t);let s=this.add.text(0,-this.scale.height/2+.15*this.scale.height,"게임 방법",{fontSize:100,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5);t.add(s);let o=this.add.text(0,-this.scale.height/2+.475*this.scale.height,"연글은 빠르게 진행되는 단어 찾기 게임입니다!\n인접한 글자들을 연결하여 단어를 찾습니다.\n\n모든 플레이어는 매일 같은 글자 그리드를 받으니,\n친구들과 가족과 점수를 비교해 보세요!",{fontSize:50,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5);t.add(o);const n=(t,i,e)=>{const s=this.add.text(t,i,e,{fontFamily:"Arial",fontSize:"56px",color:"#ffffff",align:"center",fixedWidth:260,backgroundColor:"#2d2d2d"}).setPadding(32).setOrigin(.5);return s.setInteractive({useHandCursor:!0}),s.on("pointerover",(()=>{s.setBackgroundColor("#8d8d8d")})),s.on("pointerout",(()=>{s.setBackgroundColor("#2d2d2d")})),s};let r="글자마다 점수가 있으며, 단어를 만들면\n해당 점수를 얻습니다.";this.createGrid(i,!1,null,r);let h=[["더블 글자 점수","트리플 글자 점수"],["더블 단어 점수","트리플 단어 점수"]],a="일부 글자에는 보너스가 있습니다.\n이 보너스는 추가 점수를 줍니다.";this.createGrid(e,!0,h,a);const d=new $(this,{x:this.scale.width/2,y:this.scale.height/2,width:.9*this.scale.width,height:.9*this.scale.height,totalPages:3,pageContainers:[t,i,e],dotRadius:5,swipeThresholdFactor:.33,transitionDuration:300,backgroundColor:16777215,borderColor:0,borderRadius:30,borderWidth:4,dotInactiveColor:11184810,dotActiveColor:0,isDragginAllowed:!0}),l=()=>{d.currentPage<d.totalPages-1&&(d.currentPage++,d.updateDots(),d.snapToPage(d.config.transitionDuration))},c=n(0,300,"다음"),u=n(0,300,"다음"),g=n(0,300,"완료");c.on("pointerdown",l),u.on("pointerdown",l),g.on("pointerdown",(()=>{d.close(),this.helpTextVisible=!1})),t.add(c),i.add(u),e.add(g),d.createPopup()}this.helpTextVisible=!0}createGrid(t,i=!0,e=[],s=""){let o=this.scale.width/6,n=o/1,r=(-o-n)/2,h=.6*-this.scale.width;for(let a=0;a<2;a++)for(let s=0;s<2;s++){let d=this.add.rectangle(r+s*(o+n),h+a*(o+n),o,o,16777215);d.setStrokeStyle(5,0);let l="ㄱ",c=this.add.text(d.x,d.y,l,{fontSize:o/1.5,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5),u=[["1","5"],["3","1"]],g=this.add.text(d.x+o/2.5,d.y-o/2.5,u[a][s],{fontSize:o/6,color:"#000000",fontFamily:"Arial"}).setOrigin(1,0);if(t.add(d),t.add(c),t.add(g),i){let i=[[1,2],[3,4]][a][s],n="",r=new N(this,{x:d.x,y:d.y+o/2-o/8,width:o,height:o/4,strokeColor:0,strokeWidth:0,alpha:1}).setOrigin(.5,.5).setFillStyle(1008845,1);if(r.setAlpha(1),i){switch(i){case 1:r.setFillStyle(9286651,1),n="ㄱx2";break;case 2:r.setFillStyle(9286651,1),n="ㄱx3";break;case 3:r.setFillStyle(15697028,1),n="가x2";break;case 4:r.setFillStyle(15697028,1),n="가x3"}t.add(r);let h=this.add.text(r.x,r.y,n,{fontSize:o/6,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5);t.add(h);let l=e[a][s],c=this.add.text(d.x,d.y+o/1.25,l,{fontSize:o/5,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5);t.add(c)}}}if(s){let i=this.add.text(0,0,s,{fontSize:this.scale.width/30,color:"#000000",fontFamily:"Arial"}).setOrigin(.5,.5);t.add(i)}}updateDots(){for(let t=0;t<this.dots.length;t++)t===this.currentPage?(this.dots[t].clear(),this.dots[t].fillStyle(0,1),this.dots[t].fillCircle(0,0,this.dotRadiusPage)):(this.dots[t].clear(),this.dots[t].fillStyle(11184810,1),this.dots[t].fillCircle(0,0,this.dotRadiusPage))}hideHelpText(t){this.helpTextVisible&&(this.helpBackground.getBounds().contains(t.x,t.y)||(this.helpBackground.destroy(),this.helpText.destroy(),this.helpTextVisible=!1))}showInfoText(t,i){if(0==this.infoTextVisible){const e=this.calculateHoursLeft(),s=`내일 또 단어를 찾아보세요! (${e} 시간 뒤)`;console.log("Hours left:",e),this.infoBackground=this.add.rectangle(t,i,900,700,0).setOrigin(.5),this.infoText=this.add.text(t,i,s,{fontFamily:"Arial",fontSize:50,color:"#ffffff",align:"center"}).setOrigin(.5),this.children.bringToTop(this.infoBackground),this.children.bringToTop(this.infoText)}this.infoTextVisible=!0}hideInfoText(t){this.infoTextVisible&&(this.infoBackground.getBounds().contains(t.x,t.y)||(this.infoBackground.destroy(),this.infoText.destroy(),this.infoTextVisible=!1))}canPlayNewRound(){let t=localStorage.getItem("lastPlayedDate"),i=new Date,e=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`;return console.log("lastPlayedDate:",t),console.log("today:",e),null===t||t!==e||this.isAbleToplayUnlimitedRounds}calculateHoursLeft(){const t=new Date,i=new Date(t);return i.setHours(24,0,0,0),Math.max(0,Math.floor((i-t)/1e3/60/60))+1}drawEmailAddress(){const t=this.scale.width/2,i=.85*this.sys.game.config.height;this.add.dom(t,i,"div",{"background-color":"transparent",color:"#CCCCCC","text-align":"center",width:"520px",height:"300px",font:"32px Arial","font-weight":"bold"},"의견 및 문의:\n yeongulgame@gmail.com").setOrigin(.5,0)}}class K extends u.Scene{constructor(){super("Preloader")}init(){this.setBackground("background"),this.cameras.main.setBackgroundColor(68719476735),this.cameras.main.setZoom(2),this.add.rectangle(this.sys.game.config.width/2,this.sys.game.config.height/2,468,32).setStrokeStyle(1,0);const t=this.add.rectangle(this.sys.game.config.width/2-230,this.sys.game.config.height/2,4,28,0);this.load.on("progress",(i=>{t.width=4+460*i}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png"),this.load.image("dragon","dragon.png"),this.load.image("home","home.png"),this.load.audioSprite("tones","../assets/audio/audioTones.json",["../assets/audio/Xylophone.ogg","../assets/audio/Xylophone.mp3"]),this.load.audioSprite("effects","../assets/audio/audioEffects.json",["../assets/audio/AllEffectSounds.ogg","../assets/audio/AllEffectSounds.mp3"]),this.load.script("webfont","https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js")}create(){this.scene.start("MainMenu")}}class Q extends u.Scene{constructor(){super("Test"),this.isDragging=!1,this.startDragX=0}preload(){}create(){this.cameras.main.setZoom(1),this.cameras.main.setBackgroundColor(4294638335);const t=this.add.graphics();t.lineStyle(20,3066944),t.strokeRect(50,50,100,40),t.strokeCircle(600,400,64),t.beginPath(),t.moveTo(500,500),t.lineTo(500,300),t.lineTo(750,150),t.lineTo(1e3,300),t.lineTo(1e3,500),t.closePath(),t.strokePath(),this.add.image(512,584,"home").setScale(.15);var i=100;this.CopyBack=new N(this,{x:500+i/3,y:800-i/3,width:i,height:i,radius:25,strokeColor:0,strokeWidth:16,alpha:1}).setOrigin(0,0).setFillStyle(16777215,1),this.add.existing(this.CopyBack),this.CopyFront=new N(this,{x:500,y:800,width:i,height:i,radius:25,strokeColor:0,strokeWidth:16,alpha:1}).setOrigin(0,0).setFillStyle(16777215,1),this.add.existing(this.CopyFront)}}const tt={type:Phaser.AUTO,width:1318.4,height:2745,parent:"game-container",backgroundColor:"#028af8",dom:{createContainer:!0},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[g,K,q,Y,_,Q,H],fps:{target:60,forceSetTimeOut:!0},autoFocus:!0,visibilityChangePause:!1};new Phaser.Game(tt);
